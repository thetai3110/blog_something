(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[9],{143:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},153:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t);var c=n(31),a=n.n(c),r=n(42),s=n(3),o=(n(143),n(144),n(17)),i=n(76),u=n(36),l=function(e){return{type:u.a.SET_LST_COMMENTS,payload:e}},d=n(145),m=n.n(d),f=n(20),j=(n(150),n(151),n(190)),b=n.p+"static/media/avatar.e4c1ef62.jpg",p=function(e,t,n,c){f.b.database().ref("Blogs/".concat(c,"/comments")).push({user:e,content:t,avatar:n})},h=function(e,t,n,c,a){f.b.database().ref("Blogs/".concat(e,"/comments/").concat(t,"/feedback")).push({user:n,content:c,avatar:a})},O=n(19),x=n(50),y=n.n(x),v=n(2),g=Object(o.b)((function(e){return{hiddenEmoji:e.comment.hiddenEmoji}}),(function(e){return{setHiddenEmoji:function(){return e({type:u.a.HIDDEN_EMOJI})}}}))((function(e){var t=Object(s.useRef)(null),n=Object(s.useRef)(null),c=Object(O.b)().currentUser,o=function(){var n=Object(r.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=t.current.value,!r){n.next=9;break}if(""===s){n.next=7;break}return n.next=6,p(c.displayName,s,c.photoURL,e.idBlog);case 6:t.current.value="";case 7:n.next=13;break;case 9:if(""===s){n.next=13;break}return n.next=12,h(e.idBlog,e.idComment,c.displayName,s,c.photoURL);case 12:t.current.value="";case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.log("Comments: "+n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}();return Object(s.useEffect)((function(){})),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"composer-edittext",children:[Object(v.jsx)("div",{className:"composer-edittext-avatar",children:Object(v.jsx)("img",{src:null!==c?c.photoURL:b,alt:null!==c?c.photoURL:""})}),Object(v.jsxs)("div",{className:"composer-edittext-type",children:[Object(v.jsx)("textarea",{ref:t,placeholder:"Th\xeam b\xecnh lu\u1eadn",id:"composer-edittext-input",onInput:function(){t.current.style.height="auto",t.current.style.height=t.current.scrollHeight+"px"},name:"nowrap",rows:"2",wrap:"soft"}),Object(v.jsxs)("div",{className:"composer-edittext-option",children:[Object(v.jsx)("span",{onClick:function(t){var n="#emoji"+e.showWithId;"none"===y()(n).css("display")?(y()(".emoji-picker").css("display","none"),y()(n).css("display","block")):y()(n).css("display","none")},children:Object(v.jsx)("i",{className:"fa fa-smile-o","aria-hidden":"true"})}),Object(v.jsx)("div",{className:"emoji-picker",ref:n,id:"emoji".concat(e.showWithId),children:Object(v.jsx)(j.a,{onSelect:function(e){t.current.value=t.current.value+e.native}})})]})]})]}),Object(v.jsxs)("div",{className:"send",children:[e.typeComment?"":Object(v.jsx)("button",{onClick:function(e){y()(".feedback-feedback").css("display","none")},className:"btn btn-primary",children:"H\u1ee7y"}),Object(v.jsx)("button",{className:"btn btn-primary",onClick:function(t){return o(e.typeComment,t)},children:"B\xecnh lu\u1eadn"})]})]})})),T=(n(153),function(e){var t=e.comment,n=e.showWithId;return Object(v.jsxs)("div",{className:"comment",children:[Object(v.jsx)("img",{src:t.avatar,alt:t.avatar}),Object(v.jsxs)("div",{className:"comment-content",children:[Object(v.jsx)("h6",{children:t.user}),Object(v.jsx)("p",{children:t.content}),Object(v.jsxs)("div",{className:"comment-action",children:[Object(v.jsx)("span",{className:"action",children:"Th\xedch"}),Object(v.jsx)("label",{className:"action",onClick:function(e){y()(window).scrollTop(y()("#list-comments")[0].offsetTop);var t="#feedback"+n;y()(".feedback-feedback").css("display","none"),y()(t).css("display","block"),y()("#list-comments").animate({scrollTop:y()(t)[0].offsetTop-y()("#list-comments")[0].offsetTop-y()(t).height()},1e3);var c=y()(t).children()[0],a=y()(c).children()[1];y()(a).children()[0].focus()},children:"Ph\u1ea3n h\u1ed3i"}),Object(v.jsxs)("span",{children:[Object(v.jsx)("i",{className:"fa fa-thumbs-up","aria-hidden":"true"})," 2"]})]})]})]})}),N=n(32),E=Object(o.b)((function(e){return{lstComments:e.comment.lstComments}}),(function(e){return{setLstComments:function(t){return e(l(t))}}}))((function(e){var t=e.lstComments,n=e.setLstComments,c=e.idBlog;return Object(s.useEffect)((function(){n([]),f.b.database().ref("Blogs/".concat(c,"/comments")).on("value",(function(e){if(null!==e.val()){var t=Object.keys(e.val()).map((function(t){return{idCmt:t,value:e.val()[t]}}));n(t)}}))}),[]),Object(v.jsx)(v.Fragment,{children:t.length>0?Object(v.jsx)("div",{id:"list-comments",children:Object(v.jsx)("div",{className:"cmt-content",children:t.map((function(e,t){return Object(v.jsxs)("div",{children:[Object(v.jsx)(m.a,{className:"cmt",placeholder:Object(v.jsx)(N.a,{}),children:Object(v.jsx)(T,{comment:e.value,showWithId:e.idCmt})}),Object(v.jsx)("div",{className:"feedback",children:"undefined"!==typeof e.value.feedback?Object.keys(e.value.feedback).map((function(t,n){return Object(v.jsx)(m.a,{className:"cmt",placeholder:Object(v.jsx)(N.a,{}),children:Object(v.jsxs)("div",{className:"cmt",children:[Object(v.jsx)(T,{comment:e.value.feedback[t],showWithId:t}),Object(v.jsx)("div",{id:"feedback".concat(t),className:"feedback-feedback",children:Object(v.jsx)(g,{typeComment:!1,idComment:e.idCmt,idBlog:c,showWithId:t})})]})},n)})):Object(v.jsx)("div",{})}),Object(v.jsx)("div",{id:"feedback".concat(e.idCmt),className:"feedback-feedback",children:Object(v.jsx)(g,{typeComment:!1,idComment:e.idCmt,idBlog:c,showWithId:e.idCmt})})]},t)}))})}):null})})),S=n(27);t.default=Object(o.b)((function(e){var t=e.blog,n=e.comment,c=e.common;return{tagsBlog:t.tagsBlog,lstComments:n.lstComments,isLoading:c.isLoading}}),(function(e){return{setTagsBlog:function(t){return e(Object(i.q)(t))},setLstComments:function(t){return e(l(t))},setLoading:function(t){return e(Object(S.b)(t))}}}))((function(e){var t=e.tagsBlog,n=e.setTagsBlog,c=e.match,o=e.isLoading,i=e.setLoading,u=Object(s.useRef)();return Object(s.useEffect)((function(){n([]),i(!0),Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f.b.database().ref("Blogs/".concat(c.params.id)).on("value",(function(e){null!==e.val()&&(n(e.val().tags),null!==u.current&&(i(!1),u.current.innerHTML=e.val().content))}))}catch(t){console.log("BlogDetail: "+t)}case 1:case"end":return e.stop()}}),e)})))()}),[]),o?Object(v.jsx)(N.a,{}):Object(v.jsxs)("div",{className:"blog-detail-page",children:[Object(v.jsx)("div",{className:"ck-content",children:Object(v.jsx)("div",{ref:u})}),Object(v.jsx)("ul",{className:"blog-tags-list",children:t?t.map((function(e,t){return Object(v.jsx)("li",{children:e},t)})):null}),Object(v.jsx)(g,{typeComment:!0,idBlog:c.params.id,showWithId:"default"}),Object(v.jsx)(E,{idBlog:c.params.id})]})}))},76:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return r})),n.d(t,"m",(function(){return s})),n.d(t,"l",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"q",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"g",(function(){return j})),n.d(t,"r",(function(){return b})),n.d(t,"n",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return O})),n.d(t,"a",(function(){return x})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return v}));var c=n(12),a=function(e){return{type:c.a.SET_LST_BLOGS,payload:e}},r=function(e){return{type:c.a.SET_LST_DRAFTS,payload:e}},s=function(e){return{type:c.a.SET_LST_PUBLICS,payload:e}},o=function(e){return{type:c.a.SET_LST_PRIVATES,payload:e}},i=function(e){return{type:c.a.SET_COUNT_BLOGS,payload:e}},u=function(e){return{type:c.a.SET_COUNT_DRAFTS,payload:e}},l=function(e){return{type:c.a.SET_COUNT_PUBLICS,payload:e}},d=function(e){return{type:c.a.SET_COUNT_PRIVATES,payload:e}},m=function(e){return{type:c.a.SET_TAGS_BLOG,payload:e}},f=function(e){return{type:c.a.SET_BLOG_INFO,payload:e}},j=function(e){return{type:c.a.SET_FILENAME,payload:e}},b=function(){return{type:c.a.TOGGLE_SAVE_BOX}},p=function(e){return{type:c.a.PROGRESS_UPLOAD,payload:e}},h=function(e){return{type:c.a.HIDDEN_PROGRESS,payload:e}},O=function(e){return{type:c.a.HIDDEN_SIDEBAR,payload:e}},x=function(e){return{type:c.a.SET_ALL_TAG,payload:e}},y=function(e){return{type:c.a.SEARCH_INFO,payload:e}},v=function(e){return{type:c.a.SET_SELECTION_RANGE,payload:e}}}}]);
//# sourceMappingURL=9.b5baff1a.chunk.js.map