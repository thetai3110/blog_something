(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[3],{100:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},101:function(e,t,n){var r=n(91);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}},102:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},103:function(e,t,n){var r=n(90),i=n(97);function o(t,n,a){return i()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},128:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},129:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},130:function(e,t,n){var r,i=n(131),o=n(89),a=n(94),s=n(82),c=n(95),u=n(96),l=n(99),f=n(100),h=n(101);window,e.exports=(r=n(3),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";var r=n(4),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},function(e,t,n){e.exports=n(9)()},function(e,n,r){"use strict";(function(e){var i=r(4),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o&&i.a.process,c=function(){try{return a&&a.require&&a.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();n.a=c}).call(this,r(6)(e))},function(e,t){e.exports=r},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(11))},function(e,n,r){"use strict";(function(e){var i=r(0),o=r(7),a=t&&!t.nodeType&&t,s=a&&"object"==typeof e&&e&&!e.nodeType&&e,c=s&&s.exports===a?i.a.Buffer:void 0,u=(c?c.isBuffer:void 0)||o.a;n.a=u}).call(this,r(6)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,n,r){"use strict";(function(e){var i=r(0),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?i.a.Buffer:void 0,c=s?s.allocUnsafe:void 0;n.a=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,r(6)(e))},function(e,t,n){"use strict";var r=n(10);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"CKEditor",(function(){return Vn})),n.d(t,"CKEditorContext",(function(){return Bn}));var r=n(3),d=n.n(r),v=n(1),p=n.n(v),g=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},m=n(0),y=function(){return m.a.Date.now()},k=m.a.Symbol,b=Object.prototype,w=b.hasOwnProperty,_=b.toString,x=k?k.toStringTag:void 0,A=function(e){var t=w.call(e,x),n=e[x];try{e[x]=void 0;var r=!0}catch(e){}var i=_.call(e);return r&&(t?e[x]=n:delete e[x]),i},C=Object.prototype.toString,T=function(e){return C.call(e)},O=k?k.toStringTag:void 0,S=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":O&&O in Object(e)?A(e):T(e)},P=function(e){return null!=e&&"object"==typeof e},E=function(e){return"symbol"==typeof e||P(e)&&"[object Symbol]"==S(e)},R=/^\s+|\s+$/g,I=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,F=/^0o[0-7]+$/i,D=parseInt,N=function(e){if("number"==typeof e)return e;if(E(e))return NaN;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(R,"");var n=M.test(e);return n||F.test(e)?D(e.slice(2),n?2:8):I.test(e)?NaN:+e},j=Math.max,B=Math.min,V=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function v(e){return u=e,s=setTimeout(m,t),l?d(e):a}function p(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-u>=o}function m(){var e=y();if(p(e))return k(e);s=setTimeout(m,function(e){var n=t-(e-c);return f?B(n,o-(e-u)):n}(e))}function k(e){return s=void 0,h&&r?d(e):(r=i=void 0,a)}function b(){var e=y(),n=p(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return v(c);if(f)return clearTimeout(s),s=setTimeout(m,t),d(c)}return void 0===s&&(s=setTimeout(m,t)),a}return t=N(t)||0,g(n)&&(l=!!n.leading,o=(f="maxWait"in n)?j(N(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},b.flush=function(){return void 0===s?a:k(y())},b},L=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return g(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),V(e,t,{leading:r,maxWait:t,trailing:i})},z=function(){this.__data__=[],this.size=0},W=function(e,t){return e===t||e!=e&&t!=t},q=function(e,t){for(var n=e.length;n--;)if(W(e[n][0],t))return n;return-1},U=Array.prototype.splice,H=function(e){var t=this.__data__,n=q(t,e);return!(n<0)&&(n==t.length-1?t.pop():U.call(t,n,1),--this.size,!0)},$=function(e){var t=this.__data__,n=q(t,e);return n<0?void 0:t[n][1]},K=function(e){return q(this.__data__,e)>-1},G=function(e,t){var n=this.__data__,r=q(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function J(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}J.prototype.clear=z,J.prototype.delete=H,J.prototype.get=$,J.prototype.has=K,J.prototype.set=G;var Y,Q=J,X=function(){this.__data__=new Q,this.size=0},Z=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ee=function(e){return this.__data__.get(e)},te=function(e){return this.__data__.has(e)},ne=function(e){if(!g(e))return!1;var t=S(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},re=m.a["__core-js_shared__"],ie=(Y=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",oe=function(e){return!!ie&&ie in e},ae=Function.prototype.toString,se=function(e){if(null!=e){try{return ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ce=/^\[object .+?Constructor\]$/,ue=Function.prototype,le=Object.prototype,fe=ue.toString,he=le.hasOwnProperty,de=RegExp("^"+fe.call(he).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=function(e){return!(!g(e)||oe(e))&&(ne(e)?de:ce).test(se(e))},pe=function(e,t){return null==e?void 0:e[t]},ge=function(e,t){var n=pe(e,t);return ve(n)?n:void 0},me=ge(m.a,"Map"),ye=ge(Object,"create"),ke=function(){this.__data__=ye?ye(null):{},this.size=0},be=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},we=Object.prototype.hasOwnProperty,_e=function(e){var t=this.__data__;if(ye){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return we.call(t,e)?t[e]:void 0},xe=Object.prototype.hasOwnProperty,Ae=function(e){var t=this.__data__;return ye?void 0!==t[e]:xe.call(t,e)},Ce=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ye&&void 0===t?"__lodash_hash_undefined__":t,this};function Te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Te.prototype.clear=ke,Te.prototype.delete=be,Te.prototype.get=_e,Te.prototype.has=Ae,Te.prototype.set=Ce;var Oe=Te,Se=function(){this.size=0,this.__data__={hash:new Oe,map:new(me||Q),string:new Oe}},Pe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},Ee=function(e,t){var n=e.__data__;return Pe(t)?n["string"==typeof t?"string":"hash"]:n.map},Re=function(e){var t=Ee(this,e).delete(e);return this.size-=t?1:0,t},Ie=function(e){return Ee(this,e).get(e)},Me=function(e){return Ee(this,e).has(e)},Fe=function(e,t){var n=Ee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function De(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}De.prototype.clear=Se,De.prototype.delete=Re,De.prototype.get=Ie,De.prototype.has=Me,De.prototype.set=Fe;var Ne=De,je=function(e,t){var n=this.__data__;if(n instanceof Q){var r=n.__data__;if(!me||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ne(r)}return n.set(e,t),this.size=n.size,this};function Be(e){var t=this.__data__=new Q(e);this.size=t.size}Be.prototype.clear=X,Be.prototype.delete=Z,Be.prototype.get=ee,Be.prototype.has=te,Be.prototype.set=je;var Ve=Be,Le=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},ze=function(){try{var e=ge(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),We=function(e,t,n){"__proto__"==t&&ze?ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},qe=Object.prototype.hasOwnProperty,Ue=function(e,t,n){var r=e[t];qe.call(e,t)&&W(r,n)&&(void 0!==n||t in e)||We(e,t,n)},He=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?We(n,s,c):Ue(n,s,c)}return n},$e=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Ke=function(e){return P(e)&&"[object Arguments]"==S(e)},Ge=Object.prototype,Je=Ge.hasOwnProperty,Ye=Ge.propertyIsEnumerable,Qe=Ke(function(){return arguments}())?Ke:function(e){return P(e)&&Je.call(e,"callee")&&!Ye.call(e,"callee")},Xe=Array.isArray,Ze=n(5),et=/^(?:0|[1-9]\d*)$/,tt=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&et.test(e))&&e>-1&&e%1==0&&e<t},nt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},rt={};rt["[object Float32Array]"]=rt["[object Float64Array]"]=rt["[object Int8Array]"]=rt["[object Int16Array]"]=rt["[object Int32Array]"]=rt["[object Uint8Array]"]=rt["[object Uint8ClampedArray]"]=rt["[object Uint16Array]"]=rt["[object Uint32Array]"]=!0,rt["[object Arguments]"]=rt["[object Array]"]=rt["[object ArrayBuffer]"]=rt["[object Boolean]"]=rt["[object DataView]"]=rt["[object Date]"]=rt["[object Error]"]=rt["[object Function]"]=rt["[object Map]"]=rt["[object Number]"]=rt["[object Object]"]=rt["[object RegExp]"]=rt["[object Set]"]=rt["[object String]"]=rt["[object WeakMap]"]=!1;var it=function(e){return P(e)&&nt(e.length)&&!!rt[S(e)]},ot=function(e){return function(t){return e(t)}},at=n(2),st=at.a&&at.a.isTypedArray,ct=st?ot(st):it,ut=Object.prototype.hasOwnProperty,lt=function(e,t){var n=Xe(e),r=!n&&Qe(e),i=!n&&!r&&Object(Ze.a)(e),o=!n&&!r&&!i&&ct(e),a=n||r||i||o,s=a?$e(e.length,String):[],c=s.length;for(var u in e)!t&&!ut.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||tt(u,c))||s.push(u);return s},ft=Object.prototype,ht=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ft)},dt=function(e,t){return function(n){return e(t(n))}},vt=dt(Object.keys,Object),pt=Object.prototype.hasOwnProperty,gt=function(e){if(!ht(e))return vt(e);var t=[];for(var n in Object(e))pt.call(e,n)&&"constructor"!=n&&t.push(n);return t},mt=function(e){return null!=e&&nt(e.length)&&!ne(e)},yt=function(e){return mt(e)?lt(e):gt(e)},kt=function(e,t){return e&&He(t,yt(t),e)},bt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},wt=Object.prototype.hasOwnProperty,_t=function(e){if(!g(e))return bt(e);var t=ht(e),n=[];for(var r in e)("constructor"!=r||!t&&wt.call(e,r))&&n.push(r);return n},xt=function(e){return mt(e)?lt(e,!0):_t(e)},At=function(e,t){return e&&He(t,xt(t),e)},Ct=n(8),Tt=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Ot=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},St=function(){return[]},Pt=Object.prototype.propertyIsEnumerable,Et=Object.getOwnPropertySymbols,Rt=Et?function(e){return null==e?[]:(e=Object(e),Ot(Et(e),(function(t){return Pt.call(e,t)})))}:St,It=function(e,t){return He(e,Rt(e),t)},Mt=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Ft=dt(Object.getPrototypeOf,Object),Dt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Mt(t,Rt(e)),e=Ft(e);return t}:St,Nt=function(e,t){return He(e,Dt(e),t)},jt=function(e,t,n){var r=t(e);return Xe(e)?r:Mt(r,n(e))},Bt=function(e){return jt(e,yt,Rt)},Vt=function(e){return jt(e,xt,Dt)},Lt=ge(m.a,"DataView"),zt=ge(m.a,"Promise"),Wt=ge(m.a,"Set"),qt=ge(m.a,"WeakMap"),Ut=se(Lt),Ht=se(me),$t=se(zt),Kt=se(Wt),Gt=se(qt),Jt=S;(Lt&&"[object DataView]"!=Jt(new Lt(new ArrayBuffer(1)))||me&&"[object Map]"!=Jt(new me)||zt&&"[object Promise]"!=Jt(zt.resolve())||Wt&&"[object Set]"!=Jt(new Wt)||qt&&"[object WeakMap]"!=Jt(new qt))&&(Jt=function(e){var t=S(e),n="[object Object]"==t?e.constructor:void 0,r=n?se(n):"";if(r)switch(r){case Ut:return"[object DataView]";case Ht:return"[object Map]";case $t:return"[object Promise]";case Kt:return"[object Set]";case Gt:return"[object WeakMap]"}return t});var Yt=Jt,Qt=Object.prototype.hasOwnProperty,Xt=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Qt.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Zt=m.a.Uint8Array,en=function(e){var t=new e.constructor(e.byteLength);return new Zt(t).set(new Zt(e)),t},tn=function(e,t){var n=t?en(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},nn=/\w*$/,rn=function(e){var t=new e.constructor(e.source,nn.exec(e));return t.lastIndex=e.lastIndex,t},on=k?k.prototype:void 0,an=on?on.valueOf:void 0,sn=function(e){return an?Object(an.call(e)):{}},cn=function(e,t){var n=t?en(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},un=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return en(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return tn(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return cn(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return rn(e);case"[object Set]":return new r;case"[object Symbol]":return sn(e)}},ln=Object.create,fn=function(){function e(){}return function(t){if(!g(t))return{};if(ln)return ln(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),hn=function(e){return"function"!=typeof e.constructor||ht(e)?{}:fn(Ft(e))},dn=function(e){return P(e)&&"[object Map]"==Yt(e)},vn=at.a&&at.a.isMap,pn=vn?ot(vn):dn,gn=function(e){return P(e)&&"[object Set]"==Yt(e)},mn=at.a&&at.a.isSet,yn=mn?ot(mn):gn,kn={};kn["[object Arguments]"]=kn["[object Array]"]=kn["[object ArrayBuffer]"]=kn["[object DataView]"]=kn["[object Boolean]"]=kn["[object Date]"]=kn["[object Float32Array]"]=kn["[object Float64Array]"]=kn["[object Int8Array]"]=kn["[object Int16Array]"]=kn["[object Int32Array]"]=kn["[object Map]"]=kn["[object Number]"]=kn["[object Object]"]=kn["[object RegExp]"]=kn["[object Set]"]=kn["[object String]"]=kn["[object Symbol]"]=kn["[object Uint8Array]"]=kn["[object Uint8ClampedArray]"]=kn["[object Uint16Array]"]=kn["[object Uint32Array]"]=!0,kn["[object Error]"]=kn["[object Function]"]=kn["[object WeakMap]"]=!1;var bn=function e(t,n,r,i,o,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!g(t))return t;var f=Xe(t);if(f){if(s=Xt(t),!c)return Tt(t,s)}else{var h=Yt(t),d="[object Function]"==h||"[object GeneratorFunction]"==h;if(Object(Ze.a)(t))return Object(Ct.a)(t,c);if("[object Object]"==h||"[object Arguments]"==h||d&&!o){if(s=u||d?{}:hn(t),!c)return u?Nt(t,At(s,t)):It(t,kt(s,t))}else{if(!kn[h])return o?t:{};s=un(t,h,c)}}a||(a=new Ve);var v=a.get(t);if(v)return v;a.set(t,s),yn(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):pn(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var p=l?u?Vt:Bt:u?keysIn:yt,m=f?void 0:p(t);return Le(m||t,(function(i,o){m&&(i=t[o=i]),Ue(s,o,e(i,n,r,o,t,a))})),s},wn=function(e,t){return bn(e,5,t="function"==typeof t?t:void 0)},_n=Function.prototype,xn=Object.prototype,An=_n.toString,Cn=xn.hasOwnProperty,Tn=An.call(Object),On=function(e){if(!P(e)||"[object Object]"!=S(e))return!1;var t=Ft(e);if(null===t)return!0;var n=Cn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&An.call(n)==Tn},Sn=function(e){return P(e)&&1===e.nodeType&&!On(e)};function Pn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=[e],r=new Set;n.length>0;){var i=n.shift();if(!(r.has(i)||En(i)||t.has(i)))if(r.add(i),i[Symbol.iterator])try{var o,a=h(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;n.push(s)}}catch(u){a.e(u)}finally{a.f()}}catch(e){}else for(var c in i)"defaultValue"!==c&&n.push(i[c])}return r}function En(e){var t=Object.prototype.toString.call(e),n=typeof e;return"number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===t||"[object RegExp]"===t||"[object Module]"===t||null==e||e instanceof EventTarget||e instanceof Event}function Rn(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(e===t&&"object"==typeof(n=e)&&null!==n)return!0;var i,o=Pn(e,r),a=Pn(t,r),s=h(o);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(a.has(c))return!0}}catch(u){s.e(u)}finally{s.f()}return!1}var In=function(){function e(t){var n=this;if(l(this,e),this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=function(e){var t=e.error||e.reason;t instanceof Error&&n._handleError(t,e)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}return f(e,[{key:"setCreator",value:function(e){this._creator=e}},{key:"setDestructor",value:function(e){this._destructor=e}},{key:"destroy",value:function(){this._stopErrorHandling(),this._listeners={}}},{key:"on",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}},{key:"off",value:function(e,t){this._listeners[e]=this._listeners[e].filter((function(e){return e!==t}))}},{key:"_fire",value:function(e){for(var t=this._listeners[e]||[],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o,a=h(t);try{for(a.s();!(o=a.n()).done;)o.value.apply(this,[null].concat(r))}catch(s){a.e(s)}finally{a.f()}}},{key:"_startErrorHandling",value:function(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_stopErrorHandling",value:function(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_handleError",value:function(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t.filename,lineno:t.lineno,colno:t.colno,date:this._now()});var n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}},{key:"_shouldReactToError",value:function(e){return e.is&&e.is("CKEditorError")&&void 0!==e.context&&null!==e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}},{key:"_shouldRestart",value:function(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}]),e}(),Mn=function(e){c(n,e);var t=u(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,n),(r=t.call(this,i))._editor=null,r._throttledSave=L(r._save.bind(o(r)),"number"==typeof i.saveInterval?i.saveInterval:5e3),r._creator=function(t,n){return e.create(t,n)},r._destructor=function(e){return e.destroy()},r}return f(n,[{key:"editor",get:function(){return this._editor}},{key:"_item",get:function(){return this._editor}},{key:"_restart",value:function(){var e=this;return Promise.resolve().then((function(){return e.state="initializing",e._fire("stateChange"),e._destroy()})).catch((function(e){console.error("An error happened during the editor destroying.",e)})).then((function(){if("string"==typeof e._elementOrData)return e.create(e._data,e._config,e._config.context);var t=Object.assign({},e._config,{initialData:e._data});return e.create(e._elementOrData,t,t.context)})).then((function(){e._fire("restart")}))}},{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._elementOrData,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config,i=arguments.length>2?arguments[2]:void 0;return Promise.resolve().then((function(){return a(s(n.prototype),"_startErrorHandling",e).call(e),e._elementOrData=t,e._config=e._cloneEditorConfiguration(r)||{},e._config.context=i,e._creator(t,e._config)})).then((function(t){e._editor=t,t.model.document.on("change:data",e._throttledSave),e._lastDocumentVersion=t.model.document.version,e._data=e._getData(),e.state="ready",e._fire("stateChange")}))}},{key:"destroy",value:function(){var e=this;return Promise.resolve().then((function(){return e.state="destroyed",e._fire("stateChange"),a(s(n.prototype),"destroy",e).call(e),e._destroy()}))}},{key:"_destroy",value:function(){var e=this;return Promise.resolve().then((function(){e._stopErrorHandling(),e._throttledSave.flush();var t=e._editor;return e._editor=null,e._destructor(t)}))}},{key:"_save",value:function(){var e=this._editor.model.document.version;if(e!==this._lastDocumentVersion)try{this._data=this._getData(),this._lastDocumentVersion=e}catch(e){console.error(e,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}},{key:"_setExcludedProperties",value:function(e){this._excludedProps=e}},{key:"_getData",value:function(){var e,t={},n=h(this._editor.model.document.getRootNames());try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=this._editor.data.get({rootName:r})}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"_isErrorComingFromThisItem",value:function(e){return Rn(this._editor,e.context,this._excludedProps)}},{key:"_cloneEditorConfiguration",value:function(e){return wn(e,(function(e,t){return Sn(e)||"context"===t?e:void 0}))}}]),n}(In),Fn=new Array(256).fill().map((function(e,t){return("0"+t.toString(16)).slice(-2)})),Dn=function(e){c(n,e);var t=u(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,n),(r=t.call(this,i))._watchdogs=new Map,r._watchdogConfig=i,r._context=null,r._contextProps=new Set,r._actionQueue=new Nn,r._creator=function(t){return e.create(t)},r._destructor=function(e){return e.destroy()},r._actionQueue.onEmpty((function(){"initializing"===r.state&&(r.state="ready",r._fire("stateChange"))})),r}return f(n,[{key:"context",get:function(){return this._context}},{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._actionQueue.enqueue((function(){return e._contextConfig=t,e._create()}))}},{key:"getItem",value:function(e){return this._getWatchdog(e)._item}},{key:"getItemState",value:function(e){return this._getWatchdog(e).state}},{key:"add",value:function(e){var t=this,n=Array.isArray(e)?e:[e];return this._actionQueue.enqueue((function(){if("destroyed"===t.state)throw new Error("Cannot add items to destroyed watchdog.");if(!t._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");return Promise.all(n.map((function(e){var n;if(t._watchdogs.has(e.id))throw new Error("Item with the given id is already added: '".concat(e.id,"'."));if("editor"===e.type)return(n=new Mn(t._watchdogConfig)).setCreator(e.creator),n._setExcludedProperties(t._contextProps),e.destructor&&n.setDestructor(e.destructor),t._watchdogs.set(e.id,n),n.on("error",(function(r,i){var o=i.error,a=i.causesRestart;t._fire("itemError",{itemId:e.id,error:o}),a&&t._actionQueue.enqueue((function(){return new Promise((function(r){n.on("restart",function t(){n.off("restart",t),this._fire("itemRestart",{itemId:e.id}),r()}.bind(t))}))}))})),n.create(e.sourceElementOrData,e.config,t._context);throw new Error("Not supported item type: '".concat(e.type,"'."))})))}))}},{key:"remove",value:function(e){var t=this,n=Array.isArray(e)?e:[e];return this._actionQueue.enqueue((function(){return Promise.all(n.map((function(e){var n=t._getWatchdog(e);return t._watchdogs.delete(e),n.destroy()})))}))}},{key:"destroy",value:function(){var e=this;return this._actionQueue.enqueue((function(){return e.state="destroyed",e._fire("stateChange"),a(s(n.prototype),"destroy",e).call(e),e._destroy()}))}},{key:"_restart",value:function(){var e=this;return this._actionQueue.enqueue((function(){return e.state="initializing",e._fire("stateChange"),e._destroy().catch((function(e){console.error("An error happened during destroying the context or items.",e)})).then((function(){return e._create()})).then((function(){return e._fire("restart")}))}))}},{key:"_create",value:function(){var e=this;return Promise.resolve().then((function(){return e._startErrorHandling(),e._creator(e._contextConfig)})).then((function(t){return e._context=t,e._contextProps=Pn(e._context),Promise.all(Array.from(e._watchdogs.values()).map((function(t){return t._setExcludedProperties(e._contextProps),t.create(void 0,void 0,e._context)})))}))}},{key:"_destroy",value:function(){var e=this;return Promise.resolve().then((function(){e._stopErrorHandling();var t=e._context;return e._context=null,e._contextProps=new Set,Promise.all(Array.from(e._watchdogs.values()).map((function(e){return e.destroy()}))).then((function(){return e._destructor(t)}))}))}},{key:"_getWatchdog",value:function(e){var t=this._watchdogs.get(e);if(!t)throw new Error("Item with the given id was not registered: ".concat(e,"."));return t}},{key:"_isErrorComingFromThisItem",value:function(e){var t,n=h(this._watchdogs.values());try{for(n.s();!(t=n.n()).done;)if(t.value._isErrorComingFromThisItem(e))return!1}catch(r){n.e(r)}finally{n.f()}return Rn(this._context,e.context)}}]),n}(In),Nn=function(){function e(){l(this,e),this._promiseQueue=Promise.resolve(),this._onEmptyCallbacks=[]}return f(e,[{key:"onEmpty",value:function(e){this._onEmptyCallbacks.push(e)}},{key:"enqueue",value:function(e){var t,n=this,r=this._promiseQueue.then(e).then((function(){n._promiseQueue===t&&n._onEmptyCallbacks.forEach((function(e){return e()}))}));return t=this._promiseQueue=r.catch((function(){})),r}}]),e}(),jn=d.a.createContext("contextWatchdog"),Bn=function(e){c(n,e);var t=u(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).contextWatchdog=null,i.props.isLayoutReady&&i._initializeContextWatchdog(i.props.config),i}return f(n,[{key:"shouldComponentUpdate",value:function(e){return e.id!==this.props.id&&(this.contextWatchdog&&this.contextWatchdog.destroy(),this._initializeContextWatchdog(e.config)),e.isLayoutReady&&!this.contextWatchdog?(this._initializeContextWatchdog(e.config),!0):this.props.children!==e.children}},{key:"render",value:function(){return d.a.createElement(jn.Provider,{value:this.contextWatchdog},this.props.children)}},{key:"componentWillUnmount",value:function(){this._destroyContext()}},{key:"_initializeContextWatchdog",value:function(e){var t=this;this.contextWatchdog=new Dn(this.props.context),this.contextWatchdog.create(e).catch((function(e){t.props.onError(e,{phase:"initialization",willContextRestart:!1})})),this.contextWatchdog.on("error",(function(e,n){t.props.onError(n.error,{phase:"runtime",willContextRestart:n.causesRestart})})),this.contextWatchdog.on("stateChange",(function(){"ready"===t.contextWatchdog.state&&t.props.onReady&&t.props.onReady(t.contextWatchdog.context)}))}},{key:"_destroyContext",value:function(){this.contextWatchdog&&(this.contextWatchdog.destroy(),this.contextWatchdog=null)}}]),n}(d.a.Component);Bn.defaultProps={isLayoutReady:!0,onError:function(e,t){return console.error(e,t)}},Bn.propTypes={id:p.a.string,isLayoutReady:p.a.bool,context:p.a.func,config:p.a.object,onReady:p.a.func,onError:p.a.func};var Vn=function(e){c(n,e);var t=u(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).domContainer=d.a.createRef(),r.watchdog=null,r}return f(n,[{key:"editor",get:function(){return this.watchdog?this.watchdog.editor:null}},{key:"shouldComponentUpdate",value:function(e){return!!this.editor&&(e.id!==this.props.id?(this._destroyEditor(),!0):(this._shouldUpdateEditor(e)&&this.editor.setData(e.data),"disabled"in e&&(this.editor.isReadOnly=e.disabled),!1))}},{key:"componentDidMount",value:function(){this._initializeEditor()}},{key:"componentDidUpdate",value:function(){this._initializeEditor()}},{key:"componentWillUnmount",value:function(){this._destroyEditor()}},{key:"render",value:function(){return d.a.createElement("div",{ref:this.domContainer})}},{key:"_initializeEditor",value:function(){var e=this;this.context instanceof Dn?this.watchdog=new Ln(this.context):this.watchdog=new Mn(this.editor),this.watchdog.setCreator((function(t,n){return e._createEditor(t,n)})),this.watchdog.on("error",(function(t,n){var r=n.error,i=n.causesRestart;e.props.onError(r,{phase:"runtime",willEditorRestart:i})})),this.watchdog.create(this.domContainer.current,this._getConfig()).catch((function(t){return e.props.onError(t,{phase:"initialization",willEditorRestart:!1})}))}},{key:"_createEditor",value:function(e,t){var n=this;return this.props.editor.create(e,t).then((function(e){"disabled"in n.props&&(e.isReadOnly=n.props.disabled);var t=e.model.document,r=e.editing.view.document;return t.on("change:data",(function(t){n.props.onChange&&n.props.onChange(t,e)})),r.on("focus",(function(t){n.props.onFocus&&n.props.onFocus(t,e)})),r.on("blur",(function(t){n.props.onBlur&&n.props.onBlur(t,e)})),setTimeout((function(){n.props.onReady&&n.props.onReady(n.editor)})),e}))}},{key:"_destroyEditor",value:function(){this.watchdog.destroy(),this.watchdog=null}},{key:"_shouldUpdateEditor",value:function(e){return this.props.data!==e.data&&this.editor.getData()!==e.data}},{key:"_getConfig",value:function(){return this.props.data&&this.props.config.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),i(i({},this.props.config),{},{initialData:this.props.config.initialData||this.props.data||""})}}]),n}(d.a.Component),Ln=function(){function t(e){l(this,t),this._contextWatchdog=e,this._id=function(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+Fn[e>>0&255]+Fn[e>>8&255]+Fn[e>>16&255]+Fn[e>>24&255]+Fn[t>>0&255]+Fn[t>>8&255]+Fn[t>>16&255]+Fn[t>>24&255]+Fn[n>>0&255]+Fn[n>>8&255]+Fn[n>>16&255]+Fn[n>>24&255]+Fn[r>>0&255]+Fn[r>>8&255]+Fn[r>>16&255]+Fn[r>>24&255]}()}return f(t,[{key:"setCreator",value:function(e){this._creator=e}},{key:"create",value:function(e,t){return this._contextWatchdog.add({sourceElementOrData:e,config:t,creator:this._creator,id:this._id,type:"editor"})}},{key:"on",value:function(e,t){var n=this;this._contextWatchdog.on("itemError",(function(e,r){var i=r.itemId,o=r.causesRestart,a=r.error;i===n._id&&t(null,{error:a,causesRestart:o})}))}},{key:"destroy",value:function(){this._contextWatchdog.remove(this._id)}},{key:"editor",get:function(){try{return this._contextWatchdog.getItem(this._id)}catch(e){return null}}}]),t}();Vn.contextType=jn,Vn.propTypes={editor:p.a.func.isRequired,data:p.a.string,config:p.a.object,onChange:p.a.func,onReady:p.a.func,onFocus:p.a.func,onBlur:p.a.func,onError:p.a.func,disabled:p.a.bool,onInit:function(e,t){if(e[t])return new Error('The "onInit" property is not supported anymore by the CKEditor component. Use the "onReady" property instead.')}},Vn.defaultProps={config:{},onError:function(e,t){return console.error(e,t)}}}]))},131:function(e,t,n){var r=n(93);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},132:function(e,t,n){var r=n(82);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},133:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},134:function(e,t,n){var r,i=n(93),o=n(89),a=n(103),s=n(29),c=n(98),u=n(94),l=n(82),f=n(135),h=n(139),d=n(101),v=n(99),p=n(100),g=n(95),m=n(96),y=n(143);(r=window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})).en=Object.assign(r.en||{},{a:"Bold",b:"Italic",c:"Strikethrough",d:"Underline",e:"Align left",f:"Align right",g:"Align center",h:"Justify",i:"Text alignment",j:"Font Size",k:"Default",l:"Tiny",m:"Small",n:"Big",o:"Huge",p:"Font Family",q:"Choose heading",r:"Heading",s:"Numbered List",t:"Bulleted List",u:"Paragraph",v:"Heading 1",w:"Heading 2",x:"Heading 3",y:"Rich Text Editor",z:"Rich Text Editor, %0",aa:"Undo",ab:"Redo"}),window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=59)}([function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r="https://docs.ckeditor.com/ckeditor5/latest/framework/guides/support/error-codes.html",i=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),e=o(e),r&&(e+=" "+JSON.stringify(r)),(i=t.call(this,e)).name="CKEditorError",i.data=r,i}return p(n,null,[{key:"isCKEditorError",value:function(e){return e instanceof n}}]),n}(y(Error));function o(e){var t=e.match(/^([^:]+):/);return t?e+" Read more: ".concat(r,"#error-").concat(t[1],"\n"):e}},function(e,t,n){"use strict";var r=n(0),i={error:function(e,t){console.error(Object(r.a)(e),t)},warn:function(e,t){console.warn(Object(r.a)(e),t)}};t.a=i},function(e,n,r){"use strict";(function(e,i){var o=r(4),a={function:!0,object:!0},s=a[typeof t]&&t&&!t.nodeType?t:void 0,c=a[typeof e]&&e&&!e.nodeType?e:void 0,u=Object(o.a)(s&&c&&"object"==typeof i&&i),l=Object(o.a)(a[typeof self]&&self),f=Object(o.a)(a[typeof window]&&window),h=Object(o.a)(a[void 0]&&void 0),d=u||f!==(h&&h.window)&&f||l||h||Function("return this")();n.a=d}).call(this,r(7)(e),r(8))},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}((function(){return window&&document&&document.all&&!window.atob})),o=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,s=0,c=[],u=n(29);function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(g(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(g(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function d(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),p(t,e.attrs),h(e,t),t}function p(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function g(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=s++;n=a||(a=v(t)),r=y.bind(null,n,c,!1),i=y.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",p(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=u(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){d(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return l(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}for(e&&l(f(e,t),t),o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var m=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,n){"use strict";t.a=function(e){return e&&e.Object===Object?e:null}},function(e){e.exports={a:"11.0.1"}},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(58);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,n,r){"use strict";(function(e){var i=r(11),o=r(2),a={function:!0,object:!0},s=a[typeof t]&&t&&!t.nodeType?t:void 0,c=a[typeof e]&&e&&!e.nodeType?e:void 0,u=(c&&c.exports===s?s:void 0)?o.a.Buffer:void 0,l=u?function(e){return e instanceof u}:Object(i.a)(!1);n.a=l}).call(this,r(7)(e))},function(e,t,n){"use strict";t.a=function(e){return function(){return e}}},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z" fill="#000" fill-rule="nonzero"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z" fill="#000" fill-rule="nonzero"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z" fill="#000" fill-rule="evenodd"/></svg>\n'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z" fill="#333" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="#333" fill-rule="evenodd"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9L6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path fill-rule="nonzero" d="M3 10.5V9h14v1.5z"/></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="#333"><path fill-rule="nonzero" d="M3 18v-1.5h14V18z"/><path d="M5.2 10V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></g></g></svg>\n'},function(e,t){e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z" fill="#000" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="evenodd"><path d="M9.816 11.5L7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zM17.986 15.279l.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></g></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="evenodd"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zM10.816 11.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></g></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e,t,n){"use strict";(function(e){var t=n(1),r=n(5),i="object"==typeof window?window:e;i.CKEDITOR_VERSION?t.a.error("ckeditor-version-collision: The global CKEDITOR_VERSION constant has already been set.",{collidingVersion:i.CKEDITOR_VERSION,version:r.a}):i.CKEDITOR_VERSION=r.a}).call(this,n(8))},function(e,t,n){var r=n(28);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-focus-border:#47a4f5;--ck-color-focus-shadow:rgba(119,186,248,.5);--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-base-foreground);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#c2c2c2;--ck-color-upload-bar-background:#6cb5f9;--ck-color-upload-infinite-background:rgba(0,0,0,.1);--ck-color-link-default:#0000f0;--ck-color-link-selected-background:#ebf8ff;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit) * 1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit) * 0.8);--ck-spacing-small:calc(var(--ck-spacing-unit) * 0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit) * 0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit) * 0.16)}"},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){var r=n(31);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(e,t,n){var r=n(33);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(e,t,n){var r=n(35);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,n){var r=n(37);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row wrap;align-items:center}.ck.ck-toolbar.ck-toolbar_vertical{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating{flex-wrap:nowrap}.ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar__newline{display:block;width:100%}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>*{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar>:last-child{margin-right:0}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar__separator{align-self:stretch;width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck.ck-toolbar__newline{margin:0}"},function(e,t,n){var r=n(39);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}"},function(e,t,n){var r=n(41);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base) * var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon *{fill:currentColor}"},function(e,t,n){var r=n(43);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck-tooltip .ck-tooltip__text{display:inline-block}.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-color:transparent transparent var(--ck-color-tooltip-background);border-width:0 var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-color:var(--ck-color-tooltip-background) transparent transparent;border-width:var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size) 0}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{border-style:solid;left:50%}.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s}'},function(e,t,n){var r=n(45);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button .ck-button__label,.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button .ck-button__label,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;border-color:transparent}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}.ck.ck-button.ck-button_with-text .ck-button__icon,a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1 * var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(e,t,n){var r=n(47);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute;left:0;transform:translate3d(0,100%,0)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block;will-change:transform}:root{--ck-dropdown-arrow-size:calc(0.5 * var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);width:var(--ck-dropdown-arrow-size);margin-left:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown__panel{border-radius:0;box-shadow:var(--ck-drop-shadow),0 0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}"},function(e,t,n){var r=n(49);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;border:0;padding:calc(.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:hover:not(ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(e,t,n){var r=n(51);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px}.ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto;transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:transform .3s ease}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(1.3846153847em)}"},function(e,t,n){var r=n(53);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-toolbar-dropdown .ck-toolbar{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(e,t,n){var r=n(55);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,n){var r=n(57);"string"==typeof r&&(r=[[e.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,i),r.locals&&(e.exports=r.locals)},function(e,t){e.exports=".text-tiny{font-size:.7em}.text-small{font-size:.85em}.text-big{font-size:1.4em}.text-huge{font-size:1.8em}"},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(e,t,n){"use strict";var r=s.mark(Es),y=s.mark(Rs);n.r(t);var k=Object.getPrototypeOf,b=function(e){return k(Object(e))},w=function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t},_=function(e){return!!e&&"object"==typeof e},x="[object Object]",A=Object.prototype,C=Function.prototype.toString,T=A.hasOwnProperty,O=C.call(Object),S=A.toString,P=function(e){if(!_(e)||S.call(e)!=x||w(e))return!1;var t=b(e);if(null===t)return!0;var n=T.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&C.call(n)==O},E=function(){function e(t,n){v(this,e),this._config={},n&&this.define(n),t&&this._setObjectToTarget(this._config,t)}return p(e,[{key:"set",value:function(e,t){this._setToTarget(this._config,e,t)}},{key:"define",value:function(e,t){this._setToTarget(this._config,e,t,!0)}},{key:"get",value:function(e){return this._getFromSource(this._config,e)}},{key:"_setToTarget",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(P(t))this._setObjectToTarget(e,t,r);else{var i=t.split(".");t=i.pop();var o,a=d(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;P(e[s])||(e[s]={}),e=e[s]}}catch(c){a.e(c)}finally{a.f()}if(P(n))return P(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,n,r);r&&void 0!==e[t]||(e[t]=n)}}},{key:"_getFromSource",value:function(e,t){var n=t.split(".");t=n.pop();var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!P(e[o])){e=null;break}e=e[o]}}catch(a){i.e(a)}finally{i.f()}return e?e[t]:void 0}},{key:"_setObjectToTarget",value:function(e,t,n){var r=this;Object.keys(t).forEach((function(i){r._setToTarget(e,i,t[i],n)}))}}]),e}(),R=n(0),I=function(){return function e(){e.called=!0}},M=function e(t,n){v(this,e),this.source=t,this.name=n,this.path=[],this.stop=I(),this.off=I()};function F(){for(var e="e",t=0;t<8;t++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e}var D={get:function(e){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},N=Symbol("listeningTo"),j=Symbol("emitterId"),B={on:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.listenTo(this,e,t,n)},once:function(e,t,n){this.listenTo(this,e,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.off(),t.call.apply(t,[this,e].concat(r))}),n)},off:function(e,t){this.stopListening(this,e,t)},listenTo:function(e,t,n){var r,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this[N]||(this[N]={});var a=this[N];L(e)||V(e);var s=L(e);(r=a[s])||(r=a[s]={emitter:e,callbacks:{}}),(i=r.callbacks[t])||(i=r.callbacks[t]=[]),i.push(n),function(e,t){var n=z(e);if(!n[t]){for(var r=t,i=null,o=[];""!==r&&!n[r];)n[r]={callbacks:[],childEvents:[]},o.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(""!==r){var a,s=d(o);try{for(s.s();!(a=s.n()).done;)a.value.callbacks=n[r].callbacks.slice()}catch(c){s.e(c)}finally{s.f()}n[r].childEvents.push(i)}}}(e,t);var c,u=W(e,t),l=D.get(o.priority),f={callback:n,priority:l},h=d(u);try{for(h.s();!(c=h.n()).done;){for(var v=c.value,p=!1,g=0;g<v.length;g++)if(v[g].priority<l){v.splice(g,0,f),p=!0;break}p||v.push(f)}}catch(m){h.e(m)}finally{h.f()}},stopListening:function(e,t,n){var r=this[N],i=e&&L(e),o=r&&i&&r[i],a=o&&t&&o.callbacks[t];if(!(!r||e&&!o||t&&!a))if(n)U(e,t,n);else if(a){for(;n=a.pop();)U(e,t,n);delete o.callbacks[t]}else if(o){for(t in o.callbacks)this.stopListening(e,t);delete r[i]}else{for(i in r)this.stopListening(r[i].emitter);delete this[N]}},fire:function(e){for(var t=e instanceof M?e:new M(this,e),n=t.name,r=function e(t,n){var r;return t._events&&(r=t._events[n])&&r.callbacks.length?r.callbacks:n.indexOf(":")>-1?e(t,n.substr(0,n.lastIndexOf(":"))):null}(this,n),i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(t.path.push(this),r){var s=[t].concat(o);r=Array.from(r);for(var c=0;c<r.length&&(r[c].callback.apply(this,s),t.off.called&&(delete t.off.called,U(this,n,r[c].callback)),!t.stop.called);c++);}if(this._delegations){var u=this._delegations.get(n),l=this._delegations.get("*");u&&q(u,t,o),l&&q(l,t,o)}return t.return},delegate:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{to:function(t,r){e._delegations||(e._delegations=new Map);var i,o=d(n);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=e._delegations.get(a);s?s.set(t,r):e._delegations.set(a,new Map([[t,r]]))}}catch(c){o.e(c)}finally{o.f()}}}},stopDelegating:function(e,t){if(this._delegations)if(e)if(t){var n=this._delegations.get(e);n&&n.delete(t)}else this._delegations.delete(e);else this._delegations.clear()}};function V(e,t){e[j]||(e[j]=t||F())}function L(e){return e[j]}function z(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function W(e,t){var n=z(e)[t];if(!n)return[];for(var r=[n.callbacks],i=0;i<n.childEvents.length;i++){var o=W(e,n.childEvents[i]);r=r.concat(o)}return r}function q(e,t,n){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var o=h(r.value,2),a=o[0],s=o[1];s?"function"==typeof s&&(s=s(t.name)):s=t.name;var c=new M(t.source,s);c.path=f(t.path),a.fire.apply(a,[c].concat(f(n)))}}catch(u){i.e(u)}finally{i.f()}}function U(e,t,n){var r,i=W(e,t),o=d(i);try{for(o.s();!(r=o.n()).done;)for(var a=r.value,s=0;s<a.length;s++)a[s].callback==n&&(a.splice(s,1),s--)}catch(c){o.e(c)}finally{o.f()}}function H(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((function(n){if(!(n in e.prototype)){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e.prototype,n,r)}}))}))}var $=function(){this.__data__=[]},K=function(e,t){return e===t||e!=e&&t!=t},G=function(e,t){for(var n=e.length;n--;)if(K(e[n][0],t))return n;return-1},J=Array.prototype.splice,Y=function(e){var t=this.__data__,n=G(t,e);return!(n<0||(n==t.length-1?t.pop():J.call(t,n,1),0))},Q=function(e){var t=this.__data__,n=G(t,e);return n<0?void 0:t[n][1]},X=function(e){return G(this.__data__,e)>-1},Z=function(e,t){var n=this.__data__,r=G(n,e);return r<0?n.push([e,t]):n[r][1]=t,this};function ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ee.prototype.clear=$,ee.prototype.delete=Y,ee.prototype.get=Q,ee.prototype.has=X,ee.prototype.set=Z;var te=ee,ne=function(){this.__data__=new te},re=function(e){return this.__data__.delete(e)},ie=function(e){return this.__data__.get(e)},oe=function(e){return this.__data__.has(e)},ae=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},se="[object Function]",ce="[object GeneratorFunction]",ue=Object.prototype.toString,le=function(e){var t=ae(e)?ue.call(e):"";return t==se||t==ce},fe=Function.prototype.toString,he=function(e){if(null!=e){try{return fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},de=/^\[object .+?Constructor\]$/,ve=Object.prototype,pe=Function.prototype.toString,ge=ve.hasOwnProperty,me=RegExp("^"+pe.call(ge).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=function(e){return!!ae(e)&&(le(e)||w(e)?me:de).test(he(e))},ke=function(e,t){var n=e[t];return ye(n)?n:void 0},be=ke(Object,"create"),we=function(){this.__data__=be?be(null):{}},_e=function(e){return this.has(e)&&delete this.__data__[e]},xe="__lodash_hash_undefined__",Ae=Object.prototype.hasOwnProperty,Ce=function(e){var t=this.__data__;if(be){var n=t[e];return n===xe?void 0:n}return Ae.call(t,e)?t[e]:void 0},Te=Object.prototype.hasOwnProperty,Oe=function(e){var t=this.__data__;return be?void 0!==t[e]:Te.call(t,e)},Se="__lodash_hash_undefined__",Pe=function(e,t){return this.__data__[e]=be&&void 0===t?Se:t,this};function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ee.prototype.clear=we,Ee.prototype.delete=_e,Ee.prototype.get=Ce,Ee.prototype.has=Oe,Ee.prototype.set=Pe;var Re=Ee,Ie=n(2),Me=ke(Ie.a,"Map"),Fe=function(){this.__data__={hash:new Re,map:new(Me||te),string:new Re}},De=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},Ne=function(e,t){var n=e.__data__;return De(t)?n["string"==typeof t?"string":"hash"]:n.map},je=function(e){return Ne(this,e).delete(e)},Be=function(e){return Ne(this,e).get(e)},Ve=function(e){return Ne(this,e).has(e)},Le=function(e,t){return Ne(this,e).set(e,t),this};function ze(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ze.prototype.clear=Fe,ze.prototype.delete=je,ze.prototype.get=Be,ze.prototype.has=Ve,ze.prototype.set=Le;var We=ze,qe=200,Ue=function(e,t){var n=this.__data__;return n instanceof te&&n.__data__.length==qe&&(n=this.__data__=new We(n.__data__)),n.set(e,t),this};function He(e){this.__data__=new te(e)}He.prototype.clear=ne,He.prototype.delete=re,He.prototype.get=ie,He.prototype.has=oe,He.prototype.set=Ue;var $e=He,Ke=function(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e},Ge=Object.prototype.hasOwnProperty,Je=function(e,t,n){var r=e[t];Ge.call(e,t)&&K(r,n)&&(void 0!==n||t in e)||(e[t]=n)},Ye=function(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):e[a];Je(n,a,s)}return n},Qe=Object.prototype.hasOwnProperty,Xe=function(e,t){return Qe.call(e,t)||"object"==typeof e&&t in e&&null===b(e)},Ze=Object.keys,et=function(e){return Ze(Object(e))},tt=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},nt=function(e){return function(t){return null==t?void 0:t[e]}},rt=nt("length"),it=9007199254740991,ot=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=it},at=function(e){return null!=e&&ot(rt(e))&&!le(e)},st=function(e){return _(e)&&at(e)},ct="[object Arguments]",ut=Object.prototype,lt=ut.hasOwnProperty,ft=ut.toString,ht=ut.propertyIsEnumerable,dt=function(e){return st(e)&&lt.call(e,"callee")&&(!ht.call(e,"callee")||ft.call(e)==ct)},vt=Array.isArray,pt="[object String]",gt=Object.prototype.toString,mt=function(e){return"string"==typeof e||!vt(e)&&_(e)&&gt.call(e)==pt},yt=function(e){var t=e?e.length:void 0;return ot(t)&&(vt(e)||mt(e)||dt(e))?tt(t,String):null},kt=9007199254740991,bt=/^(?:0|[1-9]\d*)$/,wt=function(e,t){return!!(t=null==t?kt:t)&&("number"==typeof e||bt.test(e))&&e>-1&&e%1==0&&e<t},_t=Object.prototype,xt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_t)},At=function(e){var t=xt(e);if(!t&&!at(e))return et(e);var n=yt(e),r=!!n,i=n||[],o=i.length;for(var a in e)!Xe(e,a)||r&&("length"==a||wt(a,o))||t&&"constructor"==a||i.push(a);return i},Ct=function(e,t){return e&&Ye(t,At(t),e)},Tt=function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n},Ot=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},St=Object.getOwnPropertySymbols;function Pt(e){return St(Object(e))}St||(Pt=function(){return[]});var Et=Pt,Rt=function(e,t){return Ye(e,Et(e),t)},It=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Mt=function(e,t,n){var r=t(e);return vt(e)?r:It(r,n(e))},Ft=function(e){return Mt(e,At,Et)},Dt=ke(Ie.a,"DataView"),Nt=ke(Ie.a,"Promise"),jt=ke(Ie.a,"Set"),Bt=ke(Ie.a,"WeakMap"),Vt=Object.prototype.toString,Lt=he(Dt),zt=he(Me),Wt=he(Nt),qt=he(jt),Ut=he(Bt);function Ht(e){return Vt.call(e)}(Dt&&"[object DataView]"!=Ht(new Dt(new ArrayBuffer(1)))||Me&&"[object Map]"!=Ht(new Me)||Nt&&"[object Promise]"!=Ht(Nt.resolve())||jt&&"[object Set]"!=Ht(new jt)||Bt&&"[object WeakMap]"!=Ht(new Bt))&&(Ht=function(e){var t=Vt.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?he(n):void 0;if(r)switch(r){case Lt:return"[object DataView]";case zt:return"[object Map]";case Wt:return"[object Promise]";case qt:return"[object Set]";case Ut:return"[object WeakMap]"}return t});var $t=Ht,Kt=Object.prototype.hasOwnProperty,Gt=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Kt.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Jt=Ie.a.Uint8Array,Yt=function(e){var t=new e.constructor(e.byteLength);return new Jt(t).set(new Jt(e)),t},Qt=function(e,t){var n=t?Yt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Xt=function(e,t){return e.set(t[0],t[1]),e},Zt=function(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n},en=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},tn=function(e,t,n){var r=t?n(en(e),!0):en(e);return Zt(r,Xt,new e.constructor)},nn=/\w*$/,rn=function(e){var t=new e.constructor(e.source,nn.exec(e));return t.lastIndex=e.lastIndex,t},on=function(e,t){return e.add(t),e},an=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},sn=function(e,t,n){var r=t?n(an(e),!0):an(e);return Zt(r,on,new e.constructor)},cn=Ie.a.Symbol,un=cn?cn.prototype:void 0,ln=un?un.valueOf:void 0,fn=function(e){return ln?Object(ln.call(e)):{}},hn=function(e,t){var n=t?Yt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},dn="[object Boolean]",vn="[object Date]",pn="[object Map]",gn="[object Number]",mn="[object RegExp]",yn="[object Set]",kn="[object String]",bn="[object Symbol]",wn="[object ArrayBuffer]",_n="[object DataView]",xn="[object Float32Array]",An="[object Float64Array]",Cn="[object Int8Array]",Tn="[object Int16Array]",On="[object Int32Array]",Sn="[object Uint8Array]",Pn="[object Uint8ClampedArray]",En="[object Uint16Array]",Rn="[object Uint32Array]",In=function(e,t,n,r){var i=e.constructor;switch(t){case wn:return Yt(e);case dn:case vn:return new i(+e);case _n:return Qt(e,r);case xn:case An:case Cn:case Tn:case On:case Sn:case Pn:case En:case Rn:return hn(e,r);case pn:return tn(e,r,n);case gn:case kn:return new i(e);case mn:return rn(e);case yn:return sn(e,r,n);case bn:return fn(e)}},Mn=Object.create,Fn=function(e){return ae(e)?Mn(e):{}},Dn=function(e){return"function"!=typeof e.constructor||xt(e)?{}:Fn(b(e))},Nn=n(10),jn="[object Arguments]",Bn="[object Function]",Vn="[object GeneratorFunction]",Ln="[object Object]",zn={};zn[jn]=zn["[object Array]"]=zn["[object ArrayBuffer]"]=zn["[object DataView]"]=zn["[object Boolean]"]=zn["[object Date]"]=zn["[object Float32Array]"]=zn["[object Float64Array]"]=zn["[object Int8Array]"]=zn["[object Int16Array]"]=zn["[object Int32Array]"]=zn["[object Map]"]=zn["[object Number]"]=zn[Ln]=zn["[object RegExp]"]=zn["[object Set]"]=zn["[object String]"]=zn["[object Symbol]"]=zn["[object Uint8Array]"]=zn["[object Uint8ClampedArray]"]=zn["[object Uint16Array]"]=zn["[object Uint32Array]"]=!0,zn["[object Error]"]=zn[Bn]=zn["[object WeakMap]"]=!1;var Wn=function e(t,n,r,i,o,a,s){var c;if(i&&(c=a?i(t,o,a,s):i(t)),void 0!==c)return c;if(!ae(t))return t;var u=vt(t);if(u){if(c=Gt(t),!n)return Ot(t,c)}else{var l=$t(t),f=l==Bn||l==Vn;if(Object(Nn.a)(t))return Tt(t,n);if(l==Ln||l==jn||f&&!a){if(w(t))return a?t:{};if(c=Dn(f?{}:t),!n)return Rt(t,Ct(c,t))}else{if(!zn[l])return a?t:{};c=In(t,l,e,n)}}s||(s=new $e);var h=s.get(t);if(h)return h;if(s.set(t,c),!u)var d=r?Ft(t):At(t);return Ke(d||t,(function(o,a){d&&(o=t[a=o]),Je(c,a,e(o,n,r,i,a,t,s))})),c},qn=function(e){return Wn(e,!1,!0)};function Un(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e[r]!=t[r])return r;return e.length==t.length?"same":e.length<t.length?"prefix":"extension"}var Hn=function(){function e(){v(this,e),this.parent=null}return p(e,[{key:"index",get:function(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new R.b("view-node-not-found-in-parent: The node's parent does not contain this node.");return e}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"document",get:function(){return this.parent instanceof e?this.parent.document:null}},{key:"getPath",value:function(){for(var e=[],t=this;t.parent;)e.unshift(t.index),t=t.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"getCommonAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(t),r=e.getAncestors(t),i=0;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}},{key:"isBefore",value:function(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),n=e.getPath(),r=Un(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_fireChange",value:function(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}},{key:"toJSON",value:function(){var e=qn(this);return delete e.parent,e}},{key:"is",value:function(e){return"node"==e}}]),e}();H(Hn,B);var $n=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._textData=e,r}return p(n,[{key:"is",value:function(e){return"text"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"data",get:function(){return this._textData}},{key:"_data",get:function(){return this.data},set:function(e){this._fireChange("text",this),this._textData=e}},{key:"isSimilar",value:function(e){return e instanceof n&&(this===e||this.data===e.data)}},{key:"_clone",value:function(){return new n(this.data)}}]),n}(Hn),Kn=function(){function e(t,n,r){if(v(this,e),this.textNode=t,n<0||n>t.data.length)throw new R.b("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.");if(r<0||n+r>t.data.length)throw new R.b("view-textproxy-wrong-length: Given length value is incorrect.");this.data=t.data.substring(n,n+r),this.offsetInText=n}return p(e,[{key:"offsetSize",get:function(){return this.data.length}},{key:"isPartial",get:function(){return this.data.length!==this.textNode.data.length}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}},{key:"is",value:function(e){return"textProxy"==e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this.textNode:this.parent;null!==n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}}]),e}();function Gn(e){var t=new Map;for(var n in e)t.set(n,e[n]);return t}function Jn(e){return!(!e||!e[Symbol.iterator])}var Yn=function(){function e(){v(this,e),this._patterns=[],this.add.apply(this,arguments)}return p(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];("string"==typeof o||o instanceof RegExp)&&(o={name:o}),o.classes&&("string"==typeof o.classes||o.classes instanceof RegExp)&&(o.classes=[o.classes]),this._patterns.push(o)}}},{key:"match",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o,a=i[r],s=d(this._patterns);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=Qn(a,c);if(u)return{element:a,pattern:c,match:u}}}catch(l){s.e(l)}finally{s.f()}}return null}},{key:"matchAll",value:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a,s=o[i],c=d(this._patterns);try{for(c.s();!(a=c.n()).done;){var u=a.value,l=Qn(s,u);l&&e.push({element:s,pattern:u,match:l})}}catch(f){c.e(f)}finally{c.f()}}return e.length>0?e:null}},{key:"getElementName",value:function(){if(1!==this._patterns.length)return null;var e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t}}]),e}();function Qn(e,t){if("function"==typeof t)return t(e);var n={};return t.name&&(n.name=function(e,t){return e instanceof RegExp?e.test(t):e===t}(t.name,e.name),!n.name)||t.attributes&&(n.attributes=function(e,t){var n=[];for(var r in e){var i=e[r];if(!t.hasAttribute(r))return null;var o=t.getAttribute(r);if(!0===i)n.push(r);else if(i instanceof RegExp){if(!i.test(o))return null;n.push(r)}else{if(o!==i)return null;n.push(r)}}return n}(t.attributes,e),!n.attributes)?null:!(t.classes&&(n.classes=function(e,t){var n,r=[],i=d(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o instanceof RegExp){var a,s=t.getClassNames(),c=d(s);try{for(c.s();!(a=c.n()).done;){var u=a.value;o.test(u)&&r.push(u)}}catch(l){c.e(l)}finally{c.f()}if(0===r.length)return null}else{if(!t.hasClass(o))return null;r.push(o)}}}catch(l){i.e(l)}finally{i.f()}return r}(t.classes,e),!n.classes))&&!(t.styles&&(n.styles=function(e,t){var n=[];for(var r in e){var i=e[r];if(!t.hasStyle(r))return null;var o=t.getStyle(r);if(i instanceof RegExp){if(!i.test(o))return null;n.push(r)}else{if(o!==i)return null;n.push(r)}}return n}(t.styles,e),!n.styles))&&n}var Xn=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;if(v(this,n),(o=t.call(this)).name=e,o._attrs=function(e){e=P(e)?Gn(e):new Map(e);var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],o=r[1];null===o?e.delete(i):"string"!=typeof o&&e.set(i,String(o))}}catch(a){n.e(a)}finally{n.f()}return e}(r),o._children=[],i&&o._insertChild(0,i),o._classes=new Set,o._attrs.has("class")){var a=o._attrs.get("class");er(o._classes,a),o._attrs.delete("class")}return o._styles=new Map,o._attrs.has("style")&&(Zn(o._styles,o._attrs.get("style")),o._attrs.delete("style")),o._customProperties=new Map,c(o)}return p(n,[{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this._children.length}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"element"==e&&t==this.name:"element"==e||e==this.name||u(l(n.prototype),"is",this).call(this,e)}},{key:"getChild",value:function(e){return this._children[e]}},{key:"getChildIndex",value:function(e){return this._children.indexOf(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getAttributeKeys",value:s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._classes.size>0,!e.t0){e.next=4;break}return e.next=4,"class";case 4:if(e.t1=this._styles.size>0,!e.t1){e.next=8;break}return e.next=8,"style";case 8:t=d(this._attrs.keys()),e.prev=9,t.s();case 11:if((n=t.n()).done){e.next=17;break}return r=n.value,e.next=15,r;case 15:e.next=11;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(9),t.e(e.t2);case 22:return e.prev=22,t.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[9,19,22,25]])}))},{key:"getAttributes",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._attrs.entries(),"t0",1);case 1:if(e.t1=this._classes.size>0,!e.t1){e.next=5;break}return e.next=5,["class",this.getAttribute("class")];case 5:if(e.t2=this._styles.size>0,!e.t2){e.next=9;break}return e.next=9,["style",this.getAttribute("style")];case 9:case"end":return e.stop()}}),e,this)}))},{key:"getAttribute",value:function(e){if("class"==e)return this._classes.size>0?f(this._classes).join(" "):void 0;if("style"!=e)return this._attrs.get(e);if(this._styles.size>0){var t,n="",r=d(this._styles);try{for(r.s();!(t=r.n()).done;){var i=h(t.value,2),o=i[0],a=i[1];n+="".concat(o,":").concat(a,";")}}catch(s){r.e(s)}finally{r.f()}return n}}},{key:"hasAttribute",value:function(e){return"class"==e?this._classes.size>0:"style"==e?this._styles.size>0:this._attrs.has(e)}},{key:"isSimilar",value:function(e){if(!(e instanceof n))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;var t,r=d(this._attrs);try{for(r.s();!(t=r.n()).done;){var i=h(t.value,2),o=i[0],a=i[1];if(!e._attrs.has(o)||e._attrs.get(o)!==a)return!1}}catch(m){r.e(m)}finally{r.f()}var s,c=d(this._classes);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(!e._classes.has(u))return!1}}catch(m){c.e(m)}finally{c.f()}var l,f=d(this._styles);try{for(f.s();!(l=f.n()).done;){var v=h(l.value,2),p=v[0],g=v[1];if(!e._styles.has(p)||e._styles.get(p)!==g)return!1}}catch(m){f.e(m)}finally{f.f()}return!0}},{key:"hasClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!this._classes.has(o))return!1}return!0}},{key:"getClassNames",value:function(){return this._classes.keys()}},{key:"getStyle",value:function(e){return this._styles.get(e)}},{key:"getStyleNames",value:function(){return this._styles.keys()}},{key:"hasStyle",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(!this._styles.has(o))return!1}return!0}},{key:"findAncestor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=a(Yn,t),i=this.parent;i;){if(r.match(i))return i;i=i.parent}return null}},{key:"getCustomProperty",value:function(e){return this._customProperties.get(e)}},{key:"getCustomProperties",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"getIdentity",value:function(){var e=Array.from(this._classes).sort().join(","),t=Array.from(this._styles).map((function(e){return"".concat(e[0],":").concat(e[1])})).sort().join(";"),n=Array.from(this._attrs).map((function(e){return"".concat(e[0],'="').concat(e[1],'"')})).sort().join(" ");return this.name+(""==e?"":' class="'.concat(e,'"'))+(""==t?"":' style="'.concat(t,'"'))+(""==n?"":" ".concat(n))}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(e){var n,r=d(this.getChildren());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(i._clone(e))}}catch(a){r.e(a)}finally{r.f()}}var o=new this.constructor(this.name,this._attrs,t);return o._classes=new Set(this._classes),o._styles=new Map(this._styles),o._customProperties=new Map(this._customProperties),o.getFillerOffset=this.getFillerOffset,o}},{key:"_appendChild",value:function(e){return this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){this._fireChange("children",this);var n,r=0,i=function(e){return"string"==typeof e?[new $n(e)]:(Jn(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new $n(e):e instanceof Kn?new $n(e.data):e})))}(t),o=d(i);try{for(o.s();!(n=o.n()).done;){var a=n.value;null!==a.parent&&a._remove(),a.parent=this,this._children.splice(e,0,a),e++,r++}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"_removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}},{key:"_setAttribute",value:function(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?er(this._classes,t):"style"==e?Zn(this._styles,t):this._attrs.set(e,t)}},{key:"_removeAttribute",value:function(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?this._styles.size>0&&(this._styles.clear(),!0):this._attrs.delete(e)}},{key:"_addClass",value:function(e){var t=this;this._fireChange("attributes",this),(e=Array.isArray(e)?e:[e]).forEach((function(e){return t._classes.add(e)}))}},{key:"_removeClass",value:function(e){var t=this;this._fireChange("attributes",this),(e=Array.isArray(e)?e:[e]).forEach((function(e){return t._classes.delete(e)}))}},{key:"_setStyle",value:function(e,t){if(this._fireChange("attributes",this),P(e))for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];this._styles.set(i,e[i])}else this._styles.set(e,t)}},{key:"_removeStyle",value:function(e){var t=this;this._fireChange("attributes",this),(e=Array.isArray(e)?e:[e]).forEach((function(e){return t._styles.delete(e)}))}},{key:"_setCustomProperty",value:function(e,t){this._customProperties.set(e,t)}},{key:"_removeCustomProperty",value:function(e){return this._customProperties.delete(e)}}]),n}(Hn);function Zn(e,t){var n=null,r=0,i=0,o=null;if(e.clear(),""!==t){";"!=t.charAt(t.length-1)&&(t+=";");for(var a=0;a<t.length;a++){var s=t.charAt(a);if(null===n)switch(s){case":":o||(o=t.substr(r,a-r),i=a+1);break;case'"':case"'":n=s;break;case";":var c=t.substr(i,a-i);o&&e.set(o.trim(),c.trim()),o=null,r=a+1}else s===n&&(n=null)}}}function er(e,t){var n=t.split(/\s+/);e.clear(),n.forEach((function(t){return e.add(t)}))}var tr=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,e,r,i)).getFillerOffset=nr,o}return p(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"containerElement"==e&&t==this.name||u(l(n.prototype),"is",this).call(this,e,t):"containerElement"==e||u(l(n.prototype),"is",this).call(this,e)}}]),n}(Xn);function nr(){var e=f(this.getChildren()),t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;var n,r=d(e);try{for(r.s();!(n=r.n()).done;)if(!n.value.is("uiElement"))return null}catch(i){r.e(i)}finally{r.f()}return this.childCount}var rr=function(e,t,n){if(!ae(n))return!1;var r=typeof t;return!!("number"==r?at(n)&&wt(t,n.length):"string"==r&&t in n)&&K(n[t],e)},ir=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},or="[object Symbol]",ar=Object.prototype.toString,sr=function(e){return"symbol"==typeof e||_(e)&&ar.call(e)==or},cr=NaN,ur=/^\s+|\s+$/g,lr=/^[-+]0x[0-9a-f]+$/i,fr=/^0b[01]+$/i,hr=/^0o[0-7]+$/i,dr=parseInt,vr=function(e){if("number"==typeof e)return e;if(sr(e))return cr;if(ae(e)){var t=le(e.valueOf)?e.valueOf():e;e=ae(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ur,"");var n=fr.test(e);return n||hr.test(e)?dr(e.slice(2),n?2:8):lr.test(e)?cr:+e},pr=1/0,gr=17976931348623157e292,mr=function(e){return e?(e=vr(e))===pr||e===-pr?(e<0?-1:1)*gr:e==e?e:0:0===e?e:0},yr=function(e){var t=mr(e),n=t%1;return t==t?n?t-n:t:0},kr="Expected a function",br=Math.max,wr=function(e,t){if("function"!=typeof e)throw new TypeError(kr);return t=br(void 0===t?e.length-1:yr(t),0),function(){for(var n=arguments,r=-1,i=br(n.length-t,0),o=Array(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Array(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,ir(e,this,a)}},_r=function(e){return wr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&rr(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))},xr=Ie.a.Reflect,Ar=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},Cr=Object.prototype,Tr=xr?xr.enumerate:void 0,Or=Cr.propertyIsEnumerable;function Sr(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}Tr&&!Or.call({valueOf:1},"valueOf")&&(Sr=function(e){return Ar(Tr(e))});var Pr=Sr,Er=Object.prototype.hasOwnProperty,Rr=function(e){for(var t=-1,n=xt(e),r=Pr(e),i=r.length,o=yt(e),a=!!o,s=o||[],c=s.length;++t<i;){var u=r[t];a&&("length"==u||wt(u,c))||"constructor"==u&&(n||!Er.call(e,u))||s.push(u)}return s},Ir=!Object.prototype.propertyIsEnumerable.call({valueOf:1},"valueOf"),Mr=_r((function(e,t){if(Ir||xt(t)||at(t))Ye(t,Rr(t),e);else for(var n in t)Je(e,n,t[n])})),Fr=Symbol("observableProperties"),Dr=Symbol("boundObservables"),Nr=Symbol("boundProperties"),jr={set:function(e,t){var n=this;if(ae(e))Object.keys(e).forEach((function(t){n.set(t,e[t])}),this);else{Vr(this);var r=this[Fr];if(e in this&&!r.has(e))throw new R.b("observable-set-cannot-override: Cannot override an existing property.");Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:function(){return r.get(e)},set:function(t){var n=r.get(e),i=this.fire("set:"+e,e,t,n);void 0===i&&(i=t),n===i&&r.has(e)||(r.set(e,i),this.fire("change:"+e,e,i,n))}}),this[e]=t}},bind:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length||!Wr(t))throw new R.b("observable-bind-wrong-properties: All properties must be strings.");if(new Set(t).size!==t.length)throw new R.b("observable-bind-duplicate-properties: Properties must be unique.");Vr(this);var r=this[Nr];t.forEach((function(e){if(r.has(e))throw new R.b("observable-bind-rebind: Cannot bind the same property more that once.")}));var i=new Map;return t.forEach((function(e){var t={property:e,to:[]};r.set(e,t),i.set(e,t)})),{to:Lr,toMany:zr,_observable:this,_bindProperties:t,_to:[],_bindings:i}},unbind:function(){var e=this;if(Fr in this){for(var t=this[Nr],n=this[Dr],r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(i.length){if(!Wr(i))throw new R.b("observable-unbind-wrong-properties: Properties must be strings.");i.forEach((function(r){var i,o,a,s,c=t.get(r);c&&(c.to.forEach((function(t){i=t[0],o=t[1],a=n.get(i),(s=a[o]).delete(c),s.size||delete a[o],Object.keys(a).length||(n.delete(i),e.stopListening(i,"change"))})),t.delete(r))}))}else n.forEach((function(t,n){e.stopListening(n,"change")})),n.clear(),t.clear()}},decorate:function(e){var t=this,n=this[e];if(!n)throw new R.b("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",{object:this,methodName:e});this.on(e,(function(e,r){e.return=n.apply(t,r)})),this[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.fire(e,n)}}};Mr(jr,B);var Br=jr;function Vr(e){Fr in e||(Object.defineProperty(e,Fr,{value:new Map}),Object.defineProperty(e,Dr,{value:new Map}),Object.defineProperty(e,Nr,{value:new Map}))}function Lr(){var e=this,t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)throw new R.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.");var r,i={to:[]};return"function"==typeof t[t.length-1]&&(i.callback=t.pop()),t.forEach((function(e){if("string"==typeof e)r.properties.push(e);else{if("object"!=typeof e)throw new R.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.");r={observable:e,properties:[]},i.to.push(r)}})),i}.apply(void 0,arguments),n=Array.from(this._bindings.keys()),r=n.length;if(!t.callback&&t.to.length>1)throw new R.b("observable-bind-to-no-callback: Binding multiple observables only possible with callback.");if(r>1&&t.callback)throw new R.b("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.");t.to.forEach((function(t){if(t.properties.length&&t.properties.length!==r)throw new R.b("observable-bind-to-properties-length: The number of properties must match.");t.properties.length||(t.properties=e._bindProperties)})),this._to=t.to,t.callback&&(this._bindings.get(n[0]).callback=t.callback),function(e,t){t.forEach((function(t){var n,r=e[Dr];r.get(t.observable)||e.listenTo(t.observable,"change",(function(i,o){(n=r.get(t.observable)[o])&&n.forEach((function(t){qr(e,t.property)}))}))}))}(this._observable,this._to),function(e){var t;e._bindings.forEach((function(n,r){e._to.forEach((function(i){t=i.properties[n.callback?0:e._bindProperties.indexOf(r)],n.to.push([i.observable,t]),function(e,t,n,r){var i=e[Dr],o=i.get(n),a=o||{};a[r]||(a[r]=new Set),a[r].add(t),o||i.set(n,a)}(e._observable,n,i.observable,t)}))}))}(this),this._bindProperties.forEach((function(t){qr(e._observable,t)}))}function zr(e,t,n){if(this._bindings.size>1)throw new R.b("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().");this.to.apply(this,f(function(e,t){var n=e.map((function(e){return[e,t]}));return Array.prototype.concat.apply([],n)}(e,t)).concat([n]))}function Wr(e){return e.every((function(e){return"string"==typeof e}))}function qr(e,t){var n,r=e[Nr].get(t);n=r.callback?r.callback.apply(e,r.to.map((function(e){return e[0][e[1]]}))):(n=r.to[0])[0][n[1]],e.hasOwnProperty(t)?e[t]=n:e.set(t,n)}var Ur=Symbol("document"),Hr=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,e,r,i)).set("isReadOnly",!1),o.set("isFocused",!1),o}return p(n,[{key:"document",get:function(){return this.getCustomProperty(Ur)}},{key:"_document",set:function(e){var t=this;if(this.getCustomProperty(Ur))throw new R.b("view-editableelement-document-already-set: View document is already set.");this._setCustomProperty(Ur,e),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",(function(n){return n&&e.selection.editableElement==t})),this.listenTo(e.selection,"change",(function(){t.isFocused=e.isFocused&&e.selection.editableElement==t}))}}]),n}(tr);H(Hr,Br);var $r=Symbol("rootName"),Kr=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).rootName="main",r}return p(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"rootElement"==e&&t==this.name||u(l(n.prototype),"is",this).call(this,e,t):"rootElement"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"rootName",get:function(){return this.getCustomProperty($r)},set:function(e){this._setCustomProperty($r,e)}},{key:"_name",set:function(e){this.name=e}}]),n}(Hr),Gr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,e),!t.boundaries&&!t.startPosition)throw new R.b("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.");if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new R.b("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this.position=Jr.createFromPosition(t.startPosition):this.position=Jr.createFromPosition(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}return p(e,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(e){var t,n,r;do{var i;r=this.position,t=(i=this.next()).done,n=i.value}while(!t&&e(n));t||(this.position=r)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var e,t=Jr.createFromPosition(this.position),n=this.position,r=t.parent;if(null===r.parent&&t.offset===r.childCount)return{done:!0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};if(r instanceof $n){if(t.isAtEnd)return this.position=Jr.createAfter(r),this._next();e=r.data[t.offset]}else e=r.getChild(t.offset);if(e instanceof Xn)return this.shallow?t.offset++:t=new Jr(e,0),this.position=t,this._formatReturnValue("elementStart",e,n,t,1);if(e instanceof $n){if(this.singleCharacters)return t=new Jr(e,0),this.position=t,this._next();var i,o=e.data.length;return e==this._boundaryEndParent?(o=this.boundaries.end.offset,i=new Kn(e,0,o),t=Jr.createAfter(i)):(i=new Kn(e,0,e.data.length),t.offset++),this.position=t,this._formatReturnValue("text",i,n,t,o)}if("string"==typeof e){var a;a=this.singleCharacters?1:(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-t.offset;var s=new Kn(r,t.offset,a);return t.offset+=a,this.position=t,this._formatReturnValue("text",s,n,t,a)}return t=Jr.createAfter(r),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,n,t)}},{key:"_previous",value:function(){var e,t=Jr.createFromPosition(this.position),n=this.position,r=t.parent;if(null===r.parent&&0===t.offset)return{done:!0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};if(r instanceof $n){if(t.isAtStart)return this.position=Jr.createBefore(r),this._previous();e=r.data[t.offset-1]}else e=r.getChild(t.offset-1);if(e instanceof Xn)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",e,n,t,1)):(t=new Jr(e,e.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",e,n,t));if(e instanceof $n){if(this.singleCharacters)return t=new Jr(e,e.data.length),this.position=t,this._previous();var i,o=e.data.length;if(e==this._boundaryStartParent){var a=this.boundaries.start.offset;o=(i=new Kn(e,a,e.data.length-a)).data.length,t=Jr.createBefore(i)}else i=new Kn(e,0,e.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",i,n,t,o)}if("string"==typeof e){var s;if(this.singleCharacters)s=1;else{var c=r===this._boundaryStartParent?this.boundaries.start.offset:0;s=t.offset-c}t.offset-=s;var u=new Kn(r,t.offset,s);return this.position=t,this._formatReturnValue("text",u,n,t,s)}return t=Jr.createBefore(r),this.position=t,this._formatReturnValue("elementStart",r,n,t,1)}},{key:"_formatReturnValue",value:function(e,t,n,r,i){return t instanceof Kn&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=Jr.createAfter(t.textNode):(r=Jr.createAfter(t.textNode),this.position=r)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=Jr.createBefore(t.textNode):(r=Jr.createBefore(t.textNode),this.position=r))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:i}}}}]),e}(),Jr=function(){function e(t,n){v(this,e),this.parent=t,this.offset=n}return p(e,[{key:"nodeAfter",get:function(){return this.parent.is("text")?null:this.parent.getChild(this.offset)||null}},{key:"nodeBefore",get:function(){return this.parent.is("text")?null:this.parent.getChild(this.offset-1)||null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){var e=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===e}},{key:"root",get:function(){return this.parent.root}},{key:"editableElement",get:function(){for(var e=this.parent;!(e instanceof Hr);){if(!e.parent)return null;e=e.parent}return e}},{key:"getShiftedBy",value:function(t){var n=e.createFromPosition(this),r=n.offset+t;return n.offset=r<0?0:r,n}},{key:"getLastMatchingPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.startPosition=this;var n=new Gr(t);return n.skip(e),n.position}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonAncestor",value:function(e){for(var t=this.getAncestors(),n=e.getAncestors(),r=0;t[r]==n[r]&&t[r];)r++;return 0===r?null:t[r-1]}},{key:"isEqual",value:function(e){return this.parent==e.parent&&this.offset==e.offset}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"compareWith",value:function(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";var t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);var r=Un(t,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<n[r]?"before":"after"}}}],[{key:"createAt",value:function(t,n){if(t instanceof e)return this.createFromPosition(t);var r=t;if("end"==n)n=r.is("text")?r.data.length:r.childCount;else{if("before"==n)return this.createBefore(r);if("after"==n)return this.createAfter(r);n||(n=0)}return new e(r,n)}},{key:"createAfter",value:function(t){if(t.is("textProxy"))return new e(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new R.b("view-position-after-root: You can not make position after root.",{root:t});return new e(t.parent,t.index+1)}},{key:"createBefore",value:function(t){if(t.is("textProxy"))return new e(t.textNode,t.offsetInText);if(!t.parent)throw new R.b("view-position-before-root: You can not make position before root.",{root:t});return new e(t.parent,t.index)}},{key:"createFromPosition",value:function(e){return new this(e.parent,e.offset)}}]),e}(),Yr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(this,e),this.start=Jr.createFromPosition(t),this.end=n?Jr.createFromPosition(n):Jr.createFromPosition(t)}return p(e,[{key:Symbol.iterator,value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(new Gr({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return this.start.parent===this.end.parent}},{key:"root",get:function(){return this.start.root}},{key:"getEnlarged",value:function(){var t=this.start.getLastMatchingPosition(Qr,{direction:"backward"}),n=this.end.getLastMatchingPosition(Qr);return t.parent.is("text")&&t.isAtStart&&(t=Jr.createBefore(t.parent)),n.parent.is("text")&&n.isAtEnd&&(n=Jr.createAfter(n.parent)),new e(t,n)}},{key:"getTrimmed",value:function(){var t=this.start.getLastMatchingPosition(Qr);if(t.isAfter(this.end)||t.isEqual(this.end))return new e(t,t);var n=this.end.getLastMatchingPosition(Qr,{direction:"backward"}),r=t.nodeAfter,i=n.nodeBefore;return r&&r.is("text")&&(t=new Jr(r,0)),i&&i.is("text")&&(n=new Jr(i,i.data.length)),new e(t,n)}},{key:"isEqual",value:function(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}},{key:"containsPosition",value:function(e){return e.isAfter(this.start)&&e.isBefore(this.end)}},{key:"containsRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isCollapsed&&(t=!1);var n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}},{key:"getDifference",value:function(t){var n=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&n.push(new e(this.start,t.start)),this.containsPosition(t.end)&&n.push(new e(t.end,this.end))):n.push(e.createFromRange(this)),n}},{key:"getIntersection",value:function(t){if(this.isIntersecting(t)){var n=this.start,r=this.end;return this.containsPosition(t.start)&&(n=t.start),this.containsPosition(t.end)&&(r=t.end),new e(n,r)}return null}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.boundaries=this,new Gr(e)}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getItems",value:s.mark((function e(){var t,n,r,i,o,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,t.ignoreElementEnd=!0,n=new Gr(t),r=d(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return o=i.value,e.next=10,o.item;case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))},{key:"getPositions",value:s.mark((function e(){var t,n,r,i,o,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,n=new Gr(t),e.next=5,n.position;case 5:r=d(n),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=12,o.nextPosition;case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])}))},{key:"isIntersecting",value:function(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}}],[{key:"createFromParentsAndOffsets",value:function(e,t,n,r){return new this(new Jr(e,t),new Jr(n,r))}},{key:"createFromRange",value:function(e){return new this(e.start,e.end)}},{key:"createFromPositionAndShift",value:function(e,t){var n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}},{key:"createIn",value:function(e){return this.createFromParentsAndOffsets(e,0,e,e.childCount)}},{key:"createOn",value:function(e){var t=e.is("textProxy")?e.offsetSize:1;return this.createFromPositionAndShift(Jr.createBefore(e),t)}},{key:"createCollapsedAt",value:function(t,n){var r=Jr.createAt(t,n);return new e(r,Jr.createFromPosition(r))}}]),e}();function Qr(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}function Xr(e){var t,n=0,r=d(e);try{for(r.s();!(t=r.n()).done;)t.value,n++}catch(i){r.e(i)}finally{r.f()}return n}var Zr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;v(this,e),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,n,r)}return p(e,[{key:"isFake",get:function(){return this._isFake}},{key:"fakeSelectionLabel",get:function(){return this._fakeSelectionLabel}},{key:"anchor",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1],t=this._lastRangeBackward?e.end:e.start;return Jr.createFromPosition(t)}},{key:"focus",get:function(){if(!this._ranges.length)return null;var e=this._ranges[this._ranges.length-1],t=this._lastRangeBackward?e.start:e.end;return Jr.createFromPosition(t)}},{key:"isCollapsed",get:function(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"editableElement",get:function(){return this.anchor?this.anchor.editableElement:null}},{key:"getRanges",value:s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this._ranges),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,Yr.createFromRange(r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"getFirstRange",value:function(){var e,t=null,n=d(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.start.isBefore(t.start)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?Yr.createFromRange(t):null}},{key:"getLastRange",value:function(){var e,t=null,n=d(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.end.isAfter(t.end)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?Yr.createFromRange(t):null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?Jr.createFromPosition(e.start):null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?Jr.createFromPosition(e.end):null}},{key:"isEqual",value:function(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=d(this._ranges);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=!1,a=d(e._ranges);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(i.isEqual(s)){o=!0;break}}}catch(c){a.e(c)}finally{a.f()}if(!o)return!1}}catch(c){n.e(c)}finally{n.f()}return!0}},{key:"isSimilar",value:function(e){if(this.isBackward!=e.isBackward)return!1;var t=Xr(this.getRanges());if(t!=Xr(e.getRanges()))return!1;if(0==t)return!0;var n,r=d(this.getRanges());try{for(r.s();!(n=r.n()).done;){var i=n.value;i=i.getTrimmed();var o,a=!1,s=d(e.getRanges());try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c=c.getTrimmed(),i.start.isEqual(c.start)&&i.end.isEqual(c.end)){a=!0;break}}}catch(u){s.e(u)}finally{s.f()}if(!a)return!1}}catch(u){r.e(u)}finally{r.f()}return!0}},{key:"getSelectedElement",value:function(){if(1!==this.rangeCount)return null;var e=this.getFirstRange(),t=e.start.nodeAfter,n=e.end.nodeBefore;return t instanceof Xn&&t==n?t:null}},{key:"setTo",value:function(t,n,r){if(null===t)this._setRanges([]),this._setFakeOptions(n);else if(t instanceof e||t instanceof ei)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Yr)this._setRanges([t],n&&n.backward),this._setFakeOptions(n);else if(t instanceof Jr)this._setRanges([new Yr(t)]),this._setFakeOptions(n);else if(t instanceof Hn){var i,o=!!r&&!!r.backward;if(void 0===n)throw new R.b("view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.");i="in"==n?Yr.createIn(t):"on"==n?Yr.createOn(t):Yr.createCollapsedAt(t,n),this._setRanges([i],o),this._setFakeOptions(r)}else{if(!Jn(t))throw new R.b("view-selection-setTo-not-selectable: Cannot set selection to given place.");this._setRanges(t,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}},{key:"setFocus",value:function(e,t){if(null===this.anchor)throw new R.b("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.");var n=Jr.createAt(e,t);if("same"!=n.compareWith(this.focus)){var r=this.anchor;this._ranges.pop(),"before"==n.compareWith(r)?this._addRange(new Yr(n,r),!0):this._addRange(new Yr(r,n)),this.fire("change")}}},{key:"_setRanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Array.from(e),this._ranges=[];var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._addRange(i)}}catch(o){r.e(o)}finally{r.f()}this._lastRangeBackward=!!t}},{key:"_setFakeOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}},{key:"_addRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof Yr))throw new R.b("view-selection-invalid-range: Invalid Range.");this._pushRange(e),this._lastRangeBackward=!!t}},{key:"_pushRange",value:function(e){var t,n=d(this._ranges);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.isIntersecting(r))throw new R.b("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",{addedRange:e,intersectingRange:r})}}catch(i){n.e(i)}finally{n.f()}this._ranges.push(Yr.createFromRange(e))}}]),e}();H(Zr,B);var ei=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;v(this,e),this._selection=new Zr,this._selection.delegate("change").to(this),this._selection.setTo(t,n,r)}return p(e,[{key:"isFake",get:function(){return this._selection.isFake}},{key:"fakeSelectionLabel",get:function(){return this._selection.fakeSelectionLabel}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"editableElement",get:function(){return this._selection.editableElement}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"isEqual",value:function(e){return this._selection.isEqual(e)}},{key:"isSimilar",value:function(e){return this._selection.isSimilar(e)}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}}]),e}();H(ei,B);var ti=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[]}return p(e,[{key:"length",get:function(){return this._items.length}},{key:"first",get:function(){return this._items[0]||null}},{key:"last",get:function(){return this._items[this.length-1]||null}},{key:"add",value:function(e,t){var n,r=this._idProperty;if(r in e){if("string"!=typeof(n=e[r]))throw new R.b("collection-add-invalid-id");if(this.get(n))throw new R.b("collection-add-item-already-exists")}else e[r]=n=F();if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new R.b("collection-add-item-invalid-index");return this._items.splice(t,0,e),this._itemMap.set(n,e),this.fire("add",e,t),this}},{key:"get",value:function(e){var t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new R.b("collection-get-invalid-arg: Index or id must be given.");t=this._items[e]}return t||null}},{key:"getIndex",value:function(e){var t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t)}},{key:"remove",value:function(e){var t,n,r,i=!1,o=this._idProperty;if("string"==typeof e?(n=e,i=!(r=this._itemMap.get(n)),r&&(t=this._items.indexOf(r))):"number"==typeof e?(t=e,i=!(r=this._items[t]),r&&(n=r[o])):(n=(r=e)[o],i=-1==(t=this._items.indexOf(r))||!this._itemMap.get(n)),i)throw new R.b("collection-remove-404: Item not found.");this._items.splice(t,1),this._itemMap.delete(n);var a=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(a),this.fire("remove",r,t),r}},{key:"map",value:function(e,t){return this._items.map(e,t)}},{key:"find",value:function(e,t){return this._items.find(e,t)}},{key:"filter",value:function(e,t){return this._items.filter(e,t)}},{key:"clear",value:function(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;)this.remove(0)}},{key:"bindTo",value:function(e){var t=this;if(this._bindToCollection)throw new R.b("collection-bind-to-rebind: The collection cannot be bound more than once.");return this._bindToCollection=e,{as:function(e){t._setUpBindToBinding((function(t){return new e(t)}))},using:function(e){"function"==typeof e?t._setUpBindToBinding((function(t){return e(t)})):t._setUpBindToBinding((function(t){return t[e]}))}}}},{key:"_setUpBindToBinding",value:function(e){var t,n=this,r=this._bindToCollection,i=function(t,i,o){var a=r._bindToCollection==n,s=r._bindToInternalToExternalMap.get(i);if(a&&s)n._bindToExternalToInternalMap.set(i,s),n._bindToInternalToExternalMap.set(s,i);else{var c=e(i);if(!c)return void n._skippedIndexesFromExternal.push(o);var u,l=o,f=d(n._skippedIndexesFromExternal);try{for(f.s();!(u=f.n()).done;)o>u.value&&l--}catch(g){f.e(g)}finally{f.f()}var h,v=d(r._skippedIndexesFromExternal);try{for(v.s();!(h=v.n()).done;)l>=h.value&&l++}catch(g){v.e(g)}finally{v.f()}n._bindToExternalToInternalMap.set(i,c),n._bindToInternalToExternalMap.set(c,i),n.add(c,l);for(var p=0;p<r._skippedIndexesFromExternal.length;p++)l<=r._skippedIndexesFromExternal[p]&&r._skippedIndexesFromExternal[p]++}},o=d(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;i(0,a,r.getIndex(a))}}catch(s){o.e(s)}finally{o.f()}this.listenTo(r,"add",i),this.listenTo(r,"remove",(function(e,t,r){var i=n._bindToExternalToInternalMap.get(t);i&&n.remove(i),n._skippedIndexesFromExternal=n._skippedIndexesFromExternal.reduce((function(e,t){return r<t&&e.push(t-1),r>t&&e.push(t),e}),[])}))}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}}]),e}();H(ti,B);var ni=function(){function e(){v(this,e),this.selection=new ei,this.roots=new ti({idProperty:"rootName"}),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}return p(e,[{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,r=d(this._postFixers);try{for(r.s();!(n=r.n()).done&&!(t=(0,n.value)(e)););}catch(i){r.e(i)}finally{r.f()}}while(t)}}]),e}();H(ni,Br);var ri=10,ii=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,e,r,i)).getFillerOffset=oi,o._priority=ri,o._id=null,o._clonesGroup=null,o}return p(n,[{key:"priority",get:function(){return this._priority}},{key:"id",get:function(){return this._id}},{key:"getElementsWithSameId",value:function(){if(null===this.id)throw new R.b("attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.");return new Set(this._clonesGroup)}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"attributeElement"==e&&t==this.name||u(l(n.prototype),"is",this).call(this,e,t):"attributeElement"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"isSimilar",value:function(e){return null!==this.id||null!==e.id?this.id===e.id:u(l(n.prototype),"isSimilar",this).call(this,e)&&this.priority==e.priority}},{key:"_clone",value:function(e){var t=u(l(n.prototype),"_clone",this).call(this,e);return t._priority=this._priority,t._id=this._id,t}}]),n}(Xn);function oi(){if(ai(this))return null;for(var e=this.parent;e&&e.is("attributeElement");){if(ai(e)>1)return null;e=e.parent}return!e||ai(e)>1?null:this.childCount}function ai(e){return Array.from(e.getChildren()).filter((function(e){return!e.is("uiElement")})).length}ii.DEFAULT_PRIORITY=ri;var si=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,e,r,i)).getFillerOffset=ci,o}return p(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"emptyElement"==e&&t==this.name||u(l(n.prototype),"is",this).call(this,e,t):"emptyElement"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof Hn||Array.from(t).length>0))throw new R.b("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.")}}]),n}(Xn);function ci(){return null}var ui=navigator.userAgent.toLowerCase(),li={isMac:function(e){return e.indexOf("macintosh")>-1}(ui),isEdge:function(e){return!!e.match(/edge\/(\d+.?\d*)/)}(ui)},fi={"\u2318":"ctrl","\u21e7":"shift","\u2325":"alt"},hi={ctrl:"\u2318",shift:"\u21e7",alt:"\u2325"},di=function(){for(var e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448},t=65;t<=90;t++)e[String.fromCharCode(t).toLowerCase()]=t;for(var n=48;n<=57;n++)e[n-48]=n;for(var r=112;r<=123;r++)e["f"+(r-111)]=r;return e}();function vi(e){var t;if("string"==typeof e){if(!(t=di[e.toLowerCase()]))throw new R.b("keyboard-unknown-key: Unknown key name.",{key:e})}else t=e.keyCode+(e.altKey?di.alt:0)+(e.ctrlKey?di.ctrl:0)+(e.shiftKey?di.shift:0);return t}function pi(e){return e.split(/\s*\+\s*/)}var gi=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,e,r,i)).getFillerOffset=yi,o}return p(n,[{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"uiElement"==e&&t==this.name||u(l(n.prototype),"is",this).call(this,e,t):"uiElement"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"_insertChild",value:function(e,t){if(t&&(t instanceof Hn||Array.from(t).length>0))throw new R.b("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.")}},{key:"render",value:function(e){return this.toDomElement(e)}},{key:"toDomElement",value:function(e){var t,n=e.createElement(this.name),r=d(this.getAttributeKeys());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.setAttribute(i,this.getAttribute(i))}}catch(o){r.e(o)}finally{r.f()}return n}}]),n}(Xn);function mi(e){e.document.on("keydown",(function(t,n){return function(e,t,n){if(t.keyCode==di.arrowright){var r=t.domTarget.ownerDocument.defaultView.getSelection(),i=1==r.rangeCount&&r.getRangeAt(0).collapsed;if(i||t.shiftKey){var o=r.focusNode,a=r.focusOffset,s=n.domPositionToView(o,a);if(null===s)return;var c=!1,u=s.getLastMatchingPosition((function(e){return e.item.is("uiElement")&&(c=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement"))}));if(c){var l=n.viewPositionToDom(u);i?r.collapse(l.parent,l.offset):r.extend(l.parent,l.offset)}}}}(0,n,e.domConverter)}))}function yi(){return null}var ki=function(){function e(t){v(this,e),this._children=[],t&&this._insertChild(0,t)}return p(e,[{key:Symbol.iterator,value:function(){return this._children[Symbol.iterator]()}},{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"==e}},{key:"_appendChild",value:function(e){return this._insertChild(this.childCount,e)}},{key:"getChild",value:function(e){return this._children[e]}},{key:"getChildIndex",value:function(e){return this._children.indexOf(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"_insertChild",value:function(e,t){this._fireChange("children",this);var n,r=0,i=function(e){return"string"==typeof e?[new $n(e)]:(Jn(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new $n(e):e instanceof Kn?new $n(e.data):e})))}(t),o=d(i);try{for(o.s();!(n=o.n()).done;){var a=n.value;null!==a.parent&&a._remove(),a.parent=this,this._children.splice(e,0,a),e++,r++}}catch(s){o.e(s)}finally{o.f()}return r}},{key:"_removeChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}},{key:"_fireChange",value:function(e,t){this.fire("change:"+e,t)}}]),e}();H(ki,B);var bi=function(){function e(t){v(this,e),this.document=t,this._cloneGroups=new Map}return p(e,[{key:"setSelection",value:function(e,t,n){this.document.selection._setTo(e,t,n)}},{key:"setSelectionFocus",value:function(e,t){this.document.selection._setFocus(e,t)}},{key:"createText",value:function(e){return new $n(e)}},{key:"createAttributeElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ii(e,t);return n.priority&&(r._priority=n.priority),n.id&&(r._id=n.id),r}},{key:"createContainerElement",value:function(e,t){return new tr(e,t)}},{key:"createEditableElement",value:function(e,t){var n=new Hr(e,t);return n._document=this.document,n}},{key:"createEmptyElement",value:function(e,t){return new si(e,t)}},{key:"createUIElement",value:function(e,t,n){var r=new gi(e,t);return n&&(r.render=n),r}},{key:"setAttribute",value:function(e,t,n){n._setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){t._removeAttribute(e)}},{key:"addClass",value:function(e,t){t._addClass(e)}},{key:"removeClass",value:function(e,t){t._removeClass(e)}},{key:"setStyle",value:function(e,t,n){P(e)&&void 0===n&&(n=t),n._setStyle(e,t)}},{key:"removeStyle",value:function(e,t){t._removeStyle(e)}},{key:"setCustomProperty",value:function(e,t,n){n._setCustomProperty(e,t)}},{key:"removeCustomProperty",value:function(e,t){return t._removeCustomProperty(e)}},{key:"breakAttributes",value:function(e){return e instanceof Jr?this._breakAttributes(e):this._breakAttributesRange(e)}},{key:"breakContainer",value:function(e){var t=e.parent;if(!t.is("containerElement"))throw new R.b("view-writer-break-non-container-element: Trying to break an element which is not a container element.");if(!t.parent)throw new R.b("view-writer-break-root: Trying to break root element.");if(e.isAtStart)return Jr.createBefore(t);if(!e.isAtEnd){var n=t._clone(!1);this.insert(Jr.createAfter(t),n);var r=new Yr(e,Jr.createAt(t,"end")),i=new Jr(n,0);this.move(r,i)}return Jr.createAfter(t)}},{key:"mergeAttributes",value:function(e){var t=e.offset,n=e.parent;if(n.is("text"))return e;if(n.is("attributeElement")&&0===n.childCount){var r=n.parent,i=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Jr(r,i))}var o=n.getChild(t-1),a=n.getChild(t);if(!o||!a)return e;if(o.is("text")&&a.is("text"))return Ci(o,a);if(o.is("attributeElement")&&a.is("attributeElement")&&o.isSimilar(a)){var s=o.childCount;return o._appendChild(a.getChildren()),a._remove(),this._removeFromClonedElementsGroup(a),this.mergeAttributes(new Jr(o,s))}return e}},{key:"mergeContainers",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;if(!(t&&n&&t.is("containerElement")&&n.is("containerElement")))throw new R.b("view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.");var r=t.getChild(t.childCount-1),i=r instanceof $n?Jr.createAt(r,"end"):Jr.createAt(t,"end");return this.move(Yr.createIn(n),Jr.createAt(t,"end")),this.remove(Yr.createOn(n)),i}},{key:"insert",value:function(e,t){!function e(t){var n,r=d(t);try{var i=function(){var t=n.value;if(!Ti.some((function(e){return t instanceof e})))throw new R.b("view-writer-insert-invalid-node");t.is("text")||e(t.getChildren())};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}(t=Jn(t)?f(t):[t]);var n=wi(e);if(!n)throw new R.b("view-writer-invalid-position-container");var r,i=this._breakAttributes(e,!0),o=n._insertChild(i.offset,t),a=d(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;this._addToClonedElementsGroup(s)}}catch(h){a.e(h)}finally{a.f()}var c=i.getShiftedBy(o),u=this.mergeAttributes(i);if(0===o)return new Yr(u,u);u.isEqual(i)||c.offset--;var l=this.mergeAttributes(c);return new Yr(u,l)}},{key:"remove",value:function(e){if(Si(e),e.isCollapsed)return new ki;var t,n=this._breakAttributesRange(e,!0),r=n.start,i=n.end,o=r.parent,a=i.offset-r.offset,s=o._removeChildren(r.offset,a),c=d(s);try{for(c.s();!(t=c.n()).done;){var u=t.value;this._removeFromClonedElementsGroup(u)}}catch(f){c.e(f)}finally{c.f()}var l=this.mergeAttributes(r);return e.start=l,e.end=Jr.createFromPosition(l),new ki(s)}},{key:"clear",value:function(e,t){Si(e);var n,r=e.getWalker({direction:"backward",ignoreElementEnd:!0}),i=d(r);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.item,s=void 0;if(a.is("element")&&t.isSimilar(a))s=Yr.createOn(a);else if(!o.nextPosition.isAfter(e.start)&&a.is("textProxy")){var c=a.getAncestors().find((function(e){return e.is("element")&&t.isSimilar(e)}));c&&(s=Yr.createIn(c))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}catch(u){i.e(u)}finally{i.f()}}},{key:"move",value:function(e,t){var n;if(t.isAfter(e.end)){var r=(t=this._breakAttributes(t,!0)).parent,i=r.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=r.childCount-i}else n=this.remove(e);return this.insert(t,n)}},{key:"wrap",value:function(e,t){if(!(t instanceof ii))throw new R.b("view-writer-wrap-invalid-attribute");if(Si(e),e.isCollapsed){var n=e.start;n.parent.is("element")&&!function(e){return Array.from(e.getChildren()).some((function(e){return!e.is("uiElement")}))}(n.parent)&&(n=n.getLastMatchingPosition((function(e){return e.item.is("uiElement")}))),n=this._wrapPosition(n,t);var r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(n),new Yr(n)}return this._wrapRange(e,t)}},{key:"unwrap",value:function(e,t){if(!(t instanceof ii))throw new R.b("view-writer-unwrap-invalid-attribute");if(Si(e),e.isCollapsed)return e;var n=this._breakAttributesRange(e,!0),r=n.start,i=n.end;if(i.isEqual(r.getShiftedBy(1))){var o=r.nodeAfter;if(!t.isSimilar(o)&&o instanceof ii&&this._unwrapAttributeElement(t,o)){var a=this.mergeAttributes(r);a.isEqual(r)||i.offset--;var s=this.mergeAttributes(i);return new Yr(a,s)}}var c=r.parent,u=this._unwrapChildren(c,r.offset,i.offset,t),l=this.mergeAttributes(u.start);l.isEqual(u.start)||u.end.offset--;var f=this.mergeAttributes(u.end);return new Yr(l,f)}},{key:"rename",value:function(e,t){var n=new tr(t,e.getAttributes());return this.insert(Jr.createAfter(e),n),this.move(Yr.createIn(e),Jr.createAt(n)),this.remove(Yr.createOn(e)),n}},{key:"_wrapChildren",value:function(e,t,n,r){for(var i=t,o=[];i<n;){var a=e.getChild(i),s=a.is("text"),c=a.is("attributeElement"),u=a.is("emptyElement"),l=a.is("uiElement");if(s||u||l||c&&_i(r,a)){var f=r._clone();a._remove(),f._appendChild(a),e._insertChild(i,f),this._addToClonedElementsGroup(f),o.push(new Jr(e,i))}else c&&this._wrapChildren(a,0,a.childCount,r);i++}for(var h=0,d=0,v=o;d<v.length;d++){var p=v[d];p.offset-=h,p.offset!=t&&(this.mergeAttributes(p).isEqual(p)||(h++,n--))}return Yr.createFromParentsAndOffsets(e,t,e,n)}},{key:"_unwrapChildren",value:function(e,t,n,r){for(var i=t,o=[];i<n;){var a=e.getChild(i);if(a.isSimilar(r)){var s=a.getChildren(),c=a.childCount;a._remove(),e._insertChild(i,s),this._removeFromClonedElementsGroup(a),o.push(new Jr(e,i),new Jr(e,i+c)),i+=c,n+=c-1}else a.is("attributeElement")&&this._unwrapChildren(a,0,a.childCount,r),i++}for(var u=0,l=0,f=o;l<f.length;l++){var h=f[l];h.offset-=u,h.offset!=t&&h.offset!=n&&(this.mergeAttributes(h).isEqual(h)||(u++,n--))}return Yr.createFromParentsAndOffsets(e,t,e,n)}},{key:"_wrapRange",value:function(e,t){if(function(e){return e.start.parent==e.end.parent&&e.start.parent.is("attributeElement")&&0===e.start.offset&&e.end.offset===e.start.parent.childCount}(e)&&this._wrapAttributeElement(t,e.start.parent)){var n=e.start.parent,r=this.mergeAttributes(Jr.createAfter(n)),i=this.mergeAttributes(Jr.createBefore(n));return new Yr(i,r)}var o=this._breakAttributesRange(e,!0),a=o.start,s=o.end;if(s.isEqual(a.getShiftedBy(1))){var c=a.nodeAfter;if(c instanceof ii&&this._wrapAttributeElement(t,c)){var u=this.mergeAttributes(a);u.isEqual(a)||s.offset--;var l=this.mergeAttributes(s);return new Yr(u,l)}}var f=a.parent,h=this._unwrapChildren(f,a.offset,s.offset,t),d=this._wrapChildren(f,h.start.offset,h.end.offset,t),v=this.mergeAttributes(d.start);v.isEqual(d.start)||d.end.offset--;var p=this.mergeAttributes(d.end);return new Yr(v,p)}},{key:"_wrapPosition",value:function(e,t){if(t.isSimilar(e.parent))return xi(Jr.createFromPosition(e));e.parent.is("text")&&(e=Ai(e));var n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=function(){return!1},e.parent._insertChild(e.offset,n);var r=new Yr(e,e.getShiftedBy(1));this.wrap(r,t);var i=new Jr(n.parent,n.index);n._remove();var o=i.nodeBefore,a=i.nodeAfter;return o instanceof $n&&a instanceof $n?Ci(o,a):xi(i)}},{key:"_wrapAttributeElement",value:function(e,t){if(!Pi(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var n,r=d(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var i=n.value;if("class"!==i&&"style"!==i&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1}}catch(y){r.e(y)}finally{r.f()}var o,a=d(e.getStyleNames());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t.hasStyle(s)&&t.getStyle(s)!==e.getStyle(s))return!1}}catch(y){a.e(y)}finally{a.f()}var c,u=d(e.getAttributeKeys());try{for(u.s();!(c=u.n()).done;){var l=c.value;"class"!==l&&"style"!==l&&(t.hasAttribute(l)||this.setAttribute(l,e.getAttribute(l),t))}}catch(y){u.e(y)}finally{u.f()}var f,h=d(e.getStyleNames());try{for(h.s();!(f=h.n()).done;){var v=f.value;t.hasStyle(v)||this.setStyle(v,e.getStyle(v),t)}}catch(y){h.e(y)}finally{h.f()}var p,g=d(e.getClassNames());try{for(g.s();!(p=g.n()).done;){var m=p.value;t.hasClass(m)||this.addClass(m,t)}}catch(y){g.e(y)}finally{g.f()}return!0}},{key:"_unwrapAttributeElement",value:function(e,t){if(!Pi(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;var n,r=d(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var i=n.value;if("class"!==i&&"style"!==i&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1}}catch(h){r.e(h)}finally{r.f()}if(!t.hasClass.apply(t,f(e.getClassNames())))return!1;var o,a=d(e.getStyleNames());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!t.hasStyle(s)||t.getStyle(s)!==e.getStyle(s))return!1}}catch(h){a.e(h)}finally{a.f()}var c,u=d(e.getAttributeKeys());try{for(u.s();!(c=u.n()).done;){var l=c.value;"class"!==l&&"style"!==l&&this.removeAttribute(l,t)}}catch(h){u.e(h)}finally{u.f()}return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}},{key:"_breakAttributesRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.start,r=e.end;if(Si(e),e.isCollapsed){var i=this._breakAttributes(e.start,t);return new Yr(i,i)}var o=this._breakAttributes(r,t),a=o.parent.childCount,s=this._breakAttributes(n,t);return o.offset+=o.parent.childCount-a,new Yr(s,o)}},{key:"_breakAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new R.b("view-writer-cannot-break-empty-element");if(e.parent.is("uiElement"))throw new R.b("view-writer-cannot-break-ui-element");if(!t&&r.is("text")&&Oi(r.parent))return Jr.createFromPosition(e);if(Oi(r))return Jr.createFromPosition(e);if(r.is("text"))return this._breakAttributes(Ai(e),t);if(n==r.childCount){var i=new Jr(r.parent,r.index+1);return this._breakAttributes(i,t)}if(0===n){var o=new Jr(r.parent,r.index);return this._breakAttributes(o,t)}var a=r.index+1,s=r._clone();r.parent._insertChild(a,s),this._addToClonedElementsGroup(s);var c=r.childCount-n,u=r._removeChildren(n,c);s._appendChild(u);var l=new Jr(r.parent,a);return this._breakAttributes(l,t)}},{key:"_addToClonedElementsGroup",value:function(e){if(e.root.is("rootElement")){if(e.is("element")){var t,n=d(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._addToClonedElementsGroup(r)}}catch(a){n.e(a)}finally{n.f()}}var i=e.id;if(i){var o=this._cloneGroups.get(i);o||(o=new Set,this._cloneGroups.set(i,o)),o.add(e),e._clonesGroup=o}}}},{key:"_removeFromClonedElementsGroup",value:function(e){if(e.is("element")){var t,n=d(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._removeFromClonedElementsGroup(r)}}catch(a){n.e(a)}finally{n.f()}}var i=e.id;if(i){var o=this._cloneGroups.get(i);o&&(o.delete(e),0===o.size&&this._cloneGroups.delete(i))}}}]),e}();function wi(e){for(var t=e.parent;!Oi(t);){if(!t)return;t=t.parent}return t}function _i(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity()}function xi(e){var t=e.nodeBefore;if(t&&t.is("text"))return new Jr(t,t.data.length);var n=e.nodeAfter;return n&&n.is("text")?new Jr(n,0):e}function Ai(e){if(e.offset==e.parent.data.length)return new Jr(e.parent.parent,e.parent.index+1);if(0===e.offset)return new Jr(e.parent.parent,e.parent.index);var t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new $n(t)),new Jr(e.parent.parent,e.parent.index+1)}function Ci(e,t){var n=e.data.length;return e._data+=t.data,t._remove(),new Jr(e,n)}var Ti=[$n,ii,tr,si,gi];function Oi(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function Si(e){var t=wi(e.start),n=wi(e.end);if(!t||!n||t!==n)throw new R.b("view-writer-invalid-range-container")}function Pi(e,t){return null===e.id&&null===t.id}for(var Ei=function(e){var t=e.createElement("br");return t.dataset.ckeFiller=!0,t},Ri=function(e){return e.createTextNode("\xa0")},Ii=7,Mi="",Fi=0;Fi<Ii;Fi++)Mi+="\u200b";function Di(e){return e instanceof Text&&e.data.substr(0,Ii)===Mi}function Ni(e){return e.data.length==Ii&&Di(e)}function ji(e){return Di(e)?e.data.slice(Ii):e.data}var Bi=new WeakMap;function Vi(e,t){var n=Bi.get(t);return n||(n=t(window.document),Bi.set(t,n)),e.isEqualNode(n)}function Li(e,t){if(t.keyCode==di.arrowleft){var n=t.domTarget.ownerDocument.defaultView.getSelection();if(1==n.rangeCount&&n.getRangeAt(0).collapsed){var r=n.getRangeAt(0).startContainer,i=n.getRangeAt(0).startOffset;Di(r)&&i<=Ii&&n.collapse(r,0)}}}function zi(e,t,n){var r,i;if(n=n||function(e,t){return e===t},t.length<e.length){var o=e;e=t,t=o,r="delete",i="insert"}else r="insert",i="delete";var a=e.length,s=t.length,c=s-a,u={},l={};function f(o){var c=(void 0!==l[o-1]?l[o-1]:-1)+1,f=void 0!==l[o+1]?l[o+1]:-1,h=c>f?-1:1;u[o+h]&&(u[o]=u[o+h].slice(0)),u[o]||(u[o]=[]),u[o].push(c>f?r:i);for(var d=Math.max(c,f),v=d-o;v<a&&d<s&&n(e[v],t[d]);)v++,d++,u[o].push("equal");return d}var h,d=0;do{for(h=-d;h<c;h++)l[h]=f(h);for(h=c+d;h>c;h--)l[h]=f(h);l[c]=f(c),d++}while(l[c]!==s);return u[c].slice(1)}function Wi(e,t,n){e.insertBefore(n,e.childNodes[t]||null)}function qi(e){var t=e.parentNode;t&&t.removeChild(e)}function Ui(e){return"[object Text]"==Object.prototype.toString.call(e)}function Hi(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}function $i(e,t){return e===t?[]:function(e,t){var n=[],r=t.firstIndex,i=t.lastIndexOld,o=t.lastIndexNew;return o-r>0&&n.push({index:r,type:"insert",values:e.substring(r,o).split("")}),i-r>0&&n.push({index:r+(o-r),type:"delete",howMany:i-r}),n}(t,function(e,t){var n=Ki(e,t),r=Ki(Gi(e,n),Gi(t,n));return{firstIndex:n,lastIndexOld:e.length-r,lastIndexNew:t.length-r}}(e,t))}function Ki(e,t){for(var n=0;n<Math.max(e.length,t.length);n++)if(e[n]!==t[n])return n}function Gi(e,t){return e.substring(t).split("").reverse().join("")}var Ji=function(){function e(t,n){v(this,e),this.domDocuments=new Set,this.domConverter=t,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=n,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}return p(e,[{key:"markToSync",value:function(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new R.b("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.");this.markedChildren.add(t)}}}},{key:"render",value:function(){var e,t,n=d(this.markedChildren);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._updateChildrenMappings(r)}}catch(g){n.e(g)}finally{n.f()}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));var i,o=d(this.markedAttributes);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._updateAttrs(a)}}catch(g){o.e(g)}finally{o.f()}var s,c=d(this.markedChildren);try{for(c.s();!(s=c.n()).done;){var u=s.value;this._updateChildren(u,{inlineFillerPosition:e})}}catch(g){c.e(g)}finally{c.f()}var l,f=d(this.markedTexts);try{for(f.s();!(l=f.n()).done;){var h=l.value;!this.markedChildren.has(h.parent)&&this.domConverter.mapViewToDom(h.parent)&&this._updateText(h,{inlineFillerPosition:e})}}catch(g){f.e(g)}finally{f.f()}if(e){var v=this.domConverter.viewPositionToDom(e),p=v.parent.ownerDocument;Di(v.parent)?this._inlineFiller=v.parent:this._inlineFiller=Yi(p,v.parent,v.offset)}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}},{key:"_updateChildrenMappings",value:function(e){var t=this.domConverter.mapViewToDom(e);if(t){var n=this.domConverter.mapViewToDom(e).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),i=this._diffNodeLists(n,r),o=this._findReplaceActions(i,n,r);if(-1!==o.indexOf("replace")){var a,s={equal:0,insert:0,delete:0},c=d(o);try{for(c.s();!(a=c.n()).done;){var u=a.value;if("replace"===u){var l=s.equal+s.insert,f=s.equal+s.delete,h=e.getChild(l);h&&!h.is("uiElement")&&this._updateElementMappings(h,n[f]),qi(r[l]),s.equal++}else s[u]++}}catch(v){c.e(v)}finally{c.f()}}}}},{key:"_updateElementMappings",value:function(e,t){var n=this.domConverter.mapDomToView(t);(!n||n&&!n.isSimilar(e))&&this.markedAttributes.add(e),this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e)}},{key:"_getInlineFillerPosition",value:function(){var e=this.selection.getFirstPosition();return e.parent.is("text")?Jr.createBefore(this.selection.getFirstPosition().parent):e}},{key:"_isSelectionInInlineFiller",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Ui(t.parent)&&Di(t.parent))}},{key:"_removeInlineFiller",value:function(){var e=this._inlineFiller;if(!Di(e))throw new R.b("view-renderer-filler-was-lost: The inline filler node was lost.");Ni(e)?e.parentNode.removeChild(e):e.data=e.data.substr(Ii),this._inlineFiller=null}},{key:"_needsInlineFillerAtSelection",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is("element"))return!1;if(!function(e){if("false"==e.getAttribute("contenteditable"))return!1;var t=e.findAncestor((function(e){return e.hasAttribute("contenteditable")}));return!t||"true"==t.getAttribute("contenteditable")}(t))return!1;if(n===t.getFillerOffset())return!1;var r=e.nodeBefore,i=e.nodeAfter;return!(r instanceof $n||i instanceof $n)}},{key:"_updateText",value:function(e,t){var n=this.domConverter.findCorrespondingDomText(e),r=this.domConverter.viewToDom(e,n.ownerDocument),i=n.data,o=r.data,a=t.inlineFillerPosition;if(a&&a.parent==e.parent&&a.offset==e.index&&(o=Mi+o),i!=o){var s,c=$i(i,o),u=d(c);try{for(u.s();!(s=u.n()).done;){var l=s.value;"insert"===l.type?n.insertData(l.index,l.values.join("")):n.deleteData(l.index,l.howMany)}}catch(f){u.e(f)}finally{u.f()}}}},{key:"_updateAttrs",value:function(e){var t=this.domConverter.mapViewToDom(e);if(t){var n,r=Array.from(t.attributes).map((function(e){return e.name})),i=e.getAttributeKeys(),o=d(i);try{for(o.s();!(n=o.n()).done;){var a=n.value;t.setAttribute(a,e.getAttribute(a))}}catch(l){o.e(l)}finally{o.f()}var s,c=d(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;e.hasAttribute(u)||t.removeAttribute(u)}}catch(l){c.e(l)}finally{c.f()}}}},{key:"_updateChildren",value:function(e,t){var n=this.domConverter.mapViewToDom(e);if(n){var r=t.inlineFillerPosition,i=this.domConverter.mapViewToDom(e).childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,n.ownerDocument,{bind:!0,inlineFillerPosition:r}));r&&r.parent===e&&Yi(n.ownerDocument,o,r.offset);var a,s=this._diffNodeLists(i,o),c=0,u=new Set,l=d(s);try{for(l.s();!(a=l.n()).done;){var f=a.value;"insert"===f?(Wi(n,c,o[c]),c++):"delete"===f?(u.add(i[c]),qi(i[c])):(this._markDescendantTextToSync(this.domConverter.domToView(o[c])),c++)}}catch(g){l.e(g)}finally{l.f()}var h,v=d(u);try{for(v.s();!(h=v.n()).done;){var p=h.value;p.parentNode||this.domConverter.unbindDomElement(p)}}catch(g){v.e(g)}finally{v.f()}}}},{key:"_diffNodeLists",value:function(e,t){return zi(e,t,function(e,t,n){return t===n||(Ui(t)&&Ui(n)?t.data===n.data:!(!Vi(t,e)||!Vi(n,e)))}.bind(null,this.domConverter.blockFiller))}},{key:"_findReplaceActions",value:function(e,t,n){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;var r,i=[],o=[],a=[],s={equal:0,insert:0,delete:0},c=d(e);try{for(c.s();!(r=c.n()).done;){var u=r.value;"insert"===u?a.push(n[s.equal+s.insert]):"delete"===u?o.push(t[s.equal+s.delete]):((i=i.concat(zi(o,a,Qi).map((function(e){return"equal"===e?"replace":e})))).push("equal"),o=[],a=[]),s[u]++}}catch(l){c.e(l)}finally{c.f()}return i.concat(zi(o,a,Qi).map((function(e){return"equal"===e?"replace":e})))}},{key:"_markDescendantTextToSync",value:function(e){if(e)if(e.is("text"))this.markedTexts.add(e);else if(e.is("element")){var t,n=d(e.getChildren());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._markDescendantTextToSync(r)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"_updateSelection",value:function(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}},{key:"_updateFakeSelection",value:function(e){var t=e.ownerDocument,n=this._fakeSelectionContainer;n||(this._fakeSelectionContainer=n=t.createElement("div"),Object.assign(n.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),n.appendChild(t.createTextNode("\xa0"))),n.parentElement||e.appendChild(n),n.firstChild.data=this.selection.fakeSelectionLabel||"\xa0";var r=t.getSelection(),i=t.createRange();r.removeAllRanges(),i.selectNodeContents(n),r.addRange(i),this.domConverter.bindFakeSelection(n,this.selection)}},{key:"_updateDomSelection",value:function(e){var t=e.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(t)){var n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);e.focus(),t.collapse(n.parent,n.offset),t.extend(r.parent,r.offset)}}},{key:"_domSelectionNeedsUpdate",value:function(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;var t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t))}},{key:"_removeDomSelection",value:function(){var e,t=d(this.domDocuments);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.getSelection().rangeCount){var r=n.activeElement,i=this.domConverter.mapDomToView(r);r&&i&&n.getSelection().removeAllRanges()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"_removeFakeSelection",value:function(){var e=this._fakeSelectionContainer;e&&e.remove()}},{key:"_updateFocus",value:function(){if(this.isFocused){var e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}]),e}();function Yi(e,t,n){var r=t instanceof Array?t:t.childNodes,i=r[n];if(Ui(i))return i.data=Mi+i.data,i;var o=e.createTextNode(Mi);return Array.isArray(t)?r.splice(n,0,o):Wi(t,n,o),o}function Qi(e,t){return Hi(e)&&Hi(t)&&!Ui(e)&&!Ui(t)&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}H(Ji,Br);var Xi={window:window,document:document};function Zi(e){for(var t=0;e.previousSibling;)e=e.previousSibling,t++;return t}function eo(e){for(var t=[];e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}var to=function(e){return!!e&&1===e.nodeType&&_(e)&&!P(e)},no=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.blockFiller=t.blockFiller||Ei,this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}return p(e,[{key:"bindFakeSelection",value:function(e,t){this._fakeSelectionMapping.set(e,new Zr(t))}},{key:"fakeSelectionToView",value:function(e){return this._fakeSelectionMapping.get(e)}},{key:"bindElements",value:function(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}},{key:"unbindDomElement",value:function(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(var n=0,r=Array.from(e.childNodes);n<r.length;n++){var i=r[n];this.unbindDomElement(i)}}}},{key:"bindDocumentFragments",value:function(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}},{key:"viewToDom",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.is("text")){var i=this._processDataFromViewText(e);return t.createTextNode(i)}if(this.mapViewToDom(e))return this.mapViewToDom(e);if(e.is("documentFragment"))n=t.createDocumentFragment(),r.bind&&this.bindDocumentFragments(n,e);else{if(e.is("uiElement"))return n=e.render(t),r.bind&&this.bindElements(n,e),n;n=t.createElement(e.name),r.bind&&this.bindElements(n,e);var o,a=d(e.getAttributeKeys());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.setAttribute(s,e.getAttribute(s))}}catch(f){a.e(f)}finally{a.f()}}if(r.withChildren||void 0===r.withChildren){var c,u=d(this.viewChildrenToDom(e,t,r));try{for(u.s();!(c=u.n()).done;){var l=c.value;n.appendChild(l)}}catch(f){u.e(f)}finally{u.f()}}return n}},{key:"viewChildrenToDom",value:s.mark((function e(t,n){var r,i,o,a,c,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:{},i=t.getFillerOffset&&t.getFillerOffset(),o=0,a=d(t.getChildren()),e.prev=4,a.s();case 6:if((c=a.n()).done){e.next=17;break}if(u=c.value,e.t0=i===o,!e.t0){e.next=12;break}return e.next=12,this.blockFiller(n);case 12:return e.next=14,this.viewToDom(u,n,r);case 14:o++;case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(4),a.e(e.t1);case 22:return e.prev=22,a.f(),e.finish(22);case 25:if(e.t2=i===o,!e.t2){e.next=29;break}return e.next=29,this.blockFiller(n);case 29:case"end":return e.stop()}}),e,this,[[4,19,22,25]])}))},{key:"viewRangeToDom",value:function(e){var t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),r=document.createRange();return r.setStart(t.parent,t.offset),r.setEnd(n.parent,n.offset),r}},{key:"viewPositionToDom",value:function(e){var t,n,r,i=e.parent;if(i.is("text")){var o=this.findCorrespondingDomText(i);if(!o)return null;var a=e.offset;return Di(o)&&(a+=Ii),{parent:o,offset:a}}if(0===e.offset){if(!(t=this.mapViewToDom(i)))return null;r=t.childNodes[0]}else{var s=e.nodeBefore;if(!(n=s.is("text")?this.findCorrespondingDomText(s):this.mapViewToDom(e.nodeBefore)))return null;t=n.parentNode,r=n.nextSibling}return Ui(r)&&Di(r)?{parent:r,offset:Ii}:{parent:t,offset:n?Zi(n)+1:0}}},{key:"domToView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Vi(e,this.blockFiller))return null;var n,r=this.getParentUIElement(e,this._domToViewMapping);if(r)return r;if(Ui(e)){if(Ni(e))return null;var i=this._processDataFromDomText(e);return""===i?null:new $n(i)}if(this.isComment(e))return null;if(this.mapDomToView(e))return this.mapDomToView(e);if(this.isDocumentFragment(e))n=new ki,t.bind&&this.bindDocumentFragments(e,n);else{var o=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();n=new Xn(o),t.bind&&this.bindElements(e,n);for(var a=e.attributes,s=a.length-1;s>=0;s--)n._setAttribute(a[s].name,a[s].value)}if(t.withChildren||void 0===t.withChildren){var c,u=d(this.domChildrenToView(e,t));try{for(u.s();!(c=u.n()).done;){var l=c.value;n._appendChild(l)}}catch(f){u.e(f)}finally{u.f()}}return n}},{key:"domChildrenToView",value:s.mark((function e(t){var n,r,i,o,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:{},r=0;case 2:if(!(r<t.childNodes.length)){e.next=11;break}if(i=t.childNodes[r],o=this.domToView(i,n),e.t0=null!==o,!e.t0){e.next=8;break}return e.next=8,o;case 8:r++,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"domSelectionToView",value:function(e){if(1===e.rangeCount){var t=e.getRangeAt(0).startContainer;Ui(t)&&(t=t.parentNode);var n=this.fakeSelectionToView(t);if(n)return n}for(var r=this.isDomSelectionBackward(e),i=[],o=0;o<e.rangeCount;o++){var a=e.getRangeAt(o),s=this.domRangeToView(a);s&&i.push(s)}return new Zr(i,{backward:r})}},{key:"domRangeToView",value:function(e){var t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new Yr(t,n):null}},{key:"domPositionToView",value:function(e,t){if(Vi(e,this.blockFiller))return this.domPositionToView(e.parentNode,Zi(e));var n=this.mapDomToView(e);if(n&&n.is("uiElement"))return Jr.createBefore(n);if(Ui(e)){if(Ni(e))return this.domPositionToView(e.parentNode,Zi(e));var r=this.findCorrespondingViewText(e),i=t;return r?(Di(e)&&(i=(i-=Ii)<0?0:i),new Jr(r,i)):null}if(0===t){var o=this.mapDomToView(e);if(o)return new Jr(o,0)}else{var a=e.childNodes[t-1],s=Ui(a)?this.findCorrespondingViewText(a):this.mapDomToView(a);if(s&&s.parent)return new Jr(s.parent,s.index+1)}return null}},{key:"mapDomToView",value:function(e){return this.getParentUIElement(e)||this._domToViewMapping.get(e)}},{key:"findCorrespondingViewText",value:function(e){if(Ni(e))return null;var t=this.getParentUIElement(e);if(t)return t;var n=e.previousSibling;if(n){if(!this.isElement(n))return null;var r=this.mapDomToView(n);if(r)return r.nextSibling instanceof $n?r.nextSibling:null}else{var i=this.mapDomToView(e.parentNode);if(i){var o=i.getChild(0);return o instanceof $n?o:null}}return null}},{key:"mapViewToDom",value:function(e){return this._viewToDomMapping.get(e)}},{key:"findCorrespondingDomText",value:function(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}},{key:"focus",value:function(e){var t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){var n=Xi.window,r=n.scrollX,i=n.scrollY,o=[];io(t,(function(e){var t=e.scrollLeft,n=e.scrollTop;o.push([t,n])})),t.focus(),io(t,(function(e){var t=o.shift(),n=h(t,2),r=n[0],i=n[1];e.scrollLeft=r,e.scrollTop=i})),Xi.window.scrollTo(r,i)}}},{key:"isElement",value:function(e){return e&&e.nodeType==Node.ELEMENT_NODE}},{key:"isDocumentFragment",value:function(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}},{key:"isComment",value:function(e){return e&&e.nodeType==Node.COMMENT_NODE}},{key:"isDomSelectionBackward",value:function(e){if(e.isCollapsed)return!1;var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);var n=t.collapsed;return t.detach(),n}},{key:"getParentUIElement",value:function(e){var t=eo(e);for(t.pop();t.length;){var n=t.pop(),r=this._domToViewMapping.get(n);if(r&&r.is("uiElement"))return r}return null}},{key:"isDomSelectionCorrect",value:function(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}},{key:"_isDomSelectionPositionCorrect",value:function(e,t){if(Ui(e)&&Di(e)&&t<Ii)return!1;if(this.isElement(e)&&Di(e.childNodes[t]))return!1;var n=this.mapDomToView(e);return!n||!n.is("uiElement")}},{key:"_processDataFromViewText",value:function(e){var t=this,n=e.data;if(e.getAncestors().some((function(e){return t.preElements.includes(e.name)})))return n;if(" "==n.charAt(0)){var r=this._getTouchingViewTextNode(e,!1);(!r||!this._nodeEndsWithSpace(r))&&r||(n="\xa0"+n.substr(1))}return" "==n.charAt(n.length-1)&&(this._getTouchingViewTextNode(e,!0)||(n=n.substr(0,n.length-1)+"\xa0")),n.replace(/ {2}/g," \xa0")}},{key:"_nodeEndsWithSpace",value:function(e){var t=this;if(e.getAncestors().some((function(e){return t.preElements.includes(e.name)})))return!1;var n=this._processDataFromViewText(e);return" "==n.charAt(n.length-1)}},{key:"_processDataFromDomText",value:function(e){var t=e.data;if(ro(e,this.preElements))return ji(e);t=t.replace(/[ \n\t\r]{1,}/g," ");var n=this._getTouchingInlineDomNode(e,!1),r=this._getTouchingInlineDomNode(e,!0),i=this._checkShouldLeftTrimDomText(n),o=this._checkShouldRightTrimDomText(e,r);return i&&(t=t.replace(/^ /,"")),o&&(t=t.replace(/ $/,"")),t=(t=ji(new Text(t))).replace(/ \u00A0/g,"  "),i&&(t=t.replace(/^\u00A0/," ")),Ui(r)&&"\xa0"!=r.data.charAt(0)||(t=t.replace(/\u00A0( *)$/," $1")),t}},{key:"_checkShouldLeftTrimDomText",value:function(e){return!e||!!to(e)||/[^\S\u00A0]/.test(e.data.charAt(e.data.length-1))}},{key:"_checkShouldRightTrimDomText",value:function(e,t){return!t&&!Di(e)}},{key:"_getTouchingViewTextNode",value:function(e,t){var n,r=new Gr({startPosition:t?Jr.createAfter(e):Jr.createBefore(e),direction:t?"forward":"backward"}),i=d(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.item.is("containerElement"))return null;if(o.item.is("br"))return null;if(o.item.is("textProxy"))return o.item}}catch(a){i.e(a)}finally{i.f()}return null}},{key:"_getTouchingInlineDomNode",value:function(e,t){if(!e.parentNode)return null;var n=t?"nextNode":"previousNode",r=e.ownerDocument,i=eo(e)[0],o=r.createTreeWalker(i,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return Ui(e)||"BR"==e.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});o.currentNode=e;var a=o[n]();if(null!==a){var s=function(e,t){for(var n=eo(e),r=eo(t),i=0;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}(e,a);if(s&&!ro(e,this.blockElements,s)&&!ro(a,this.blockElements,s))return a}return null}}]),e}();function ro(e,t,n){var r=eo(e);return n&&(r=r.slice(r.indexOf(n)+1)),r.some((function(e){return e.tagName&&t.includes(e.tagName.toLowerCase())}))}function io(e,t){for(;e&&e!=Xi.document;)t(e),e=e.parentNode}function oo(e){var t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t}var ao=Mr({},B,{listenTo:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(Hi(e)||oo(e)){var o=this._getProxyEmitter(e)||new so(e);o.attach.apply(o,r),e=o}(t=B.listenTo).call.apply(t,[this,e].concat(r))},stopListening:function(e,t,n){if(Hi(e)||oo(e)){var r=this._getProxyEmitter(e);if(!r)return;e=r}B.stopListening.call(this,e,t,n),e instanceof so&&e.detach(t)},_getProxyEmitter:function(e){return function(e,t){return e[N]&&e[N][t]?e[N][t].emitter:null}(this,co(e))}}),so=function e(t){v(this,e),V(this,co(t)),this._domNode=t};function co(e){return e["data-ck-expando"]||(e["data-ck-expando"]=F())}Mr(so.prototype,B,{attach:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._domListeners||!this._domListeners[e]){var r=this._createDomListener(e,!!n.useCapture);this._domNode.addEventListener(e,r,!!n.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[e]=r}},detach:function(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener:function(e,t){var n=this,r=function(t){n.fire(e,t)};return r.removeListener=function(){n._domNode.removeEventListener(e,r,t),delete n._domListeners[e]},r}});var uo=function(){function e(t){v(this,e),this.view=t,this.document=t.document,this.isEnabled=!1}return p(e,[{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1}},{key:"destroy",value:function(){this.disable(),this.stopListening()}}]),e}();H(uo,ao);var lo="__lodash_hash_undefined__",fo=function(e){return this.__data__.set(e,lo),this},ho=function(e){return this.__data__.has(e)};function vo(e){var t=-1,n=e?e.length:0;for(this.__data__=new We;++t<n;)this.add(e[t])}vo.prototype.add=vo.prototype.push=fo,vo.prototype.has=ho;var po=vo,go=function(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},mo=1,yo=2,ko=function(e,t,n,r,i,o){var a=i&yo,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u)return u==t;var l=-1,f=!0,h=i&mo?new po:void 0;for(o.set(e,t);++l<s;){var d=e[l],v=t[l];if(r)var p=a?r(v,d,l,t,e,o):r(d,v,l,e,t,o);if(void 0!==p){if(p)continue;f=!1;break}if(h){if(!go(t,(function(e,t){if(!h.has(t)&&(d===e||n(d,e,r,i,o)))return h.add(t)}))){f=!1;break}}else if(d!==v&&!n(d,v,r,i,o)){f=!1;break}}return o.delete(e),f},bo=1,wo=2,_o="[object Boolean]",xo="[object Date]",Ao="[object Error]",Co="[object Map]",To="[object Number]",Oo="[object RegExp]",So="[object Set]",Po="[object String]",Eo="[object Symbol]",Ro="[object ArrayBuffer]",Io="[object DataView]",Mo=cn?cn.prototype:void 0,Fo=Mo?Mo.valueOf:void 0,Do=function(e,t,n,r,i,o,a){switch(n){case Io:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ro:return!(e.byteLength!=t.byteLength||!r(new Jt(e),new Jt(t)));case _o:case xo:return+e==+t;case Ao:return e.name==t.name&&e.message==t.message;case To:return e!=+e?t!=+t:e==+t;case Oo:case Po:return e==t+"";case Co:var s=en;case So:var c=o&wo;if(s||(s=an),e.size!=t.size&&!c)return!1;var u=a.get(e);return u?u==t:(o|=bo,a.set(e,t),ko(s(e),s(t),r,i,o,a));case Eo:if(Fo)return Fo.call(e)==Fo.call(t)}return!1},No=2,jo=function(e,t,n,r,i,o){var a=i&No,s=At(e),c=s.length;if(c!=At(t).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in t:Xe(t,l)))return!1}var f=o.get(e);if(f)return f==t;var h=!0;o.set(e,t);for(var d=a;++u<c;){var v=e[l=s[u]],p=t[l];if(r)var g=a?r(p,v,l,t,e,o):r(v,p,l,e,t,o);if(!(void 0===g?v===p||n(v,p,r,i,o):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(h=!1)}return o.delete(e),h},Bo={};Bo["[object Float32Array]"]=Bo["[object Float64Array]"]=Bo["[object Int8Array]"]=Bo["[object Int16Array]"]=Bo["[object Int32Array]"]=Bo["[object Uint8Array]"]=Bo["[object Uint8ClampedArray]"]=Bo["[object Uint16Array]"]=Bo["[object Uint32Array]"]=!0,Bo["[object Arguments]"]=Bo["[object Array]"]=Bo["[object ArrayBuffer]"]=Bo["[object Boolean]"]=Bo["[object DataView]"]=Bo["[object Date]"]=Bo["[object Error]"]=Bo["[object Function]"]=Bo["[object Map]"]=Bo["[object Number]"]=Bo["[object Object]"]=Bo["[object RegExp]"]=Bo["[object Set]"]=Bo["[object String]"]=Bo["[object WeakMap]"]=!1;var Vo=Object.prototype.toString,Lo=function(e){return _(e)&&ot(e.length)&&!!Bo[Vo.call(e)]},zo=2,Wo="[object Arguments]",qo="[object Array]",Uo="[object Object]",Ho=Object.prototype.hasOwnProperty,$o=function(e,t,n,r,i,o){var a=vt(e),s=vt(t),c=qo,u=qo;a||(c=(c=$t(e))==Wo?Uo:c),s||(u=(u=$t(t))==Wo?Uo:u);var l=c==Uo&&!w(e),f=u==Uo&&!w(t),h=c==u;if(h&&!l)return o||(o=new $e),a||Lo(e)?ko(e,t,n,r,i,o):Do(e,t,c,n,r,i,o);if(!(i&zo)){var d=l&&Ho.call(e,"__wrapped__"),v=f&&Ho.call(t,"__wrapped__");if(d||v){var p=d?e.value():e,g=v?t.value():t;return o||(o=new $e),n(p,g,r,i,o)}}return!!h&&(o||(o=new $e),jo(e,t,n,r,i,o))},Ko=function e(t,n,r,i,o){return t===n||(null==t||null==n||!ae(t)&&!_(n)?t!=t&&n!=n:$o(t,n,e,r,i,o))},Go=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Ko(e,t,n):!!r},Jo=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e))._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},r.domConverter=e.domConverter,r.renderer=e._renderer,r._domElements=[],r._mutationObserver=new window.MutationObserver(r._onMutations.bind(o(r))),r}return p(n,[{key:"flush",value:function(){this._onMutations(this._mutationObserver.takeRecords())}},{key:"observe",value:function(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}},{key:"enable",value:function(){u(l(n.prototype),"enable",this).call(this);var e,t=d(this._domElements);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._mutationObserver.observe(r,this._config)}}catch(i){t.e(i)}finally{t.f()}}},{key:"disable",value:function(){u(l(n.prototype),"disable",this).call(this),this._mutationObserver.disconnect()}},{key:"destroy",value:function(){u(l(n.prototype),"destroy",this).call(this),this._mutationObserver.disconnect()}},{key:"_onMutations",value:function(e){if(0!==e.length){var t,n=this.domConverter,r=new Map,i=new Set,o=d(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;if("childList"===a.type){var s=n.mapDomToView(a.target);if(s&&s.is("uiElement"))continue;s&&!this._isBogusBrMutation(a)&&i.add(s)}}}catch(P){o.e(P)}finally{o.f()}var c,u=d(e);try{for(u.s();!(c=u.n()).done;){var l=c.value,f=n.mapDomToView(l.target);if((!f||!f.is("uiElement"))&&"characterData"===l.type){var h=n.findCorrespondingViewText(l.target);h&&!i.has(h.parent)?r.set(h,{type:"text",oldText:h.data,newText:ji(l.target),node:h}):!h&&Di(l.target)&&i.add(n.mapDomToView(l.target.parentNode))}}}catch(P){u.e(P)}finally{u.f()}var v,p=[],g=d(r.values());try{for(g.s();!(v=g.n()).done;){var m=v.value;this.renderer.markToSync("text",m.node),p.push(m)}}catch(P){g.e(P)}finally{g.f()}var y,k=d(i);try{for(k.s();!(y=k.n()).done;){var b=y.value,w=n.mapViewToDom(b),_=Array.from(b.getChildren()),x=Array.from(n.domChildrenToView(w,{withChildren:!1}));Go(_,x,S)||(this.renderer.markToSync("children",b),p.push({type:"children",oldChildren:_,newChildren:x,node:b}))}}catch(P){k.e(P)}finally{k.f()}var A=e[0].target.ownerDocument.getSelection(),C=null;if(A&&A.anchorNode){var T=n.domPositionToView(A.anchorNode,A.anchorOffset),O=n.domPositionToView(A.focusNode,A.focusOffset);T&&O&&(C=new Zr(T)).setFocus(O)}this.document.fire("mutations",p,C),this.view.render()}function S(e,t){if(!Array.isArray(e))return e===t||!(!e.is("text")||!t.is("text"))&&e.data===t.data}}},{key:"_isBogusBrMutation",value:function(e){var t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}]),n}(uo),Yo=function(){function e(t,n,r){v(this,e),this.view=t,this.document=t.document,this.domEvent=n,this.domTarget=n.target,Mr(this,r)}return p(e,[{key:"target",get:function(){return this.view.domConverter.mapDomToView(this.domTarget)}},{key:"preventDefault",value:function(){this.domEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.domEvent.stopPropagation()}}]),e}(),Qo=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).useCapture=!1,r}return p(n,[{key:"observe",value:function(e){var t=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach((function(n){t.listenTo(e,n,(function(e,n){t.isEnabled&&t.onDomEvent(n)}),{useCapture:t.useCapture})}))}},{key:"fire",value:function(e,t,n){this.isEnabled&&this.document.fire(e,new Yo(this.view,t,n))}}]),n}(uo),Xo=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).domEventType=["keydown","keyup"],r}return p(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,get keystroke(){return vi(this)}})}}]),n}(Qo),Zo=Date.now,ea="Expected a function",ta=Math.max,na=Math.min,ra=function(e,t,n){var r,i,o,a,s,c=0,u=0,l=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(ea);function d(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function v(e){var n=e-c;return!c||n>=t||n<0||f&&e-u>=o}function p(){var e=Zo();if(v(e))return g(e);s=setTimeout(p,function(e){var n=t-(e-c);return f?na(n,o-(e-u)):n}(e))}function g(e){return clearTimeout(s),s=void 0,h&&r?d(e):(r=i=void 0,a)}function m(){var e=Zo(),n=v(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(p,t),l?d(e):a}(c);if(f)return clearTimeout(s),s=setTimeout(p,t),d(c)}return void 0===s&&(s=setTimeout(p,t)),a}return t=vr(t)||0,ae(n)&&(l=!!n.leading,o=(f="maxWait"in n)?ta(vr(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),c=u=0,r=i=s=void 0},m.flush=function(){return void 0===s?a:g(Zo())},m},ia=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e))._fireSelectionChangeDoneDebounced=ra((function(e){return r.document.fire("selectionChangeDone",e)}),200),r}return p(n,[{key:"observe",value:function(){var e=this,t=this.document;t.on("keydown",(function(n,r){t.selection.isFake&&function(e){return e==di.arrowright||e==di.arrowleft||e==di.arrowup||e==di.arrowdown}(r.keyCode)&&e.isEnabled&&(r.preventDefault(),e._handleSelectionMove(r.keyCode))}),{priority:"lowest"})}},{key:"destroy",value:function(){u(l(n.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionMove",value:function(e){var t=this.document.selection,n=new Zr(t.getRanges(),{backward:t.isBackward,fake:!1});e!=di.arrowleft&&e!=di.arrowup||n.setTo(n.getFirstPosition()),e!=di.arrowright&&e!=di.arrowdown||n.setTo(n.getLastPosition());var r={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}]),n}(uo),oa=n(1),aa=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).mutationObserver=e.getObserver(Jo),r.selection=r.document.selection,r.domConverter=e.domConverter,r._documents=new WeakSet,r._fireSelectionChangeDoneDebounced=ra((function(e){return r.document.fire("selectionChangeDone",e)}),200),r._clearInfiniteLoopInterval=setInterval((function(){return r._clearInfiniteLoop()}),1e3),r._loopbackCounter=0,r}return p(n,[{key:"observe",value:function(e){var t=this,n=e.ownerDocument;this._documents.has(n)||(this.listenTo(n,"selectionchange",(function(){t._handleSelectionChange(n)})),this._documents.add(n))}},{key:"destroy",value:function(){u(l(n.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionChange",value:function(e){if(this.isEnabled&&(this.document.isFocused||this.document.isReadOnly)){this.mutationObserver.flush();var t=e.defaultView.getSelection(),n=this.domConverter.domSelectionToView(t);if(!this.selection.isEqual(n)||!this.domConverter.isDomSelectionCorrect(t))if(++this._loopbackCounter>60)oa.a.warn("selectionchange-infinite-loop: Selection change observer detected an infinite rendering loop.");else if(this.selection.isSimilar(n))this.view.render();else{var r={oldSelection:this.selection,newSelection:n,domSelection:t};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}},{key:"_clearInfiniteLoop",value:function(){this._loopbackCounter=0}}]),n}(uo),sa=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),(r=t.call(this,e)).domEventType=["focus","blur"],r.useCapture=!0;var i=r.document;return i.on("focus",(function(){i.isFocused=!0,r._renderTimeoutId=setTimeout((function(){return e.render()}),50)})),i.on("blur",(function(t,n){var r=i.selection.editableElement;null!==r&&r!==n.target||(i.isFocused=!1,e.render())})),r}return p(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}},{key:"destroy",value:function(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),u(l(n.prototype),"destroy",this).call(this)}}]),n}(Qo),ca=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),(r=t.call(this,e)).domEventType=["compositionstart","compositionupdate","compositionend"];var i=r.document;return i.on("compositionstart",(function(){i.isComposing=!0})),i.on("compositionend",(function(){i.isComposing=!1})),r}return p(n,[{key:"onDomEvent",value:function(e){this.fire(e.type,e)}}]),n}(Qo);function ua(e){return"[object Range]"==Object.prototype.toString.apply(e)}var la=function(){function e(t){v(this,e);var n=ua(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),to(t)||n){var r=n?t.startContainer:t;r.ownerDocument&&r.ownerDocument.body.contains(r)||oa.a.warn("rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.",{source:t}),ha(this,n?e.getDomRangeRects(t)[0]:t.getBoundingClientRect())}else if(oo(t)){var i=t.innerWidth,o=t.innerHeight;ha(this,{top:0,right:i,bottom:o,left:0,width:i,height:o})}else ha(this,t)}return p(e,[{key:"clone",value:function(){return new e(this)}},{key:"moveTo",value:function(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}},{key:"moveBy",value:function(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}},{key:"getIntersection",value:function(t){var n={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0?null:new e(n)}},{key:"getIntersectionArea",value:function(e){var t=this.getIntersection(e);return t?t.getArea():0}},{key:"getArea",value:function(){return this.width*this.height}},{key:"getVisible",value:function(){var t=this._source,n=this.clone();if(!da(t))for(var r=t.parentNode||t.commonAncestorContainer;r&&!da(r);){var i=new e(r),o=n.getIntersection(i);if(!o)return null;o.getArea()<n.getArea()&&(n=o),r=r.parentNode}return n}},{key:"isEqual",value:function(e){var t,n=d(fa);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this[r]!==e[r])return!1}}catch(i){n.e(i)}finally{n.f()}return!0}},{key:"contains",value:function(e){var t=this.getIntersection(e);return!(!t||!t.isEqual(e))}},{key:"excludeScrollbarsAndBorders",value:function(){var e,t,n=this._source;if(oo(n))e=n.innerWidth-n.document.documentElement.clientWidth,t=n.innerHeight-n.document.documentElement.clientHeight;else{var r=function(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}(this._source);e=n.offsetWidth-n.clientWidth,t=n.offsetHeight-n.clientHeight,this.moveBy(r.left,r.top)}return this.width-=e,this.right-=e,this.height-=t,this.bottom-=t,this}}],[{key:"getDomRangeRects",value:function(t){var n=[],r=Array.from(t.getClientRects());if(r.length){var i,o=d(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.push(new e(a))}}catch(u){o.e(u)}finally{o.f()}}else{var s=t.startContainer;Ui(s)&&(s=s.parentNode);var c=new e(s.getBoundingClientRect());c.right=c.left,c.width=0,n.push(c)}return n}}]),e}(),fa=["top","right","bottom","left","width","height"];function ha(e,t){var n,r=d(fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i]=t[i]}}catch(o){r.e(o)}finally{r.f()}}function da(e){return!!to(e)&&e===e.ownerDocument.body}function va(e){for(var t=e.target,n=e.viewportOffset,r=void 0===n?0:n,i=wa(t),o=i,a=null;o;){ga(_a(o==i?t:a),(function(){return xa(t,o)}));var s=xa(t,o);if(pa(o,s,r),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function pa(e,t,n){var r=t.clone().moveBy(0,n),i=t.clone().moveBy(0,-n),o=new la(e).excludeScrollbarsAndBorders();if(![i,r].every((function(e){return o.contains(e)}))){var a=e.scrollX,s=e.scrollY;ya(i,o)?s-=o.top-t.top+n:ma(r,o)&&(s+=t.bottom-o.bottom+n),ka(t,o)?a-=o.left-t.left+n:ba(t,o)&&(a+=t.right-o.right+n),e.scrollTo(a,s)}}function ga(e,t){for(var n,r,i=wa(e);e!=i.document.body;)r=t(),(n=new la(e).excludeScrollbarsAndBorders()).contains(r)||(ya(r,n)?e.scrollTop-=n.top-r.top:ma(r,n)&&(e.scrollTop+=r.bottom-n.bottom),ka(r,n)?e.scrollLeft-=n.left-r.left:ba(r,n)&&(e.scrollLeft+=r.right-n.right)),e=e.parentNode}function ma(e,t){return e.bottom>t.bottom}function ya(e,t){return e.top<t.top}function ka(e,t){return e.left<t.left}function ba(e,t){return e.right>t.right}function wa(e){return ua(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function _a(e){if(ua(e)){var t=e.commonAncestorContainer;return Ui(t)&&(t=t.parentNode),t}return e.parentNode}function xa(e,t){var n=wa(e),r=new la(e);if(n===t)return r;for(var i=n;i!=t;){var o=i.frameElement,a=new la(o).excludeScrollbarsAndBorders();r.moveBy(a.left,a.top),i=i.parent}return r}Object.assign({},{scrollViewportToShowTarget:va,scrollAncestorsToShowTarget:function(e){ga(_a(e),(function(){return new la(e)}))}});var Aa=function(){function e(){var t=this;v(this,e),this.document=new ni,this.domConverter=new no,this._renderer=new Ji(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this.domRoots=new Map,this._observers=new Map,this._ongoingChange=!1,this._renderingInProgress=!1,this._postFixersInProgress=!1,this._writer=new bi(this.document),this.addObserver(Jo),this.addObserver(aa),this.addObserver(sa),this.addObserver(Xo),this.addObserver(ia),this.addObserver(ca),function(e){e.document.on("keydown",Li)}(this),mi(this),this.on("render",(function(){t._render(),t.document.fire("layoutChanged")}))}return p(e,[{key:"attachDomRoot",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",r=this.document.getRoot(n);r._name=e.tagName.toLowerCase(),this.domRoots.set(n,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",(function(e,n){return t._renderer.markToSync("children",n)})),r.on("change:attributes",(function(e,n){return t._renderer.markToSync("attributes",n)})),r.on("change:text",(function(e,n){return t._renderer.markToSync("text",n)}));var i,o=d(this._observers.values());try{for(o.s();!(i=o.n()).done;)i.value.observe(e,n)}catch(a){o.e(a)}finally{o.f()}}},{key:"getDomRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.domRoots.get(e)}},{key:"addObserver",value:function(e){var t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);var n,r=d(this.domRoots);try{for(r.s();!(n=r.n()).done;){var i=h(n.value,2),o=i[0],a=i[1];t.observe(a,o)}}catch(s){r.e(s)}finally{r.f()}return t.enable(),t}},{key:"getObserver",value:function(e){return this._observers.get(e)}},{key:"disableObservers",value:function(){var e,t=d(this._observers.values());try{for(t.s();!(e=t.n()).done;)e.value.disable()}catch(n){t.e(n)}finally{t.f()}}},{key:"enableObservers",value:function(){var e,t=d(this._observers.values());try{for(t.s();!(e=t.n()).done;)e.value.enable()}catch(n){t.e(n)}finally{t.f()}}},{key:"scrollToTheSelection",value:function(){var e=this.document.selection.getFirstRange();e&&va({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}},{key:"focus",value:function(){if(!this.document.isFocused){var e=this.document.selection.editableElement;e?(this.domConverter.focus(e),this.render()):oa.a.warn("view-focus-no-selection: There is no selection in any editable to focus.")}}},{key:"change",value:function(e){if(this._renderingInProgress||this._postFixersInProgress)throw new R.b("cannot-change-view-tree: Attempting to make changes to the view when it is in incorrect state: rendering or post-fixers are in progress. This may cause some unexpected behaviour and inconsistency between the DOM and the view.");this._ongoingChange?e(this._writer):(this._ongoingChange=!0,e(this._writer),this._ongoingChange=!1,this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render"))}},{key:"render",value:function(){this.change((function(){}))}},{key:"destroy",value:function(){var e,t=d(this._observers.values());try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(n){t.e(n)}finally{t.f()}this.stopListening()}},{key:"_render",value:function(){this._renderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this._renderingInProgress=!1}}]),e}();function Ca(e){return P(e)?Gn(e):new Map(e)}H(Aa,Br);var Ta=function(){function e(t){v(this,e),this.parent=null,this._attrs=Ca(t)}return p(e,[{key:"index",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new R.b("model-node-not-found-in-parent: The node's parent does not contain this node.");return e}},{key:"startOffset",get:function(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new R.b("model-node-not-found-in-parent: The node's parent does not contain this node.");return e}},{key:"offsetSize",get:function(){return 1}},{key:"endOffset",get:function(){return this.parent?this.startOffset+this.offsetSize:null}},{key:"nextSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}},{key:"previousSibling",get:function(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"document",get:function(){return this.root==this?null:this.root.document||null}},{key:"getPath",value:function(){for(var e=[],t=this;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"getCommonAncestor",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(t),r=e.getAncestors(t),i=0;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}},{key:"isBefore",value:function(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),n=e.getPath(),r=Un(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}},{key:"isAfter",value:function(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"toJSON",value:function(){var e={};return this._attrs.size&&(e.attributes=f(this._attrs)),e}},{key:"_clone",value:function(){return new e(this._attrs)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_setAttribute",value:function(e,t){this._attrs.set(e,t)}},{key:"_setAttributesTo",value:function(e){this._attrs=Ca(e)}},{key:"_removeAttribute",value:function(e){return this._attrs.delete(e)}},{key:"_clearAttributes",value:function(){this._attrs.clear()}},{key:"is",value:function(e){return"node"==e}}]),e}(),Oa=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,r))._data=e||"",i}return p(n,[{key:"offsetSize",get:function(){return this.data.length}},{key:"data",get:function(){return this._data}},{key:"is",value:function(e){return"text"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"toJSON",value:function(){var e=u(l(n.prototype),"toJSON",this).call(this);return e.data=this.data,e}},{key:"_clone",value:function(){return new n(this.data,this.getAttributes())}}],[{key:"fromJSON",value:function(e){return new n(e.data,e.attributes)}}]),n}(Ta),Sa=function(){function e(t,n,r){if(v(this,e),this.textNode=t,n<0||n>t.offsetSize)throw new R.b("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.");if(r<0||n+r>t.offsetSize)throw new R.b("model-textproxy-wrong-length: Given length value is incorrect.");this.data=t.data.substring(n,n+r),this.offsetInText=n}return p(e,[{key:"startOffset",get:function(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}},{key:"offsetSize",get:function(){return this.data.length}},{key:"endOffset",get:function(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}},{key:"isPartial",get:function(){return this.offsetSize!==this.textNode.offsetSize}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}},{key:"is",value:function(e){return"textProxy"==e}},{key:"getPath",value:function(){var e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}},{key:"getAncestors",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},t=[],n=e.includeSelf?this:this.parent;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}},{key:"hasAttribute",value:function(e){return this.textNode.hasAttribute(e)}},{key:"getAttribute",value:function(e){return this.textNode.getAttribute(e)}},{key:"getAttributes",value:function(){return this.textNode.getAttributes()}},{key:"getAttributeKeys",value:function(){return this.textNode.getAttributeKeys()}}]),e}(),Pa=function(){function e(t){v(this,e),this._nodes=[],t&&this._insertNodes(0,t)}return p(e,[{key:Symbol.iterator,value:function(){return this._nodes[Symbol.iterator]()}},{key:"length",get:function(){return this._nodes.length}},{key:"maxOffset",get:function(){return this._nodes.reduce((function(e,t){return e+t.offsetSize}),0)}},{key:"getNode",value:function(e){return this._nodes[e]||null}},{key:"getNodeIndex",value:function(e){var t=this._nodes.indexOf(e);return-1==t?null:t}},{key:"getNodeStartOffset",value:function(e){var t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce((function(e,t){return e+t.offsetSize}),0)}},{key:"indexToOffset",value:function(e){if(e==this._nodes.length)return this.maxOffset;var t=this._nodes[e];if(!t)throw new R.b("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.");return this.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(e){var t,n=0,r=d(this._nodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(e>=n&&e<n+i.offsetSize)return this.getNodeIndex(i);n+=i.offsetSize}}catch(o){r.e(o)}finally{r.f()}if(n!=e)throw new R.b("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",{offset:e,nodeList:this});return this.length}},{key:"_insertNodes",value:function(e,t){var n,r,i=d(t);try{for(i.s();!(r=i.n()).done;)if(!(r.value instanceof Ta))throw new R.b("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.")}catch(o){i.e(o)}finally{i.f()}(n=this._nodes).splice.apply(n,[e,0].concat(f(t)))}},{key:"_removeNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._nodes.splice(e,t)}},{key:"toJSON",value:function(){return this._nodes.map((function(e){return e.toJSON()}))}}]),e}(),Ea=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,r)).name=e,o._children=new Pa,i&&o._insertChild(0,i),o}return p(n,[{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"is",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"element"==e&&t==this.name:"element"==e||e==this.name||u(l(n.prototype),"is",this).call(this,e)}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"getNodeByPath",value:function(e){var t,n=this,r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getChild(n.offsetToIndex(i))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"toJSON",value:function(){var e=u(l(n.prototype),"toJSON",this).call(this);if(e.name=this.name,this._children.length>0){e.children=[];var t,r=d(this._children);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.children.push(i.toJSON())}}catch(o){r.e(o)}finally{r.f()}}return e}},{key:"_clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Array.from(this._children).map((function(e){return e._clone(!0)})):null;return new n(this.name,this.getAttributes(),e)}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,r=function(e){return"string"==typeof e?[new Oa(e)]:(Jn(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new Oa(e):e instanceof Sa?new Oa(e.data,e.getAttributes()):e})))}(t),i=d(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;null!==o.parent&&o._remove(),o.parent=this}}catch(a){i.e(a)}finally{i.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._children._removeNodes(e,n),i=d(r);try{for(i.s();!(t=i.n()).done;)t.value.parent=null}catch(o){i.e(o)}finally{i.f()}return r}}],[{key:"fromJSON",value:function(e){var t=null;if(e.children){t=[];var r,i=d(e.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.name?t.push(n.fromJSON(o)):t.push(Oa.fromJSON(o))}}catch(a){i.e(a)}finally{i.f()}}return new n(e.name,e.attributes,t)}}]),n}(Ta),Ra=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,e),!t.boundaries&&!t.startPosition)throw new R.b("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.");var n=t.direction||"forward";if("forward"!=n&&"backward"!=n)throw new R.b("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",{direction:n});this.direction=n,this.boundaries=t.boundaries||null,t.startPosition?this.position=Fa.createFromPosition(t.startPosition):this.position=Fa.createFromPosition(this.boundaries["backward"==this.direction?"end":"start"]),this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}return p(e,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(e){var t,n,r,i;do{var o;r=this.position,i=this._visitedParent,t=(o=this.next()).done,n=o.value}while(!t&&e(n));t||(this.position=r,this._visitedParent=i)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var e=this.position,t=Fa.createFromPosition(this.position),n=this._visitedParent;if(null===n.parent&&t.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var r=t.textNode?t.textNode:t.nodeAfter;if(r instanceof Ea)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=r),this.position=t,Ia("elementStart",r,e,t,1);if(r instanceof Oa){var i;if(this.singleCharacters)i=1;else{var o=r.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<o&&(o=this.boundaries.end.offset),i=o-t.offset}var a=t.offset-r.startOffset,s=new Sa(r,a,i);return t.offset+=i,this.position=t,Ia("text",s,e,t,i)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Ia("elementEnd",n,e,t)}},{key:"_previous",value:function(){var e=this.position,t=Fa.createFromPosition(this.position),n=this._visitedParent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var r=t.textNode?t.textNode:t.nodeBefore;if(r instanceof Ea)return t.offset--,this.shallow?(this.position=t,Ia("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this.position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():Ia("elementEnd",r,e,t));if(r instanceof Oa){var i;if(this.singleCharacters)i=1;else{var o=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>o&&(o=this.boundaries.start.offset),i=t.offset-o}var a=t.offset-r.startOffset,s=new Sa(r,a-i,i);return t.offset-=i,this.position=t,Ia("text",s,e,t,i)}return t.path.pop(),this.position=t,this._visitedParent=n.parent,Ia("elementStart",n,e,t,1)}}]),e}();function Ia(e,t,n,r,i){return{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:i}}}var Ma=function(e){var t=e?e.length:0;return t?e[t-1]:void 0},Fa=function(){function e(t,n){if(v(this,e),!t.is("element")&&!t.is("documentFragment"))throw new R.b("model-position-root-invalid: Position root invalid.");if(!(n instanceof Array)||0===n.length)throw new R.b("model-position-path-incorrect: Position path must be an array with at least one item.",{path:n});n=t.getPath().concat(n),t=t.root,this.root=t,this.path=n}return p(e,[{key:"offset",get:function(){return Ma(this.path)},set:function(e){this.path[this.path.length-1]=e}},{key:"parent",get:function(){for(var e=this.root,t=0;t<this.path.length-1;t++)e=e.getChild(e.offsetToIndex(this.path[t]));return e}},{key:"index",get:function(){return this.parent.offsetToIndex(this.offset)}},{key:"textNode",get:function(){var e=this.parent.getChild(this.index);return e instanceof Oa&&e.startOffset<this.offset?e:null}},{key:"nodeAfter",get:function(){return null===this.textNode?this.parent.getChild(this.index):null}},{key:"nodeBefore",get:function(){return null===this.textNode?this.parent.getChild(this.index-1):null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){return this.offset==this.parent.maxOffset}},{key:"compareWith",value:function(e){if(this.root!=e.root)return"different";var t=Un(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}},{key:"getLastMatchingPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.startPosition=this;var n=new Ra(t);return n.skip(e),n.position}},{key:"getParentPath",value:function(){return this.path.slice(0,-1)}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonPath",value:function(e){if(this.root!=e.root)return[];var t=Un(this.path,e.path),n="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}},{key:"getCommonAncestor",value:function(e){for(var t=this.getAncestors(),n=e.getAncestors(),r=0;t[r]==n[r]&&t[r];)r++;return 0===r?null:t[r-1]}},{key:"getShiftedBy",value:function(t){var n=e.createFromPosition(this),r=n.offset+t;return n.offset=r<0?0:r,n}},{key:"isAfter",value:function(e){return"after"==this.compareWith(e)}},{key:"isBefore",value:function(e){return"before"==this.compareWith(e)}},{key:"isEqual",value:function(e){return"same"==this.compareWith(e)}},{key:"isTouching",value:function(t){var n=null,r=null;switch(this.compareWith(t)){case"same":return!0;case"before":n=e.createFromPosition(this),r=e.createFromPosition(t);break;case"after":n=e.createFromPosition(t),r=e.createFromPosition(this);break;default:return!1}for(var i=n.parent;n.path.length+r.path.length;){if(n.isEqual(r))return!0;if(n.path.length>r.path.length){if(n.offset!==i.maxOffset)return!1;n.path=n.path.slice(0,-1),i=i.parent,n.offset++}else{if(0!==r.offset)return!1;r.path=r.path.slice(0,-1)}}}},{key:"_getTransformedByDeletion",value:function(t,n){var r=e.createFromPosition(this);if(this.root!=t.root)return r;if("same"==Un(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+n>this.offset)return null;r.offset-=n}}else if("prefix"==Un(t.getParentPath(),this.getParentPath())){var i=t.path.length-1;if(t.offset<=this.path[i]){if(t.offset+n>this.path[i])return null;r.path[i]-=n}}return r}},{key:"_getTransformedByInsertion",value:function(t,n,r){var i=e.createFromPosition(this);if(this.root!=t.root)return i;if("same"==Un(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&r)&&(i.offset+=n);else if("prefix"==Un(t.getParentPath(),this.getParentPath())){var o=t.path.length-1;t.offset<=this.path[o]&&(i.path[o]+=n)}return i}},{key:"_getTransformedByMove",value:function(e,t,n,r,i){var o=this._getTransformedByDeletion(e,n);return t=t._getTransformedByDeletion(e,n),null===o||i&&o.isEqual(e)?this._getCombined(e,t):o._getTransformedByInsertion(t,n,r)}},{key:"_getCombined",value:function(t,n){var r=t.path.length-1,i=e.createFromPosition(n);return i.offset=i.offset+this.path[r]-t.offset,i.path=i.path.concat(this.path.slice(r+1)),i}}],[{key:"createAt",value:function(t,n){if(t instanceof e)return this.createFromPosition(t);var r=t;if("end"==n)n=r.maxOffset;else{if("before"==n)return this.createBefore(r);if("after"==n)return this.createAfter(r);n||(n=0)}return this.createFromParentAndOffset(r,n)}},{key:"createAfter",value:function(e){if(!e.parent)throw new R.b("model-position-after-root: You cannot make a position after root.",{root:e});return this.createFromParentAndOffset(e.parent,e.endOffset)}},{key:"createBefore",value:function(e){if(!e.parent)throw new R.b("model-position-before-root: You cannot make a position before root.",{root:e});return this.createFromParentAndOffset(e.parent,e.startOffset)}},{key:"createFromParentAndOffset",value:function(e,t){if(!e.is("element")&&!e.is("documentFragment"))throw new R.b("model-position-parent-incorrect: Position parent have to be a element or document fragment.");var n=e.getPath();return n.push(t),new this(e.root,n)}},{key:"createFromPosition",value:function(e){return new this(e.root,e.path.slice())}},{key:"fromJSON",value:function(t,n){if("$graveyard"===t.root)return new e(n.graveyard,t.path);if(!n.getRoot(t.root))throw new R.b("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",{rootName:t.root});return new e(n.getRoot(t.root),t.path)}}]),e}(),Da=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(this,e),this.start=Fa.createFromPosition(t),this.end=n?Fa.createFromPosition(n):Fa.createFromPosition(t)}return p(e,[{key:Symbol.iterator,value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(new Ra({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return this.start.parent===this.end.parent}},{key:"root",get:function(){return this.start.root}},{key:"containsPosition",value:function(e){return e.isAfter(this.start)&&e.isBefore(this.end)}},{key:"containsRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.isCollapsed&&(t=!1);var n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}},{key:"containsItem",value:function(e){var t=Fa.createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}},{key:"isEqual",value:function(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}},{key:"isIntersecting",value:function(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}},{key:"getDifference",value:function(t){var n=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&n.push(new e(this.start,t.start)),this.containsPosition(t.end)&&n.push(new e(t.end,this.end))):n.push(e.createFromRange(this)),n}},{key:"getIntersection",value:function(t){if(this.isIntersecting(t)){var n=this.start,r=this.end;return this.containsPosition(t.start)&&(n=t.start),this.containsPosition(t.end)&&(r=t.end),new e(n,r)}return null}},{key:"getMinimalFlatRanges",value:function(){for(var t=[],n=this.start.getCommonPath(this.end).length,r=Fa.createFromPosition(this.start),i=r.parent;r.path.length>n+1;){var o=i.maxOffset-r.offset;0!==o&&t.push(new e(r,r.getShiftedBy(o))),r.path=r.path.slice(0,-1),r.offset++,i=i.parent}for(;r.path.length<=this.end.path.length;){var a=this.end.path[r.path.length-1],s=a-r.offset;0!==s&&t.push(new e(r,r.getShiftedBy(s))),r.offset=a,r.path.push(0)}return t}},{key:"getWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.boundaries=this,new Ra(e)}},{key:"getItems",value:s.mark((function e(){var t,n,r,i,o,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,t.ignoreElementEnd=!0,n=new Ra(t),r=d(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return o=i.value,e.next=10,o.item;case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])}))},{key:"getPositions",value:s.mark((function e(){var t,n,r,i,o,a=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.length>0&&void 0!==a[0]?a[0]:{}).boundaries=this,n=new Ra(t),e.next=5,n.position;case 5:r=d(n),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=12,o.nextPosition;case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[6,16,19,22]])}))},{key:"getTransformedByDelta",value:function(t){var n,r=[e.createFromRange(this)],i=new Set(["insert","move","remove","reinsert"]),o=d(t.operations);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(i.has(a.type))for(var s=0;s<r.length;s++){var c=void 0;c="insert"==a.type?r[s]._getTransformedByDocumentChange(a.type,t.type,a.position,a.nodes.maxOffset):r[s]._getTransformedByDocumentChange(a.type,t.type,a.targetPosition,a.howMany,a.sourcePosition),r.splice.apply(r,[s,1].concat(f(c))),s+=c.length-1}}}catch(u){o.e(u)}finally{o.f()}return r}},{key:"getTransformedByDeltas",value:function(t){var n,r=[e.createFromRange(this)],i=d(t);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,a=0;a<r.length;a++){var s=r[a].getTransformedByDelta(o);r.splice.apply(r,[a,1].concat(f(s))),a+=s.length-1}}catch(v){i.e(v)}finally{i.f()}for(var c=0;c<r.length;c++)for(var u=r[c],l=c+1;l<r.length;l++){var h=r[l];(u.containsRange(h)||h.containsRange(u)||u.isEqual(h))&&r.splice(l,1)}return r}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"_getTransformedByDocumentChange",value:function(t,n,r,i,o){if("insert"==t)return this._getTransformedByInsertion(r,i,!1,!1);var a=e.createFromPositionAndShift(o,i);if("merge"==n&&this.isCollapsed&&(this.start.isEqual(a.start)||this.start.isEqual(a.end))){var s=this.start.offset-a.start.offset;return[new e(r.getShiftedBy(s))]}return"split"==n&&this.isCollapsed&&this.end.isEqual(a.end)?[new e(r.getShiftedBy(i))]:(a.containsPosition(this.start)||a.start.isEqual(this.start))&&this.containsPosition(a.end)&&this.end.isAfter(r)?[new e(this.start._getCombined(o,r._getTransformedByDeletion(o,i)),this.end._getTransformedByMove(o,r,i,!1,!1))]:(a.containsPosition(this.end)||a.end.isEqual(this.end))&&this.containsPosition(a.start)&&this.start.isBefore(r)?[new e(this.start._getTransformedByMove(o,r,i,!0,!1),this.end._getCombined(o,r._getTransformedByDeletion(o,i)))]:this._getTransformedByMove(o,r,i)}},{key:"_getTransformedByInsertion",value:function(t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.containsPosition(t))return[new e(this.start,t),new e(t._getTransformedByInsertion(t,n,!0),this.end._getTransformedByInsertion(t,n,this.isCollapsed))];var i=e.createFromRange(this),o=!r,a=!!i.isCollapsed||r;return i.start=i.start._getTransformedByInsertion(t,n,o),i.end=i.end._getTransformedByInsertion(t,n,a),[i]}},{key:"_getTransformedByMove",value:function(t,n,r){var i;if(this.isCollapsed)return[new e(this.start._getTransformedByMove(t,n,r,!0,!1))];var o=new e(t,t.getShiftedBy(r)),a=this.getDifference(o),s=null,c=this.getIntersection(o);1==a.length?s=new e(a[0].start._getTransformedByDeletion(t,r),a[0].end._getTransformedByDeletion(t,r)):2==a.length&&(s=new e(this.start,this.end._getTransformedByDeletion(t,r)));var u=n._getTransformedByDeletion(t,r);return i=s?s._getTransformedByInsertion(u,r,null!==c):[],c&&i.push(new e(c.start._getCombined(o.start,u),c.end._getCombined(o.start,u))),i}}],[{key:"createFromPositionAndShift",value:function(e,t){var n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}},{key:"createFromParentsAndOffsets",value:function(e,t,n,r){return new this(Fa.createFromParentAndOffset(e,t),Fa.createFromParentAndOffset(n,r))}},{key:"createFromRange",value:function(e){return new this(e.start,e.end)}},{key:"createIn",value:function(e){return this.createFromParentsAndOffsets(e,0,e,e.maxOffset)}},{key:"createOn",value:function(e){return this.createFromPositionAndShift(Fa.createBefore(e),e.offsetSize)}},{key:"createCollapsedAt",value:function(t,n){var r=Fa.createAt(t,n);return new e(r,Fa.createFromPosition(r))}},{key:"createFromRanges",value:function(e){if(0===e.length)throw new R.b("range-create-from-ranges-empty-array: At least one range has to be passed.");if(1==e.length)return this.createFromRange(e[0]);var t=e[0];e.sort((function(e,t){return e.start.isAfter(t.start)?1:-1}));for(var n=e.indexOf(t),r=new this(t.start,t.end),i=n-1;i>=0&&e[i].end.isEqual(r.start);i++)r.start=Fa.createFromPosition(e[i].start);for(var o=n+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=Fa.createFromPosition(e[o].end);return r}},{key:"fromJSON",value:function(e,t){return new this(Fa.fromJSON(e.start,t),Fa.fromJSON(e.end,t))}}]),e}(),Na=function(){function e(){var t=this;v(this,e),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this.on("modelToViewPosition",(function(e,n){if(!n.viewPosition){var r=t._modelToViewMapping.get(n.modelPosition.parent);n.viewPosition=t._findPositionIn(r,n.modelPosition.offset)}}),{priority:"low"}),this.on("viewToModelPosition",(function(e,n){if(!n.modelPosition){for(var r=n.viewPosition.parent,i=t._viewToModelMapping.get(r);!i;)r=r.parent,i=t._viewToModelMapping.get(r);var o=t._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,r);n.modelPosition=Fa.createFromParentAndOffset(i,o)}}),{priority:"low"})}return p(e,[{key:"bindElements",value:function(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}},{key:"unbindViewElement",value:function(e){var t=this.toModelElement(e);this._viewToModelMapping.delete(e),this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}},{key:"unbindModelElement",value:function(e){var t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}},{key:"bindElementToMarker",value:function(e,t){var n=this._markerNameToElements.get(t)||new Set;n.add(e),this._markerNameToElements.set(t,n)}},{key:"unbindElementsFromMarkerName",value:function(e){this._markerNameToElements.delete(e)}},{key:"clearBindings",value:function(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map}},{key:"toModelElement",value:function(e){return this._viewToModelMapping.get(e)}},{key:"toViewElement",value:function(e){return this._modelToViewMapping.get(e)}},{key:"toModelRange",value:function(e){return new Da(this.toModelPosition(e.start),this.toModelPosition(e.end))}},{key:"toViewRange",value:function(e){return new Yr(this.toViewPosition(e.start),this.toViewPosition(e.end))}},{key:"toModelPosition",value:function(e){var t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}},{key:"toViewPosition",value:function(e){var t={modelPosition:e,mapper:this,isPhantom:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isPhantom:!1}).isPhantom};return this.fire("modelToViewPosition",t),t.viewPosition}},{key:"markerNameToElements",value:function(e){var t=this._markerNameToElements.get(e);if(!t)return null;var n,r=new Set,i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.is("attributeElement")){var a,s=d(o.getElementsWithSameId());try{for(s.s();!(a=s.n()).done;){var c=a.value;r.add(c)}}catch(u){s.e(u)}finally{s.f()}}else r.add(o)}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"registerViewToModelLength",value:function(e,t){this._viewToModelLengthCallbacks.set(e,t)}},{key:"_toModelOffset",value:function(e,t,n){if(n!=e)return this._toModelOffset(e.parent,e.index,n)+this._toModelOffset(e,t,e);if(e.is("text"))return t;for(var r=0,i=0;i<t;i++)r+=this.getModelLength(e.getChild(i));return r}},{key:"getModelLength",value:function(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("text"))return e.data.length;if(e.is("uiElement"))return 0;var t,n=0,r=d(e.getChildren());try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.getModelLength(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"_findPositionIn",value:function(e,t){var n,r=0,i=0,o=0;if(e.is("text"))return new Jr(e,t);for(;i<t;)n=e.getChild(o),i+=r=this.getModelLength(n),o++;return i==t?this._moveViewPositionToTextNode(new Jr(e,o)):this._findPositionIn(n,t-(i-r))}},{key:"_moveViewPositionToTextNode",value:function(e){var t=e.nodeBefore,n=e.nodeAfter;return t instanceof $n?new Jr(t,t.data.length):n instanceof $n?new Jr(n,0):e}}]),e}();H(Na,B);var ja=function(){function e(){v(this,e),this._consumable=new Map,this._textProxyRegistry=new Map}return p(e,[{key:"add",value:function(e,t){t=Ba(t),e instanceof Sa&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}},{key:"consume",value:function(e,t){return t=Ba(t),e instanceof Sa&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}},{key:"test",value:function(e,t){t=Ba(t),e instanceof Sa&&(e=this._getSymbolForTextProxy(e));var n=this._consumable.get(e);if(void 0===n)return null;var r=n.get(t);return void 0===r?null:r}},{key:"revert",value:function(e,t){t=Ba(t),e instanceof Sa&&(e=this._getSymbolForTextProxy(e));var n=this.test(e,t);return!1===n?(this._consumable.get(e).set(t,!0),!0):!0!==n&&null}},{key:"_getSymbolForTextProxy",value:function(e){var t=null,n=this._textProxyRegistry.get(e.startOffset);if(n){var r=n.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}},{key:"_addSymbolForTextProxy",value:function(e,t,n){var r,i,o=Symbol("textProxySymbol");return(r=this._textProxyRegistry.get(e))||(r=new Map,this._textProxyRegistry.set(e,r)),(i=r.get(t))||(i=new Map,r.set(t,i)),i.set(n,o),o}}]),e}();function Ba(e){var t=e.split(":");return t.length>1?t[0]+":"+t[1]:t[0]}var Va=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this.conversionApi=Mr({dispatcher:this},t)}return p(e,[{key:"convertChanges",value:function(e,t){var n,r=d(e.getMarkersToRemove());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.convertMarkerRemove(i.name,i.range,t)}}catch(f){r.e(f)}finally{r.f()}var o,a=d(e.getChanges());try{for(a.s();!(o=a.n()).done;){var s=o.value;"insert"==s.type?this.convertInsert(Da.createFromPositionAndShift(s.position,s.length),t):"remove"==s.type?this.convertRemove(s.position,s.length,s.name,t):this.convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,t)}}catch(f){a.e(f)}finally{a.f()}var c,u=d(e.getMarkersToAdd());try{for(u.s();!(c=u.n()).done;){var l=c.value;this.convertMarkerAdd(l.name,l.range,t)}}catch(f){u.e(f)}finally{u.f()}}},{key:"convertInsert",value:function(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.item,a={item:o,range:Da.createFromPositionAndShift(i.previousPosition,i.length)};this._testAndFire("insert",a);var s,c=d(o.getAttributeKeys());try{for(c.s();!(s=c.n()).done;){var u=s.value;a.attributeKey=u,a.attributeOldValue=null,a.attributeNewValue=o.getAttribute(u),this._testAndFire("attribute:".concat(u),a)}}catch(l){c.e(l)}finally{c.f()}}}catch(l){r.e(l)}finally{r.f()}this._clearConversionApi()}},{key:"convertRemove",value:function(e,t,n,r){this.conversionApi.writer=r,this.fire("remove:"+n,{position:e,length:t},this.conversionApi),this._clearConversionApi()}},{key:"convertAttribute",value:function(e,t,n,r,i){this.conversionApi.writer=i,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:".concat(t));var o,a=d(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,c={item:s.item,range:Da.createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:n,attributeNewValue:r};this._testAndFire("attribute:".concat(t),c)}}catch(u){a.e(u)}finally{a.f()}this._clearConversionApi()}},{key:"convertSelection",value:function(e,t,n){var r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(e,r),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){var i,o=d(r);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.getRange();if(La(e.getFirstPosition(),a,this.conversionApi.mapper)){var c={item:e,markerName:a.name,markerRange:s};this.conversionApi.consumable.test(e,"addMarker:"+a.name)&&this.fire("addMarker:"+a.name,c,this.conversionApi)}}}catch(v){o.e(v)}finally{o.f()}var u,l=d(e.getAttributeKeys());try{for(l.s();!(u=l.n()).done;){var f=u.value,h={item:e,range:e.getFirstRange(),attributeKey:f,attributeOldValue:null,attributeNewValue:e.getAttribute(f)};this.conversionApi.consumable.test(e,"attribute:"+h.attributeKey)&&this.fire("attribute:"+h.attributeKey,h,this.conversionApi)}}catch(v){l.e(v)}finally{l.f()}this._clearConversionApi()}}},{key:"convertMarkerAdd",value:function(e,t,n){if(t.root.document&&"$graveyard"!=t.root.rootName){this.conversionApi.writer=n;var r="addMarker:"+e;if(t.isCollapsed){var i=new ja;return i.add(t,r),this.conversionApi.consumable=i,void this.fire(r,{markerName:e,markerRange:t},this.conversionApi)}this.conversionApi.consumable=this._createConsumableForRange(t,r);var o,a=d(t.getItems());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(this.conversionApi.consumable.test(s,r)){var c={item:s,range:Da.createOn(s),markerName:e,markerRange:t};this.fire(r,c,this.conversionApi)}}}catch(u){a.e(u)}finally{a.f()}this._clearConversionApi()}}},{key:"convertMarkerRemove",value:function(e,t,n){t.root.document&&"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}},{key:"_createInsertConsumable",value:function(e){var t,n=new ja,r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.item;n.add(i,"insert");var o,a=d(i.getAttributeKeys());try{for(a.s();!(o=a.n()).done;){var s=o.value;n.add(i,"attribute:"+s)}}catch(c){a.e(c)}finally{a.f()}}}catch(c){r.e(c)}finally{r.f()}return n}},{key:"_createConsumableForRange",value:function(e,t){var n,r=new ja,i=d(e.getItems());try{for(i.s();!(n=i.n()).done;){var o=n.value;r.add(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"_createSelectionConsumable",value:function(e,t){var n=new ja;n.add(e,"selection");var r,i=d(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.add(e,"addMarker:"+o.name)}}catch(u){i.e(u)}finally{i.f()}var a,s=d(e.getAttributeKeys());try{for(s.s();!(a=s.n()).done;){var c=a.value;n.add(e,"attribute:"+c)}}catch(u){s.e(u)}finally{s.f()}return n}},{key:"_testAndFire",value:function(e,t){if(this.conversionApi.consumable.test(t.item,e)){var n=t.item.name||"$text";this.fire(e+":"+n,t,this.conversionApi)}}},{key:"_clearConversionApi",value:function(){delete this.conversionApi.writer,delete this.conversionApi.consumable}}]),e}();function La(e,t,n){var r=t.getRange(),i=Array.from(e.getAncestors());return i.shift(),i.reverse(),!i.some((function(e){if(r.containsItem(e))return!!n.toViewElement(e).getCustomProperty("addHighlight")}))}H(Va,B);var za=function(){function e(t,n,r){v(this,e),this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,t&&this.setTo(t,n,r)}return p(e,[{key:"anchor",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}},{key:"focus",get:function(){if(this._ranges.length>0){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"isEqual",value:function(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;var t,n=d(this._ranges);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=!1,a=d(e._ranges);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(i.isEqual(s)){o=!0;break}}}catch(c){a.e(c)}finally{a.f()}if(!o)return!1}}catch(c){n.e(c)}finally{n.f()}return!0}},{key:"getRanges",value:s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this._ranges),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,Da.createFromRange(r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"getFirstRange",value:function(){var e,t=null,n=d(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.start.isBefore(t.start)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?Da.createFromRange(t):null}},{key:"getLastRange",value:function(){var e,t=null,n=d(this._ranges);try{for(n.s();!(e=n.n()).done;){var r=e.value;t&&!r.end.isAfter(t.end)||(t=r)}}catch(i){n.e(i)}finally{n.f()}return t?Da.createFromRange(t):null}},{key:"getFirstPosition",value:function(){var e=this.getFirstRange();return e?Fa.createFromPosition(e.start):null}},{key:"getLastPosition",value:function(){var e=this.getLastRange();return e?Fa.createFromPosition(e.end):null}},{key:"setTo",value:function(t,n,r){if(null===t)this._setRanges([]);else if(t instanceof e)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof Da)this._setRanges([t],!!n&&!!n.backward);else if(t instanceof Fa)this._setRanges([new Da(t)]);else if(t instanceof Ta){var i,o=!!r&&!!r.backward;if("in"==n)i=Da.createIn(t);else if("on"==n)i=Da.createOn(t);else{if(void 0===n)throw new R.b("model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.");i=Da.createCollapsedAt(t,n)}this._setRanges([i],o)}else{if(!Jn(t))throw new R.b("model-selection-setTo-not-selectable: Cannot set selection to given place.");this._setRanges(t,n&&!!n.backward)}}},{key:"_setRanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e=Array.from(e)).some((function(e){if(!(e instanceof Da))throw new R.b("model-selection-added-not-range: Trying to add an object that is not an instance of Range.");return t._ranges.every((function(t){return!t.isEqual(e)}))}));if(e.length!==this._ranges.length||r){this._removeAllRanges();var i,o=d(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._pushRange(a)}}catch(s){o.e(s)}finally{o.f()}this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0})}}},{key:"setFocus",value:function(e,t){if(null===this.anchor)throw new R.b("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.");var n=Fa.createAt(e,t);if("same"!=n.compareWith(this.focus)){var r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?(this._pushRange(new Da(n,r)),this._lastRangeBackward=!0):(this._pushRange(new Da(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}}},{key:"getAttribute",value:function(e){return this._attrs.get(e)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"hasAttribute",value:function(e){return this._attrs.has(e)}},{key:"removeAttribute",value:function(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"setAttribute",value:function(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}},{key:"getSelectedElement",value:function(){if(1!==this.rangeCount)return null;var e=this.getFirstRange(),t=e.start.nodeAfter,n=e.end.nodeBefore;return t instanceof Ea&&t==n?t:null}},{key:"getSelectedBlocks",value:s.mark((function e(){var t,n,r,i,o,a,c,u,l;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new WeakSet,n=d(this.getRanges()),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=37;break}if(i=r.value,o=qa(i.start,t),e.t0=o,!e.t0){e.next=11;break}return e.next=11,o;case 11:a=d(i.getWalker()),e.prev=12,a.s();case 14:if((c=a.n()).done){e.next=22;break}if(u=c.value,e.t1="elementEnd"==u.type&&Wa(u.item,t),!e.t1){e.next=20;break}return e.next=20,u.item;case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(12),a.e(e.t2);case 27:return e.prev=27,a.f(),e.finish(27);case 30:if(l=qa(i.end,t),e.t3=l&&!i.end.isTouching(Fa.createAt(l)),!e.t3){e.next=35;break}return e.next=35,l;case 35:e.next=4;break;case 37:e.next=42;break;case 39:e.prev=39,e.t4=e.catch(2),n.e(e.t4);case 42:return e.prev=42,n.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,this,[[2,39,42,45],[12,24,27,30]])}))},{key:"containsEntireContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.anchor.root,t=Fa.createAt(e),n=Fa.createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}},{key:"_pushRange",value:function(e){this._checkRange(e),this._ranges.push(Da.createFromRange(e))}},{key:"_checkRange",value:function(e){for(var t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new R.b("model-selection-range-intersects: Trying to add a range that intersects with another range from selection.",{addedRange:e,intersectingRange:this._ranges[t]})}},{key:"_removeAllRanges",value:function(){for(;this._ranges.length>0;)this._popRange()}},{key:"_popRange",value:function(){this._ranges.pop()}}]),e}();function Wa(e,t){return!t.has(e)&&(t.add(e),e.document.model.schema.isBlock(e)&&e.parent)}function qa(e,t){var n=e.parent.getAncestors({parentFirst:!0,includeSelf:!0}),r=n.find((function(e){return Wa(e,t)}));return n.forEach((function(e){return t.add(e)})),r}H(za,B);var Ua=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),i=t.call(this,e,r),function(){var e=this,t=new Set(["insert","move","remove","reinsert"]);this.listenTo(this.root.document.model,"applyOperation",(function(n,r){var i=r[0];i.isDocumentOperation&&t.has(i.type)&&function(e){var t,n,r=e.type,i=e.delta.batch;"insert"==r?t=Da.createFromPositionAndShift(e.position,e.nodes.maxOffset):(t=Da.createFromPositionAndShift(e.getMovedRangeStart(),e.howMany),n=e.sourcePosition);var o=t.end.offset-t.start.offset,a=t.start;"move"!=r&&"remove"!=r&&"reinsert"!=r||(a=a._getTransformedByInsertion(n,o));var s=this._getTransformedByDocumentChange(r,e.delta.type,a,o,n);"move"!=r&&"remove"!=r&&"reinsert"!=r||3!=s.length||(s[2]=t);var c=Da.createFromRanges(s),u=!c.isEqual(this),l=this.containsPosition(a),f=n&&(this.containsPosition(n)||this.start.isEqual(n)),h=l||f;if(u){var d=Da.createFromRange(this);this.start=c.start,this.end=c.end,this.fire("change:range",d,{type:r,batch:i,range:t,sourcePosition:n})}else h&&this.fire("change:content",Da.createFromRange(this),{type:r,batch:i,range:t,sourcePosition:n})}.call(e,i)}),{priority:"low"})}.call(o(i)),i}return p(n,[{key:"detach",value:function(){this.stopListening()}}]),n}(Da);H(Ua,B);var Ha="selection:",$a=function(){function e(t){v(this,e),this._selection=new Ka(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this)}return p(e,[{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"hasOwnRange",get:function(){return this._selection.hasOwnRange}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"isGravityOverridden",get:function(){return this._selection.isGravityOverridden}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:function(){return this._selection.getRanges()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getSelectedBlocks",value:function(){return this._selection.getSelectedBlocks()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"containsEntireContent",value:function(e){return this._selection.containsEntireContent(e)}},{key:"destroy",value:function(){this._selection.destroy()}},{key:"getAttributeKeys",value:function(){return this._selection.getAttributeKeys()}},{key:"getAttributes",value:function(){return this._selection.getAttributes()}},{key:"getAttribute",value:function(e){return this._selection.getAttribute(e)}},{key:"hasAttribute",value:function(e){return this._selection.hasAttribute(e)}},{key:"_setFocus",value:function(e,t){this._selection.setFocus(e,t)}},{key:"_setTo",value:function(e,t,n){this._selection.setTo(e,t,n)}},{key:"_setAttribute",value:function(e,t){this._selection.setAttribute(e,t)}},{key:"_removeAttribute",value:function(e){this._selection.removeAttribute(e)}},{key:"_getStoredAttributes",value:function(){return this._selection._getStoredAttributes()}},{key:"_overrideGravity",value:function(){return this._selection.overrideGravity()}},{key:"_restoreGravity",value:function(e){this._selection.restoreGravity(e)}}],[{key:"_getStoreAttributeKey",value:function(e){return Ha+e}},{key:"_isStoreAttributeKey",value:function(e){return e.startsWith(Ha)}}]),e}();H($a,B);var Ka=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._model=e.model,r._document=e,r._attributePriority=new Map,r._fixGraveyardRangesData=[],r._hasChangedRange=!1,r._overriddenGravityRegister=new Set,r.on("change:range",(function(){var e,t=d(r.getRanges());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!r._document._validateSelectionRange(n))throw new R.b("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",{range:n})}}catch(i){t.e(i)}finally{t.f()}})),r.listenTo(r._document,"change",(function(e,t){r._updateAttributes(!1),function(e,t){var n,r=e.document.differ,i=d(r.getChanges());try{var o=function(){var r=n.value;if("insert"!=r.type)return"continue";var i=r.position.parent;r.length===i.maxOffset&&e.enqueueChange(t,(function(e){var t,n=Array.from(i.getAttributeKeys()).filter((function(e){return e.startsWith(Ha)})),r=d(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;e.removeAttribute(o,i)}}catch(a){r.e(a)}finally{r.f()}}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}(r._model,t)})),r.listenTo(r._model,"applyOperation",(function(){for(;r._fixGraveyardRangesData.length;){var e=r._fixGraveyardRangesData.shift(),t=e.liveRange,n=e.sourcePosition;r._fixGraveyardSelection(t,n)}r._hasChangedRange&&(r._hasChangedRange=!1,r.fire("change:range",{directChange:!1}))}),{priority:"lowest"}),r}return p(n,[{key:"isCollapsed",get:function(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:u(l(n.prototype),"isCollapsed",this)}},{key:"anchor",get:function(){return u(l(n.prototype),"anchor",this)||this._document._getDefaultRange().start}},{key:"focus",get:function(){return u(l(n.prototype),"focus",this)||this._document._getDefaultRange().end}},{key:"rangeCount",get:function(){return this._ranges.length?this._ranges.length:1}},{key:"hasOwnRange",get:function(){return this._ranges.length>0}},{key:"isGravityOverridden",get:function(){return!!this._overriddenGravityRegister.size}},{key:"destroy",value:function(){for(var e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}},{key:"getRanges",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ranges.length){e.next=4;break}return e.delegateYield(u(l(n.prototype),"getRanges",this).call(this),"t0",2);case 2:e.next=6;break;case 4:return e.next=6,this._document._getDefaultRange();case 6:case"end":return e.stop()}}),e,this)}))},{key:"getFirstRange",value:function(){return u(l(n.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange()}},{key:"getLastRange",value:function(){return u(l(n.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange()}},{key:"setTo",value:function(e,t,r){u(l(n.prototype),"setTo",this).call(this,e,t,r),this._refreshAttributes()}},{key:"setFocus",value:function(e,t){u(l(n.prototype),"setFocus",this).call(this,e,t),this._refreshAttributes()}},{key:"setAttribute",value:function(e,t){if(this._setAttribute(e,t)){var n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}},{key:"removeAttribute",value:function(e){if(this._removeAttribute(e)){var t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}},{key:"overrideGravity",value:function(){var e=F();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._refreshAttributes(),e}},{key:"restoreGravity",value:function(e){if(!this._overriddenGravityRegister.has(e))throw new R.b("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._refreshAttributes()}},{key:"_refreshAttributes",value:function(){this._updateAttributes(!0)}},{key:"_popRange",value:function(){this._ranges.pop().detach()}},{key:"_pushRange",value:function(e){var t=this._prepareRange(e);t&&this._ranges.push(t)}},{key:"_prepareRange",value:function(e){var t=this;if(this._checkRange(e),e.root!=this._document.graveyard){var n=Ua.createFromRange(e);return n.on("change:range",(function(e,r,i){t._hasChangedRange=!0,n.root==t._document.graveyard&&t._fixGraveyardRangesData.push({liveRange:n,sourcePosition:i.sourcePosition})})),n}oa.a.warn("model-selection-range-in-graveyard: Trying to add a Range that is in the graveyard root. Range rejected.")}},{key:"_updateAttributes",value:function(e){var t=Ca(this._getSurroundingAttributes()),n=Ca(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else{var r,i=d(this._attributePriority);try{for(i.s();!(r=i.n()).done;){var o=h(r.value,2),a=o[0];"low"==o[1]&&(this._attrs.delete(a),this._attributePriority.delete(a))}}catch(y){i.e(y)}finally{i.f()}}this._setAttributesTo(t);var s,c=[],u=d(this.getAttributes());try{for(u.s();!(s=u.n()).done;){var l=h(s.value,2),f=l[0],v=l[1];n.has(f)&&n.get(f)===v||c.push(f)}}catch(y){u.e(y)}finally{u.f()}var p,g=d(n);try{for(g.s();!(p=g.n()).done;){var m=h(p.value,1)[0];this.hasAttribute(m)||c.push(m)}}catch(y){g.e(y)}finally{g.f()}c.length>0&&this.fire("change:attribute",{attributeKeys:c,directChange:!1})}},{key:"_setAttribute",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?"low":"normal";return("low"!=r||"normal"!=this._attributePriority.get(e))&&u(l(n.prototype),"getAttribute",this).call(this,e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}},{key:"_removeAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?"low":"normal";return("low"!=t||"normal"!=this._attributePriority.get(e))&&(this._attributePriority.set(e,t),!!u(l(n.prototype),"hasAttribute",this).call(this,e)&&(this._attrs.delete(e),!0))}},{key:"_setAttributesTo",value:function(e){var t,n=new Set,r=d(this.getAttributes());try{for(r.s();!(t=r.n()).done;){var i=h(t.value,2),o=i[0],a=i[1];e.get(o)!==a&&this._removeAttribute(o,!1)}}catch(v){r.e(v)}finally{r.f()}var s,c=d(e);try{for(c.s();!(s=c.n()).done;){var u=h(s.value,2),l=u[0],f=u[1];this._setAttribute(l,f,!1)&&n.add(l)}}catch(v){c.e(v)}finally{c.f()}return n}},{key:"_getStoredAttributes",value:s.mark((function e(){var t,n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getFirstPosition().parent,!this.isCollapsed||!t.isEmpty){e.next=20;break}n=d(t.getAttributeKeys()),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=12;break}if(!(i=r.value).startsWith(Ha)){e.next=10;break}return e.next=10,[i.substr(Ha.length),t.getAttribute(i)];case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])}))},{key:"_getSurroundingAttributes",value:function(){var e=this.getFirstPosition(),t=this._model.schema,n=null;if(this.isCollapsed){var r=e.textNode?e.textNode:e.nodeBefore,i=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=Ga(r)),n||(n=Ga(i)),!this.isGravityOverridden&&!n)for(var o=r;o&&!n;)n=Ga(o=o.previousSibling);if(!n)for(var a=i;a&&!n;)n=Ga(a=a.nextSibling);n||(n=this._getStoredAttributes())}else{var s,c=this.getFirstRange(),u=d(c);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(l.item.is("element")&&t.isObject(l.item))break;"text"==l.type&&null===n&&(n=l.item.getAttributes())}}catch(f){u.e(f)}finally{u.f()}}return n}},{key:"_fixGraveyardSelection",value:function(e,t){var n=Fa.createFromPosition(t),r=this._model.schema.getNearestSelectionRange(n),i=this._ranges.indexOf(e);if(this._ranges.splice(i,1),e.detach(),r){var o=this._prepareRange(r);this._ranges.splice(i,0,o)}}}]),n}(za);function Ga(e){return e instanceof Sa||e instanceof Oa?e.getAttributes():null}var Ja=function(e){return Wn(e,!0,!0)};function Ya(e){return(e=Ja(e)).view=Za(e.view,"container"),function(t){t.on("insert:"+e.model,function(e){return function(t,n,r){var i=e(n.item,r.writer);if(i&&r.consumable.consume(n.item,"insert")){var o=r.mapper.toViewPosition(n.range.start);r.mapper.bindElements(n.item,i),r.writer.insert(o,i)}}}(e.view),{priority:e.converterPriority||"normal"})}}function Qa(e){var t="attribute:"+((e=Ja(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values){var n,r=d(e.model.values);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.view[i]=Za(e.view[i],"attribute")}}catch(a){r.e(a)}finally{r.f()}}else e.view=Za(e.view,"attribute");var o=es(e);return function(n){n.on(t,function(e){return function(t,n,r){var i=e(n.attributeOldValue,r.writer),o=e(n.attributeNewValue,r.writer);if((i||o)&&r.consumable.consume(n.item,t.name)){var a=r.writer,s=a.document.selection;if(n.item instanceof za||n.item instanceof $a)a.wrap(s.getFirstRange(),o);else{var c=r.mapper.toViewRange(n.range);null!==n.attributeOldValue&&i&&(c=a.unwrap(c,i)),null!==n.attributeNewValue&&o&&a.wrap(c,o)}}}}(o),{priority:e.converterPriority||"normal"})}}function Xa(e){var t="attribute:"+((e=Ja(e)).model.key?e.model.key:e.model);if(e.model.name&&(t+=":"+e.model.name),e.model.values){var n,r=d(e.model.values);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.view[i]=ts(e.view[i])}}catch(a){r.e(a)}finally{r.f()}}else e.view=ts(e.view);var o=es(e);return function(n){n.on(t,function(e){return e=e||function(e,t){return{value:e,key:t.attributeKey}},function(t,n,r){var i=e(n.attributeOldValue,n),o=e(n.attributeNewValue,n);if((i||o)&&r.consumable.consume(n.item,t.name)){var s=r.mapper.toViewElement(n.item),c=r.writer;if(null!==n.attributeOldValue&&i)if("class"==i.key){var u,l=Array.isArray(i.value)?i.value:[i.value],f=d(l);try{for(f.s();!(u=f.n()).done;){var h=u.value;c.removeClass(h,s)}}catch(a){f.e(a)}finally{f.f()}}else if("style"==i.key)for(var v=0,p=Object.keys(i.value);v<p.length;v++){var g=p[v];c.removeStyle(g,s)}else c.removeAttribute(i.key,s);if(null!==n.attributeNewValue&&o)if("class"==o.key){var m,y=Array.isArray(o.value)?o.value:[o.value],k=d(y);try{for(k.s();!(m=k.n()).done;){var b=m.value;c.addClass(b,s)}}catch(a){k.e(a)}finally{k.f()}}else if("style"==o.key)for(var w=0,_=Object.keys(o.value);w<_.length;w++){var x=_[w];c.setStyle(x,o.value[x],s)}else c.setAttribute(o.key,o.value,s)}}}(o),{priority:e.converterPriority||"normal"})}}function Za(e,t){return"function"==typeof e?e:function(n,r){return function(e,t,n){var r;"string"==typeof e&&(e={name:e});var i=Object.assign({},e.attributes);if("container"==n)r=t.createContainerElement(e.name,i);else if("attribute"==n){var o={priority:e.priority||ii.DEFAULT_PRIORITY};r=t.createAttributeElement(e.name,i,o)}else r=t.createUIElement(e.name,i);if(e.styles)for(var a=0,s=Object.keys(e.styles);a<s.length;a++){var c=s[a];t.setStyle(c,e.styles[c],r)}if(e.classes){var u=e.classes;if("string"==typeof u)t.addClass(u,r);else{var l,f=d(u);try{for(f.s();!(l=f.n()).done;){var h=l.value;t.addClass(h,r)}}catch(v){f.e(v)}finally{f.f()}}}return r}(e,r,t)}}function es(e){return e.model.values?function(t,n){var r=e.view[t];return r?r(t,n):null}:e.view}function ts(e){return"string"==typeof e?function(t){return{key:e,value:t}}:"object"==typeof e?e.value?function(){return e}:function(t){return{key:e.key,value:t}}:e}var ns=function(){function e(t){var n=this;v(this,e),this.model=t,this.view=new Aa,this.mapper=new Na,this.downcastDispatcher=new Va({mapper:this.mapper});var r=this.model.document,i=r.selection,o=this.model.markers;this.listenTo(r,"change",(function(){n.view.change((function(e){n.downcastDispatcher.convertChanges(r.differ,e),n.downcastDispatcher.convertSelection(i,o,e)}))}),{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(e,t){return function(n,r){var i,o=r.newSelection,a=new za,s=[],c=d(o.getRanges());try{for(c.s();!(i=c.n()).done;){var u=i.value;s.push(t.toModelRange(u))}}catch(l){c.e(l)}finally{c.f()}a.setTo(s,{backward:o.isBackward}),a.isEqual(e.document.selection)||e.change((function(e){e.setSelection(a)}))}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",(function(e,t,n){if(n.consumable.consume(t.item,"insert")){var r=n.writer,i=n.mapper.toViewPosition(t.range.start),o=r.createText(t.item.data);r.insert(i,o)}}),{priority:"lowest"}),this.downcastDispatcher.on("remove",(function(e,t,n){var r,i=n.mapper.toViewPosition(t.position),o=t.position.getShiftedBy(t.length),a=n.mapper.toViewPosition(o,{isPhantom:!0}),s=new Yr(i,a),c=n.writer.remove(s.getTrimmed()),u=d(Yr.createIn(c).getItems());try{for(u.s();!(r=u.n()).done;){var l=r.value;n.mapper.unbindViewElement(l)}}catch(f){u.e(f)}finally{u.f()}}),{priority:"low"}),this.downcastDispatcher.on("selection",(function(e,t,n){var r,i=n.writer,o=i.document.selection,a=d(o.getRanges());try{for(a.s();!(r=a.n()).done;){var s=r.value;s.isCollapsed&&s.end.parent.document&&n.writer.mergeAttributes(s.start)}}catch(c){a.e(c)}finally{a.f()}i.setSelection(null)}),{priority:"low"}),this.downcastDispatcher.on("selection",(function(e,t,n){var r=t.selection;if(!r.isCollapsed&&n.consumable.consume(r,"selection")){var i,o=[],a=d(r.getRanges());try{for(a.s();!(i=a.n()).done;){var s=i.value,c=n.mapper.toViewRange(s);o.push(c)}}catch(u){a.e(u)}finally{a.f()}n.writer.setSelection(o,{backward:r.isBackward})}}),{priority:"low"}),this.downcastDispatcher.on("selection",(function(e,t,n){var r=t.selection;if(r.isCollapsed&&n.consumable.consume(r,"selection")){var i=n.writer,o=r.getFirstPosition(),a=n.mapper.toViewPosition(o),s=i.breakAttributes(a);i.setSelection(s)}}),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using((function(e){if("$graveyard"==e.rootName)return null;var t=new Kr(e.name);return t.rootName=e.rootName,t._document=n.view.document,n.mapper.bindElements(e,t),t}))}return p(e,[{key:"destroy",value:function(){this.view.destroy(),this.stopListening()}}]),e}();H(ns,Br);var rs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];v(this,e),this._editor=t,this._availablePlugins=new Map,this._plugins=new Map;var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;this._availablePlugins.set(o,o),o.pluginName&&this._availablePlugins.set(o.pluginName,o)}}catch(a){i.e(a)}finally{i.f()}}return p(e,[{key:Symbol.iterator,value:s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this._plugins),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}if(r=n.value,e.t0="function"==typeof r[0],!e.t0){e.next=9;break}return e.next=9,r;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),t.e(e.t1);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"get",value:function(e){return this._plugins.get(e)}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this,r=this._editor,i=new Set,o=[],a=h(e),s=h(t),c=function(e){var t,n=[],r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;f(i)||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n.length?n:null}(e);if(c){var u="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";return oa.a.error(u,{plugins:c}),Promise.reject(new R.b(u,{plugins:c}))}return Promise.all(a.map(l)).then((function(){return o}));function l(e){if(!s.includes(e)&&!n.get(e)&&!i.has(e))return function(e){return new Promise((function(a){i.add(e),e.requires&&e.requires.forEach((function(n){var r=f(n);if(t.includes(r))throw new R.b("plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.",{plugin:r,requiredBy:e});l(r)}));var s=new e(r);n._add(e,s),o.push(s),a()}))}(e).catch((function(t){throw oa.a.error("plugincollection-load: It was not possible to load the plugin.",{plugin:e}),t}))}function f(e){return"function"==typeof e?e:n._availablePlugins.get(e)}function h(e){return e.map((function(e){return f(e)})).filter((function(e){return!!e}))}}},{key:"destroy",value:function(){var e=Array.from(this).map((function(e){return h(e,2)[1]})).filter((function(e){return"function"==typeof e.destroy})).map((function(e){return e.destroy()}));return Promise.all(e)}},{key:"_add",value:function(e,t){this._plugins.set(e,t);var n=e.pluginName;n&&(this._plugins.has(n)?oa.a.warn("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e}):this._plugins.set(n,t))}}]),e}(),is=function(){function e(){v(this,e),this._commands=new Map}return p(e,[{key:"add",value:function(e,t){this._commands.set(e,t)}},{key:"get",value:function(e){return this._commands.get(e)}},{key:"execute",value:function(e){var t=this.get(e);if(!t)throw new R.b("commandcollection-command-not-found: Command does not exist.",{commandName:e});for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.execute.apply(t,r)}},{key:"names",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"commands",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:Symbol.iterator,value:function(){return this._commands[Symbol.iterator]()}},{key:"destroy",value:function(){var e,t=d(this.commands());try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(n){t.e(n)}finally{t.f()}}}]),e}();function os(e,t){var n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;return 1===n&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]),0!==n&&function(e,t){return e in window.CKEDITOR_TRANSLATIONS&&t in window.CKEDITOR_TRANSLATIONS[e]}(e,t)?window.CKEDITOR_TRANSLATIONS[e][t].replace(/ \[context: [^\]]+\]$/,""):t.replace(/ \[context: [^\]]+\]$/,"")}window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var as=function(){function e(t){var n=this;v(this,e),this.language=t||"en",this.t=function(){return n._t.apply(n,arguments)}}return p(e,[{key:"_t",value:function(e,t){var n=os(this.language,e);return t&&(n=n.replace(/%(\d+)/g,(function(e,n){return n<t.length?t[n]:e}))),n}}]),e}(),ss=function(){function e(){v(this,e),this._consumables=new Map}return p(e,[{key:"add",value:function(e,t){var n;e.is("text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?n=this._consumables.get(e):(n=new cs,this._consumables.set(e,n)),n.add(t))}},{key:"test",value:function(e,t){var n=this._consumables.get(e);return void 0===n?null:e.is("text")||e.is("documentFragment")?n:n.test(t)}},{key:"consume",value:function(e,t){return!!this.test(e,t)&&(e.is("text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}},{key:"revert",value:function(e,t){var n=this._consumables.get(e);void 0!==n&&(e.is("text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}}],[{key:"consumablesFromElement",value:function(e){var t,n={name:!0,attributes:[],classes:[],styles:[]},r=e.getAttributeKeys(),i=d(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;"style"!=o&&"class"!=o&&n.attributes.push(o)}}catch(p){i.e(p)}finally{i.f()}var a,s=e.getClassNames(),c=d(s);try{for(c.s();!(a=c.n()).done;){var u=a.value;n.classes.push(u)}}catch(p){c.e(p)}finally{c.f()}var l,f=e.getStyleNames(),h=d(f);try{for(h.s();!(l=h.n()).done;){var v=l.value;n.styles.push(v)}}catch(p){h.e(p)}finally{h.f()}return n}},{key:"createFrom",value:function(t,n){if(n||(n=new e),t.is("text"))return n.add(t),n;t.is("element")&&n.add(t,e.consumablesFromElement(t)),t.is("documentFragment")&&n.add(t);var r,i=d(t.getChildren());try{for(i.s();!(r=i.n()).done;){var o=r.value;n=e.createFrom(o,n)}}catch(a){i.e(a)}finally{i.f()}return n}}]),e}(),cs=function(){function e(){v(this,e),this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}return p(e,[{key:"add",value:function(e){for(var t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._add(t,e[t])}},{key:"test",value:function(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(var t in this._consumables)if(t in e){var n=this._test(t,e[t]);if(!0!==n)return n}return!0}},{key:"consume",value:function(e){for(var t in e.name&&(this._canConsumeName=!1),this._consumables)t in e&&this._consume(t,e[t])}},{key:"revert",value:function(e){for(var t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._revert(t,e[t])}},{key:"_add",value:function(e,t){var n,r=vt(t)?t:[t],i=this._consumables[e],o=d(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"===e&&("class"===a||"style"===a))throw new R.b("viewconsumable-invalid-attribute: Classes and styles should be handled separately.");i.set(a,!0)}}catch(s){o.e(s)}finally{o.f()}}},{key:"_test",value:function(e,t){var n,r=vt(t)?t:[t],i=this._consumables[e],o=d(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"!==e||"class"!==a&&"style"!==a){var s=i.get(a);if(void 0===s)return null;if(!s)return!1}else{var c="class"==a?"classes":"styles",u=this._test(c,f(this._consumables[c].keys()));if(!0!==u)return u}}}catch(l){o.e(l)}finally{o.f()}return!0}},{key:"_consume",value:function(e,t){var n,r=vt(t)?t:[t],i=this._consumables[e],o=d(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"!==e||"class"!==a&&"style"!==a)i.set(a,!1);else{var s="class"==a?"classes":"styles";this._consume(s,f(this._consumables[s].keys()))}}}catch(c){o.e(c)}finally{o.f()}}},{key:"_revert",value:function(e,t){var n,r=vt(t)?t:[t],i=this._consumables[e],o=d(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("attributes"!==e||"class"!==a&&"style"!==a)!1===i.get(a)&&i.set(a,!0);else{var s="class"==a?"classes":"styles";this._revert(s,f(this._consumables[s].keys()))}}}catch(c){o.e(c)}finally{o.f()}}}]),e}(),us=function(){function e(){var t=this;v(this,e),this._sourceDefinitions={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(function(e,t){t[0]=new ls(t[0])}),{priority:"highest"}),this.on("checkChild",(function(e,n){n[0]=new ls(n[0]),n[1]=t.getDefinition(n[1])}),{priority:"highest"})}return p(e,[{key:"register",value:function(e,t){if(this._sourceDefinitions[e])throw new R.b("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}},{key:"extend",value:function(e,t){if(!this._sourceDefinitions[e])throw new R.b("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}},{key:"getDefinitions",value:function(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}},{key:"getDefinition",value:function(e){var t;return t="string"==typeof e?e:e.is&&(e.is("text")||e.is("textProxy"))?"$text":e.name,this.getDefinitions()[t]}},{key:"isRegistered",value:function(e){return!!this.getDefinition(e)}},{key:"isBlock",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isBlock)}},{key:"isLimit",value:function(e){var t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject)}},{key:"isObject",value:function(e){var t=this.getDefinition(e);return!(!t||!t.isObject)}},{key:"checkChild",value:function(e,t){return!!t&&this._checkContextMatch(t,e)}},{key:"checkAttribute",value:function(e,t){var n=this.getDefinition(e.last);return!!n&&n.allowAttributes.includes(t)}},{key:"checkMerge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e instanceof Fa){var n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof Ea))throw new R.b("schema-check-merge-no-element-before: The node before the merge position must be an element.");if(!(r instanceof Ea))throw new R.b("schema-check-merge-no-element-after: The node after the merge position must be an element.");return this.checkMerge(n,r)}var i,o=d(t.getChildren());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!this.checkChild(e,a))return!1}}catch(s){o.e(s)}finally{o.f()}return!0}},{key:"addChildCheck",value:function(e){this.on("checkChild",(function(t,n){var r=h(n,2),i=r[0],o=r[1];if(o){var a=e(i,o);"boolean"==typeof a&&(t.stop(),t.return=a)}}),{priority:"high"})}},{key:"addAttributeCheck",value:function(e){this.on("checkAttribute",(function(t,n){var r=h(n,2),i=r[0],o=r[1],a=e(i,o);"boolean"==typeof a&&(t.stop(),t.return=a)}),{priority:"high"})}},{key:"getLimitElement",value:function(e){var t;for(t=e instanceof Fa?e.parent:(e instanceof Da?[e]:Array.from(e.getRanges())).reduce((function(e,t){var n=t.getCommonAncestor();return e?e.getCommonAncestor(n,{includeSelf:!0}):n}),null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}},{key:"checkAttributeInSelection",value:function(e,t){if(e.isCollapsed)return this.checkAttribute([].concat(f(e.getFirstPosition().getAncestors()),["$text"]),t);var n,r=e.getRanges(),i=d(r);try{for(i.s();!(n=i.n()).done;){var o,a=n.value,s=d(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(this.checkAttribute(c.item,t))return!0}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return!1}},{key:"getValidRanges",value:function(e,t){var n,r=[],i=d(e);try{for(i.s();!(n=i.n()).done;){var o,a=n.value,s=a.start,c=a.start,u=a.end,l=d(a.getWalker());try{for(l.s();!(o=l.n()).done;){var f=o.value;this.checkAttribute(f.item,t)||(c.isEqual(s)||r.push(new Da(c,s)),c=f.nextPosition),s=f.nextPosition}}catch(h){l.e(h)}finally{l.f()}c&&!c.isEqual(u)&&r.push(new Da(c,u))}}catch(h){i.e(h)}finally{i.f()}return r}},{key:"getNearestSelectionRange",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";if(this.checkChild(e,"$text"))return new Da(e);"both"!=r&&"backward"!=r||(t=new Ra({startPosition:e,direction:"backward"})),"both"!=r&&"forward"!=r||(n=new Ra({startPosition:e}));var i,o=d(s.mark((function e(t,n){var r,i,o;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1;case 1:if(r){e.next=18;break}if(r=!0,!t){e.next=9;break}if(i=t.next(),e.t0=i.done,e.t0){e.next=9;break}return r=!1,e.next=9,{walker:t,value:i.value};case 9:if(!n){e.next=16;break}if(o=n.next(),e.t1=o.done,e.t1){e.next=16;break}return r=!1,e.next=16,{walker:n,value:o.value};case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e)}))(t,n));try{for(o.s();!(i=o.n()).done;){var a=i.value,c=a.walker==t?"elementEnd":"elementStart",u=a.value;if(u.type==c&&this.isObject(u.item))return Da.createOn(u.item);if(this.checkChild(u.nextPosition,"$text"))return new Da(u.nextPosition)}}catch(l){o.e(l)}finally{o.f()}return null}},{key:"findAllowedParent",value:function(e,t){for(var n=t.parent;n;){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent}return null}},{key:"removeDisallowedAttributes",value:function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=d(o.getAttributeKeys());try{for(a.s();!(i=a.n()).done;){var s=i.value;this.checkAttribute(o,s)||t.removeAttribute(s,o)}}catch(c){a.e(c)}finally{a.f()}o.is("element")&&this.removeDisallowedAttributes(o.getChildren(),t)}}catch(c){r.e(c)}finally{r.f()}}},{key:"_clearCache",value:function(){this._compiledDefinitions=null}},{key:"_compile",value:function(){for(var e={},t=this._sourceDefinitions,n=Object.keys(t),r=0,i=n;r<i.length;r++){var o=i[r];e[o]=fs(t[o],o)}for(var a=0,s=n;a<s.length;a++)hs(e,s[a]);for(var c=0,u=n;c<u.length;c++)ds(e,u[c]);for(var l=0,f=n;l<f.length;l++){var h=f[l];vs(e,h),ps(e,h)}for(var d=0,v=n;d<v.length;d++){var p=v[d];gs(e,p),ms(e,p)}this._compiledDefinitions=e}},{key:"_checkContextMatch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1,r=t.getItem(n);if(e.allowIn.includes(r.name)){if(0==n)return!0;var i=this.getDefinition(r);return this._checkContextMatch(i,t,n-1)}return!1}}]),e}();H(us,Br);var ls=function(){function e(t){if(v(this,e),t instanceof e)return t;"string"==typeof t?t=[t]:Array.isArray(t)||(t=t.getAncestors({includeSelf:!0})),t[0]&&"string"!=typeof t[0]&&t[0].is("documentFragment")&&t.shift(),this._items=t.map(bs)}return p(e,[{key:"length",get:function(){return this._items.length}},{key:"last",get:function(){return this._items[this._items.length-1]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}},{key:"push",value:function(t){var n=new e([t]);return n._items=[].concat(f(this._items),f(n._items)),n}},{key:"getItem",value:function(e){return this._items[e]}},{key:"getNames",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this._items.map((function(e){return e.name})),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"endsWith",value:function(e){return Array.from(this.getNames()).join(" ").endsWith(e)}}]),e}();function fs(e,t){var n={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=Object.keys(o).filter((function(e){return e.startsWith("is")})),s=d(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;t[c]=o[c]}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}}(e,n),ys(e,n,"allowIn"),ys(e,n,"allowContentOf"),ys(e,n,"allowWhere"),ys(e,n,"allowAttributes"),ys(e,n,"allowAttributesOf"),ys(e,n,"inheritTypesFrom"),function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value.inheritAllFrom;i&&(t.allowContentOf.push(i),t.allowWhere.push(i),t.allowAttributesOf.push(i),t.inheritTypesFrom.push(i))}}catch(o){r.e(o)}finally{r.f()}}(e,n),n}function hs(e,t){var n,r=d(e[t].allowContentOf);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i]&&ks(e,i).forEach((function(e){e.allowIn.push(t)}))}}catch(o){r.e(o)}finally{r.f()}delete e[t].allowContentOf}function ds(e,t){var n,r=d(e[t].allowWhere);try{for(r.s();!(n=r.n()).done;){var i=e[n.value];if(i){var o,a=i.allowIn;(o=e[t].allowIn).push.apply(o,f(a))}}}catch(s){r.e(s)}finally{r.f()}delete e[t].allowWhere}function vs(e,t){var n,r=d(e[t].allowAttributesOf);try{for(r.s();!(n=r.n()).done;){var i=e[n.value];if(i){var o,a=i.allowAttributes;(o=e[t].allowAttributes).push.apply(o,f(a))}}}catch(s){r.e(s)}finally{r.f()}delete e[t].allowAttributesOf}function ps(e,t){var n,r=e[t],i=d(r.inheritTypesFrom);try{for(i.s();!(n=i.n()).done;){var o=e[n.value];if(o){var a,s=Object.keys(o).filter((function(e){return e.startsWith("is")})),c=d(s);try{for(c.s();!(a=c.n()).done;){var u=a.value;u in r||(r[u]=o[u])}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){i.e(l)}finally{i.f()}delete r.inheritTypesFrom}function gs(e,t){var n=e[t],r=n.allowIn.filter((function(t){return e[t]}));n.allowIn=Array.from(new Set(r))}function ms(e,t){var n=e[t];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function ys(e,t,n){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var o,a=r.value;"string"==typeof a[n]?t[n].push(a[n]):Array.isArray(a[n])&&(o=t[n]).push.apply(o,f(a[n]))}}catch(s){i.e(s)}finally{i.f()}}function ks(e,t){var n=e[t];return function(e){return Object.keys(e).map((function(t){return e[t]}))}(e).filter((function(e){return e.allowIn.includes(n.name)}))}function bs(e){return"string"==typeof e?{name:e,getAttributeKeys:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})),getAttribute:function(){}}:{name:e.is("element")?e.name:"$text",getAttributeKeys:s.mark((function t(){return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.getAttributeKeys(),"t0",1);case 1:case"end":return t.stop()}}),t)})),getAttribute:function(t){return e.getAttribute(t)}}}var ws=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e),this._removeIfEmpty=new Set,this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this)}return p(e,[{key:"convert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["$root"];this.fire("viewCleanup",e),this._modelCursor=function(e,t){var n,r,i=d(new ls(e));try{for(i.s();!(r=i.n()).done;){var o,a=r.value,s={},c=d(a.getAttributeKeys());try{for(c.s();!(o=c.n()).done;){var u=o.value;s[u]=a.getAttribute(u)}}catch(f){c.e(f)}finally{c.f()}var l=t.createElement(a.name,s);n&&t.append(l,n),n=Fa.createAt(l)}}catch(f){i.e(f)}finally{i.f()}return n}(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=ss.createFrom(e),this.conversionApi.store={};var r=this._convertItem(e,this._modelCursor).modelRange,i=t.createDocumentFragment();if(r){this._removeEmptyElements();for(var o=0,a=Array.from(this._modelCursor.parent.getChildren());o<a.length;o++){var s=a[o];t.append(s,i)}i.markers=function(e,t){var n,r=new Set,i=new Map,o=Da.createIn(e).getItems(),a=d(o);try{for(a.s();!(n=a.n()).done;){var s=n.value;"$marker"==s.name&&r.add(s)}}catch(v){a.e(v)}finally{a.f()}var c,u=d(r);try{for(u.s();!(c=u.n()).done;){var l=c.value,f=l.getAttribute("data-name"),h=Fa.createBefore(l);i.has(f)?i.get(f).end=Fa.createFromPosition(h):i.set(f,new Da(Fa.createFromPosition(h))),t.remove(l)}}catch(v){u.e(v)}finally{u.f()}return i}(i,t)}return this._modelCursor=null,this._removeIfEmpty.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}},{key:"_convertItem",value:function(e,t){var n=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,n,this.conversionApi):e.is("text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof Da))throw new R.b("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.");return{modelRange:n.modelRange,modelCursor:n.modelCursor}}},{key:"_convertChildren",value:function(e,t){for(var n=new Da(t),r=t,i=0,o=Array.from(e.getChildren());i<o.length;i++){var a=o[i],s=this._convertItem(a,r);s.modelRange instanceof Da&&(n.end=s.modelRange.end,r=s.modelCursor)}return{modelRange:n,modelCursor:r}}},{key:"_splitToAllowedParent",value:function(e,t){var n=this.conversionApi.schema.findAllowedParent(e,t);if(!n)return null;if(n===t.parent)return{position:t};if(this._modelCursor.parent.getAncestors().includes(n))return null;var r,i=this.conversionApi.writer.split(t,n),o=d(i.range.getPositions());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.isEqual(i.position)||this._removeIfEmpty.add(a.parent)}}catch(s){o.e(s)}finally{o.f()}return{position:i.position,cursorParent:i.range.end.parent}}},{key:"_removeEmptyElements",value:function(){var e,t=!1,n=d(this._removeIfEmpty);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isEmpty&&(this.conversionApi.writer.remove(r),this._removeIfEmpty.delete(r),t=!0)}}catch(i){n.e(i)}finally{n.f()}t&&this._removeEmptyElements()}}]),e}();function _s(e){var t=function(e){var t=new Yn(e.view);return function(n,r,i){var o=t.match(r.viewItem);if(o){o.match.name=!0;var a=function(e,t,n){return e instanceof Function?e(t,n):n.createElement(e)}(e.model,r.viewItem,i.writer);if(a&&i.consumable.test(r.viewItem,o.match)){var s=i.splitToAllowedParent(a,r.modelCursor);if(s){i.writer.insert(a,s.position);var c=i.convertChildren(r.viewItem,Fa.createAt(a));i.consumable.consume(r.viewItem,o.match),r.modelRange=new Da(Fa.createBefore(a),Fa.createAfter(c.modelCursor.parent)),s.cursorParent?r.modelCursor=Fa.createAt(s.cursorParent):r.modelCursor=r.modelRange.end}}}}}(e=Ja(e)),n=Cs(e),r=n?"element:"+n:"element";return function(n){n.on(r,t,{priority:e.converterPriority||"normal"})}}function xs(e){Ts(e=Ja(e));var t=Os(e,!1),n=Cs(e),r=n?"element:"+n:"element";return function(n){n.on(r,t,{priority:e.converterPriority||"normal"})}}function As(e){var t=null;("string"==typeof(e=Ja(e)).view||e.view.key)&&(t=function(e){"string"==typeof e.view&&(e.view={key:e.view});var t,n=e.view.key;if("class"==n||"style"==n)t=i({},"class"==n?"classes":"styles",e.view.value);else{var r=void 0===e.view.value?/[\s\S]*/:e.view.value;t={attributes:i({},n,r)}}return e.view.name&&(t.name=e.view.name),e.view=t,n}(e)),Ts(e,t);var n=Os(e,!0);return function(t){t.on("element",n,{priority:e.converterPriority||"low"})}}function Cs(e){return"string"==typeof e.view?e.view:"object"==typeof e.view&&"string"==typeof e.view.name?e.view.name:null}function Ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null===t||function(e){return e.getAttribute(t)},r="object"!=typeof e.model?e.model:e.model.key,i="object"!=typeof e.model||void 0===e.model.value?n:e.model.value;e.model={key:r,value:i}}function Os(e,t){var n=new Yn(e.view);return function(r,i,o){var a=n.match(i.viewItem);if(a){var s=e.model.key,c="function"==typeof e.model.value?e.model.value(i.viewItem):e.model.value;null!==c&&(function(e){return!("object"==typeof e.view&&!Cs(e))&&!e.view.classes&&!e.view.attributes&&!e.view.styles}(e)?a.match.name=!0:delete a.match.name,o.consumable.test(i.viewItem,a.match)&&(i.modelRange||(i=Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor))),function(e,t,n,r){for(var i=!1,o=0,a=Array.from(e.getItems({shallow:n}));o<a.length;o++){var s=a[o];r.schema.checkAttribute(s,t.key)&&(r.writer.setAttribute(t.key,t.value,s),i=!0)}return i}(i.modelRange,{key:s,value:c},t,o)&&o.consumable.consume(i.viewItem,a.match)))}}}H(ws,B);var Ss=function(){function e(t,n){v(this,e),this.model=t,this.processor=n,this.mapper=new Na,this.downcastDispatcher=new Va({mapper:this.mapper}),this.downcastDispatcher.on("insert:$text",(function(e,t,n){if(n.consumable.consume(t.item,"insert")){var r=n.writer,i=n.mapper.toViewPosition(t.range.start),o=r.createText(t.item.data);r.insert(i,o)}}),{priority:"lowest"}),this.upcastDispatcher=new ws({schema:t.schema}),this.upcastDispatcher.on("text",(function(e,t,n){if(n.schema.checkChild(t.modelCursor,"$text")&&n.consumable.consume(t.viewItem)){var r=n.writer.createText(t.viewItem.data);n.writer.insert(r,t.modelCursor),t.modelRange=Da.createFromPositionAndShift(t.modelCursor,r.offsetSize),t.modelCursor=t.modelRange.end}}),{priority:"lowest"}),this.upcastDispatcher.on("element",(function(e,t,n){if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){var r=n.convertChildren(t.viewItem,t.modelCursor),i=r.modelRange,o=r.modelCursor;t.modelRange=i,t.modelCursor=o}}),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(function(e,t,n){if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){var r=n.convertChildren(t.viewItem,t.modelCursor),i=r.modelRange,o=r.modelCursor;t.modelRange=i,t.modelCursor=o}}),{priority:"lowest"}),this.decorate("init")}return p(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.stringify(this.model.document.getRoot(e))}},{key:"stringify",value:function(e){var t=this.toView(e);return this.processor.toData(t)}},{key:"toView",value:function(e){var t=Da.createIn(e),n=new ki,r=new bi(new ni);if(this.mapper.bindElements(e,n),this.downcastDispatcher.convertInsert(t,r),!e.is("documentFragment")){var i,o=function(e){var t=[],n=e.root.document;if(!n)return[];var r,i=Da.createIn(e),o=d(n.model.markers);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=i.getIntersection(a.getRange());s&&t.push([a.name,s])}}catch(c){o.e(c)}finally{o.f()}return t}(e),a=d(o);try{for(a.s();!(i=a.n()).done;){var s=h(i.value,2),c=s[0],u=s[1];this.downcastDispatcher.convertMarkerAdd(c,u,r)}}catch(l){a.e(l)}finally{a.f()}}return this.mapper.clearBindings(),n}},{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.model.document.version)throw new R.b("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.");var r=this.model.document.getRoot(n);return this.model.enqueueChange("transparent",(function(n){n.insert(t.parse(e,r),r)})),Promise.resolve()}},{key:"set",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",r=this.model.document.getRoot(n);this.model.enqueueChange("transparent",(function(n){n.setSelection(null),n.removeSelectionAttribute(t.model.document.selection.getAttributeKeys()),n.remove(Da.createIn(r)),n.insert(t.parse(e,r),r)}))}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root",n=this.processor.toView(e);return this.toModel(n,t)}},{key:"toModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root";return this.model.change((function(r){return t.upcastDispatcher.convert(e,r,n)}))}},{key:"destroy",value:function(){}}]),e}();H(Ss,Br);var Ps=function(){function e(){v(this,e),this._dispatchersGroups=new Map}return p(e,[{key:"register",value:function(e,t){if(this._dispatchersGroups.has(e))throw new R.b("conversion-register-group-exists: Trying to register a group name that was already registered.");this._dispatchersGroups.set(e,t)}},{key:"for",value:function(e){var t=this._getDispatchers(e);return{add:function(e){return function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;)t(n.value)}catch(i){r.e(i)}finally{r.f()}}(t,e),this}}}},{key:"elementToElement",value:function(e){this.for("downcast").add(Ya(e));var t,n=d(Es(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.model,o=r.view;this.for("upcast").add(_s({model:i,view:o,converterPriority:e.converterPriority}))}}catch(a){n.e(a)}finally{n.f()}}},{key:"attributeToElement",value:function(e){this.for("downcast").add(Qa(e));var t,n=d(Es(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.model,o=r.view;this.for("upcast").add(xs({view:o,model:i,priority:e.priority}))}}catch(a){n.e(a)}finally{n.f()}}},{key:"attributeToAttribute",value:function(e){this.for("downcast").add(Xa(e));var t,n=d(Es(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.model,o=r.view;this.for("upcast").add(As({view:o,model:i}))}}catch(a){n.e(a)}finally{n.f()}}},{key:"_getDispatchers",value:function(e){var t=this._dispatchersGroups.get(e);if(!t)throw new R.b("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.");return t}}]),e}();function Es(e){var t,n,i;return s.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.model.values){r.next=19;break}t=d(e.model.values),r.prev=2,t.s();case 4:if((n=t.n()).done){r.next=9;break}return i=n.value,r.delegateYield(Rs({key:e.model.key,value:i},e.view[i],e.upcastAlso?e.upcastAlso[i]:void 0),"t0",7);case 7:r.next=4;break;case 9:r.next=14;break;case 11:r.prev=11,r.t1=r.catch(2),t.e(r.t1);case 14:return r.prev=14,t.f(),r.finish(14);case 17:r.next=20;break;case 19:return r.delegateYield(Rs(e.model,e.view,e.upcastAlso),"t2",20);case 20:case"end":return r.stop()}}),r,null,[[2,11,14,17]])}function Rs(e,t,n){var r,i,o;return s.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,{model:e,view:t};case 2:if(!n){a.next=21;break}n=Array.isArray(n)?n:[n],r=d(n),a.prev=5,r.s();case 7:if((i=r.n()).done){a.next=13;break}return o=i.value,a.next=11,{model:e,view:o};case 11:a.next=7;break;case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(5),r.e(a.t0);case 18:return a.prev=18,r.f(),a.finish(18);case 21:case"end":return a.stop()}}),y,null,[[5,15,18,21]])}var Is=function(){function e(t){v(this,e),this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion}return p(e,[{key:"_validate",value:function(){}},{key:"toJSON",value:function(){var e=qn(this,!0);return e.__className=this.constructor.className,delete e.delta,delete e.isDocumentOperation,e}}],[{key:"className",get:function(){return"engine.model.operation.Operation"}},{key:"fromJSON",value:function(e){return new this(e.baseVersion)}}]),e}(),Ms=function(){function e(t){v(this,e),this.markers=new Map,this._children=new Pa,t&&this._insertChild(0,t)}return p(e,[{key:Symbol.iterator,value:function(){return this.getChildren()}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"is",value:function(e){return"documentFragment"==e}},{key:"getChild",value:function(e){return this._children.getNode(e)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(e){return this._children.getNodeIndex(e)}},{key:"getChildStartOffset",value:function(e){return this._children.getNodeStartOffset(e)}},{key:"getPath",value:function(){return[]}},{key:"getNodeByPath",value:function(e){var t,n=this,r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.getChild(n.offsetToIndex(i))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"offsetToIndex",value:function(e){return this._children.offsetToIndex(e)}},{key:"toJSON",value:function(){var e,t=[],n=d(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toJSON())}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"_appendChild",value:function(e){this._insertChild(this.childCount,e)}},{key:"_insertChild",value:function(e,t){var n,r=function(e){return"string"==typeof e?[new Oa(e)]:(Jn(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new Oa(e):e instanceof Sa?new Oa(e.data,e.getAttributes()):e})))}(t),i=d(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;null!==o.parent&&o._remove(),o.parent=this}}catch(a){i.e(a)}finally{i.f()}this._children._insertNodes(e,r)}},{key:"_removeChildren",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this._children._removeNodes(e,n),i=d(r);try{for(i.s();!(t=i.n()).done;)t.value.parent=null}catch(o){i.e(o)}finally{i.f()}return r}}],[{key:"fromJSON",value:function(t){var n,r=[],i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.name?r.push(Ea.fromJSON(o)):r.push(Oa.fromJSON(o))}}catch(a){i.e(a)}finally{i.f()}return new e(r)}}]),e}();function Fs(e,t){var n=(t=Ns(t)).reduce((function(e,t){return e+t.offsetSize}),0),r=e.parent;Bs(e);var i=e.index;return r._insertChild(i,t),js(r,i+t.length),js(r,i),new Da(e,e.getShiftedBy(n))}function Ds(e){if(!e.isFlat)throw new R.b("operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.");var t=e.start.parent;Bs(e.start),Bs(e.end);var n=t._removeChildren(e.start.index,e.end.index-e.start.index);return js(t,e.start.index),n}function Ns(e){var t=[];e instanceof Array||(e=[e]);for(var n=0;n<e.length;n++)if("string"==typeof e[n])t.push(new Oa(e[n]));else if(e[n]instanceof Sa)t.push(new Oa(e[n].data,e[n].getAttributes()));else if(e[n]instanceof Ms||e[n]instanceof Pa){var r,i=d(e[n]);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.push(o)}}catch(u){i.e(u)}finally{i.f()}}else e[n]instanceof Ta&&t.push(e[n]);for(var a=1;a<t.length;a++){var s=t[a],c=t[a-1];s instanceof Oa&&c instanceof Oa&&Vs(s,c)&&(t.splice(a-1,2,new Oa(c.data+s.data,c.getAttributes())),a--)}return t}function js(e,t){var n=e.getChild(t-1),r=e.getChild(t);if(n&&r&&n.is("text")&&r.is("text")&&Vs(n,r)){var i=new Oa(n.data+r.data,n.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,i)}}function Bs(e){var t=e.textNode,n=e.parent;if(t){var r=e.offset-t.startOffset,i=t.index;n._removeChildren(i,1);var o=new Oa(t.data.substr(0,r),t.getAttributes()),a=new Oa(t.data.substr(r),t.getAttributes());n._insertChild(i,[o,a])}}function Vs(e,t){var n,r=e.getAttributes(),i=t.getAttributes(),o=d(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a[1]!==t.getAttribute(a[0]))return!1;i.next()}}catch(s){o.e(s)}finally{o.f()}return i.next().done}var Ls=function(e,t){return Ko(e,t)},zs=function(e){g(n,e);var t=m(n);function n(e,r,i,o,a){var s;return v(this,n),(s=t.call(this,a)).range=Da.createFromRange(e),s.key=r,s.oldValue=void 0===i?null:i,s.newValue=void 0===o?null:o,s}return p(n,[{key:"type",get:function(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}},{key:"clone",value:function(){return new n(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"_validate",value:function(){var e,t=d(this.range.getItems());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==this.oldValue&&!Ls(n.getAttribute(this.key),this.oldValue))throw new R.b("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",{item:n,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&n.hasAttribute(this.key))throw new R.b("attribute-operation-attribute-exists: The attribute with given key already exists.",{node:n,key:this.key})}}catch(r){t.e(r)}finally{t.f()}}},{key:"_execute",value:function(){Ls(this.oldValue,this.newValue)||function(e,t,n){Bs(e.start),Bs(e.end);var r,i=d(e.getItems());try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.is("textProxy")?o.textNode:o;null!==n?a._setAttribute(t,n):a._removeAttribute(t),js(a.parent,a.index)}}catch(s){i.e(s)}finally{i.f()}js(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}}],[{key:"className",get:function(){return"engine.model.operation.AttributeOperation"}},{key:"fromJSON",value:function(e,t){return new n(Da.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}]),n}(Is),Ws=function(e){g(n,e);var t=m(n);function n(e,r,i,o){var a;return v(this,n),(a=t.call(this,o)).sourcePosition=Fa.createFromPosition(e),a.howMany=r,a.targetPosition=Fa.createFromPosition(i),a.isSticky=!1,a}return p(n,[{key:"type",get:function(){return"move"}},{key:"clone",value:function(){var e=new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);return e.isSticky=this.isSticky,e}},{key:"getMovedRangeStart",value:function(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}},{key:"getReversed",value:function(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany),t=new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1);return t.isSticky=this.isSticky,t}},{key:"_validate",value:function(){var e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(!e||!t)throw new R.b("move-operation-position-invalid: Source position or target position is invalid.");if(n+this.howMany>e.maxOffset)throw new R.b("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.");if(e===t&&n<r&&r<n+this.howMany)throw new R.b("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.");if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Un(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var i=this.sourcePosition.path.length-1;if(this.targetPosition.path[i]>=n&&this.targetPosition.path[i]<n+this.howMany)throw new R.b("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.")}}},{key:"_execute",value:function(){!function(e,t){if(!e.isFlat)throw new R.b("operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.");var n=Ds(e);Fs(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),n)}(Da.createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}}],[{key:"className",get:function(){return"engine.model.operation.MoveOperation"}},{key:"fromJSON",value:function(e,t){var n=Fa.fromJSON(e.sourcePosition,t),r=Fa.fromJSON(e.targetPosition,t),i=new this(n,e.howMany,r,e.baseVersion);return e.isSticky&&(i.isSticky=!0),i}}]),n}(Is),qs=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"position",get:function(){return this.targetPosition},set:function(e){this.targetPosition=e}},{key:"type",get:function(){return"reinsert"}},{key:"getReversed",value:function(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Us(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}},{key:"_validate",value:function(){if(u(l(n.prototype),"_validate",this).call(this),!this.sourcePosition.root.document)throw new R.b("reinsert-operation-on-detached-item: Cannot reinsert detached item.");if(!this.targetPosition.root.document)throw new R.b("reinsert-operation-to-detached-parent: Cannot reinsert item to detached parent.")}}],[{key:"className",get:function(){return"engine.model.operation.ReinsertOperation"}}]),n}(Ws),Us=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"remove"}},{key:"getReversed",value:function(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new qs(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}},{key:"_validate",value:function(){if(u(l(n.prototype),"_validate",this).call(this),!this.sourcePosition.root.document)throw new R.b("remove-operation-on-detached-item: Cannot remove detached item.")}}],[{key:"className",get:function(){return"engine.model.operation.RemoveOperation"}}]),n}(Ws),Hs=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;return v(this,n),(o=t.call(this,i)).position=Fa.createFromPosition(e),o.nodes=new Pa(Ns(r)),o}return p(n,[{key:"type",get:function(){return"insert"}},{key:"clone",value:function(){var e=new Pa(f(this.nodes).map((function(e){return e._clone(!0)})));return new n(this.position,e,this.baseVersion)}},{key:"getReversed",value:function(){var e=this.position.root.document.graveyard,t=new Fa(e,[0]);return new Us(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new R.b("insert-operation-position-invalid: Insertion position is invalid.")}},{key:"_execute",value:function(){var e=this.nodes;this.nodes=new Pa(f(e).map((function(e){return e._clone(!0)}))),Fs(this.position,e)}}],[{key:"className",get:function(){return"engine.model.operation.InsertOperation"}},{key:"fromJSON",value:function(e,t){var r,i=[],o=d(e.nodes);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.name?i.push(Ea.fromJSON(a)):i.push(Oa.fromJSON(a))}}catch(s){o.e(s)}finally{o.f()}return new n(Fa.fromJSON(e.position,t),i,e.baseVersion)}}]),n}(Is),$s=function(e){g(n,e);var t=m(n);function n(e,r,i,o,a,s){var c;return v(this,n),(c=t.call(this,a)).name=e,c.oldRange=r?Da.createFromRange(r):null,c.newRange=i?Da.createFromRange(i):null,c.affectsData=s,c._markers=o,c}return p(n,[{key:"type",get:function(){return"marker"}},{key:"clone",value:function(){return new n(this.name,this.oldRange,this.newRange,this._markers,this.baseVersion,this.affectsData)}},{key:"getReversed",value:function(){return new n(this.name,this.newRange,this.oldRange,this._markers,this.baseVersion+1,this.affectsData)}},{key:"_execute",value:function(){var e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData)}},{key:"toJSON",value:function(){var e=u(l(n.prototype),"toJSON",this).call(this);return delete e._markers,e}}],[{key:"className",get:function(){return"engine.model.operation.MarkerOperation"}},{key:"fromJSON",value:function(e,t){return new n(e.name,e.oldRange?Da.fromJSON(e.oldRange,t):null,e.newRange?Da.fromJSON(e.newRange,t):null,t.model.markers,e.baseVersion,e.affectsData)}}]),n}(Is),Ks=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"noop"}},{key:"clone",value:function(){return new n(this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.baseVersion+1)}},{key:"_execute",value:function(){}}],[{key:"className",get:function(){return"engine.model.operation.NoOperation"}}]),n}(Is),Gs=function(e){g(n,e);var t=m(n);function n(e,r,i,o){var a;return v(this,n),(a=t.call(this,o)).position=e,a.oldName=r,a.newName=i,a}return p(n,[{key:"type",get:function(){return"rename"}},{key:"clone",value:function(){return new n(Fa.createFromPosition(this.position),this.oldName,this.newName,this.baseVersion)}},{key:"getReversed",value:function(){return new n(Fa.createFromPosition(this.position),this.newName,this.oldName,this.baseVersion+1)}},{key:"_validate",value:function(){var e=this.position.nodeAfter;if(!(e instanceof Ea))throw new R.b("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.");if(e.name!==this.oldName)throw new R.b("rename-operation-wrong-name: Element to change has different name than operation's old name.")}},{key:"_execute",value:function(){this.position.nodeAfter.name=this.newName}}],[{key:"className",get:function(){return"engine.model.operation.RenameOperation"}},{key:"fromJSON",value:function(e,t){return new n(Fa.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}]),n}(Is),Js=function(e){g(n,e);var t=m(n);function n(e,r,i,o,a){var s;return v(this,n),(s=t.call(this,a)).root=e,s.key=r,s.oldValue=i,s.newValue=o,s}return p(n,[{key:"type",get:function(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}},{key:"clone",value:function(){return new n(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new n(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"_validate",value:function(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new R.b("rootattribute-operation-not-a-root: The element to change is not a root element.",{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new R.b("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new R.b("rootattribute-operation-attribute-exists: The attribute with given key already exists.",{root:this.root,key:this.key})}},{key:"_execute",value:function(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}}],[{key:"className",get:function(){return"engine.model.operation.RootAttributeOperation"}},{key:"fromJSON",value:function(e,t){if(!t.getRoot(e.root))throw new R.b("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",{rootName:e});return new n(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}]),n}(Is),Ys={};Ys[zs.className]=zs,Ys[Hs.className]=Hs,Ys[$s.className]=$s,Ys[Ws.className]=Ws,Ys[Ks.className]=Ks,Ys[Is.className]=Is,Ys[qs.className]=qs,Ys[Us.className]=Us,Ys[Gs.className]=Gs,Ys[Js.className]=Js;var Qs=function(){function e(){v(this,e)}return p(e,null,[{key:"fromJSON",value:function(e,t){return Ys[e.__className].fromJSON(e,t)}}]),e}(),Xs=new Map,Zs=function(){function e(){v(this,e)}return p(e,null,[{key:"fromJSON",value:function(e,t){if(!Xs.has(e.__className))throw new R.b("delta-fromjson-no-deserializer: This delta has no defined deserializer",{name:e.__className});var n,r=new(Xs.get(e.__className)),i=d(e.operations);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.addOperation(Qs.fromJSON(o,t))}}catch(s){i.e(s)}finally{i.f()}for(var a in e)"__className"!=a&&void 0===r[a]&&(r[a]=e[a]);return r}},{key:"register",value:function(e){Xs.set(e.className,e)}}]),e}(),ec=function(){function e(){v(this,e),this.batch=null,this.operations=[]}return p(e,[{key:"baseVersion",get:function(){return this.operations.length>0?this.operations[0].baseVersion:null},set:function(e){var t,n=d(this.operations);try{for(n.s();!(t=n.n()).done;)t.value.baseVersion=e++}catch(r){n.e(r)}finally{n.f()}}},{key:"_reverseDeltaClass",get:function(){return e}},{key:"addOperation",value:function(e){return e.delta=this,this.operations.push(e),e}},{key:"clone",value:function(){var e,t=new this.constructor,n=d(this.operations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.addOperation(r.clone())}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getReversed",value:function(){var e,t=new this._reverseDeltaClass,n=d(this.operations);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.addOperation(r.getReversed())}}catch(o){n.e(o)}finally{n.f()}t.operations.reverse();for(var i=0;i<t.operations.length;i++)t.operations[i].baseVersion=this.operations[this.operations.length-1].baseVersion+i+1;return t}},{key:"toJSON",value:function(){var e=qn(this);return e.__className=this.constructor.className,delete e.batch,e}}],[{key:"className",get:function(){return"engine.model.delta.Delta"}}]),e}();Zs.register(ec);var tc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"attribute"}},{key:"key",get:function(){return this.operations[0]?this.operations[0].key:null}},{key:"value",get:function(){return this.operations[0]?this.operations[0].newValue:null}},{key:"range",get:function(){if(this._range)return this._range;var e,t=null,n=null,r=d(this.operations);try{for(r.s();!(e=r.n()).done;){var i=e.value;i instanceof Ks||((null===t||t.isAfter(i.range.start))&&(t=i.range.start),(null===n||n.isBefore(i.range.end))&&(n=i.range.end))}}catch(o){r.e(o)}finally{r.f()}return t&&n?(this._range=new Da(t,n),this._range):null}},{key:"_reverseDeltaClass",get:function(){return n}},{key:"toJSON",value:function(){var e=u(l(n.prototype),"toJSON",this).call(this);return delete e._range,e}}],[{key:"className",get:function(){return"engine.model.delta.AttributeDelta"}}]),n}(ec);Zs.register(tc);var nc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"split"}},{key:"position",get:function(){return this._moveOperation?this._moveOperation.sourcePosition:null}},{key:"_cloneOperation",get:function(){return this.operations[0]||null}},{key:"_moveOperation",get:function(){return this.operations[1]&&this.operations[1]instanceof Ws?this.operations[1]:null}},{key:"_reverseDeltaClass",get:function(){return rc}}],[{key:"className",get:function(){return"engine.model.delta.SplitDelta"}}]),n}(ec);Zs.register(nc);var rc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"merge"}},{key:"position",get:function(){return this._removeOperation?this._removeOperation.sourcePosition:null}},{key:"_removeOperation",get:function(){return this.operations[1]||null}},{key:"_reverseDeltaClass",get:function(){return nc}}],[{key:"className",get:function(){return"engine.model.delta.MergeDelta"}}]),n}(ec);Zs.register(rc);var ic=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"move"}},{key:"howMany",get:function(){return this._moveOperation?this._moveOperation.howMany:null}},{key:"sourcePosition",get:function(){return this._moveOperation?this._moveOperation.sourcePosition:null}},{key:"targetPosition",get:function(){return this._moveOperation?this._moveOperation.targetPosition:null}},{key:"_moveOperation",get:function(){return this.operations[0]||null}},{key:"_reverseDeltaClass",get:function(){return n}}],[{key:"className",get:function(){return"engine.model.delta.MoveDelta"}}]),n}(ec);Zs.register(ic);var oc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"className",get:function(){return"engine.model.delta.RemoveDelta"}}]),n}(ic);Zs.register(oc);var ac=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"rename"}},{key:"_reverseDeltaClass",get:function(){return n}}],[{key:"className",get:function(){return"engine.model.delta.RenameDelta"}}]),n}(ec);Zs.register(ac);var sc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"wrap"}},{key:"range",get:function(){var e=this._moveOperation;return e?Da.createFromPositionAndShift(e.sourcePosition,e.howMany):null}},{key:"howMany",get:function(){var e=this.range;return e?e.end.offset-e.start.offset:0}},{key:"_insertOperation",get:function(){return this.operations[0]||null}},{key:"_moveOperation",get:function(){return this.operations[1]||null}},{key:"_reverseDeltaClass",get:function(){return cc}}],[{key:"className",get:function(){return"engine.model.delta.WrapDelta"}}]),n}(ec);Zs.register(sc);var cc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"unwrap"}},{key:"position",get:function(){return this._moveOperation?this._moveOperation.targetPosition:null}},{key:"_moveOperation",get:function(){return this.operations[0]||null}},{key:"_reverseDeltaClass",get:function(){return sc}}],[{key:"className",get:function(){return"engine.model.delta.UnwrapDelta"}}]),n}(ec);Zs.register(cc);var uc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"insert"}},{key:"position",get:function(){return this._insertOperation?this._insertOperation.position:null}},{key:"nodes",get:function(){return this._insertOperation?this._insertOperation.nodes:null}},{key:"_insertOperation",get:function(){return this.operations[0]||null}},{key:"_reverseDeltaClass",get:function(){return oc}}],[{key:"className",get:function(){return"engine.model.delta.InsertDelta"}}]),n}(ec);Zs.register(uc);var lc=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"className",get:function(){return"engine.model.delta.WeakInsertDelta"}}]),n}(uc);Zs.register(lc);var fc=function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isStrong:!1};e instanceof Hs?n=hc.InsertOperation:e instanceof zs?n=hc.AttributeOperation:e instanceof Js?n=hc.RootAttributeOperation:e instanceof Gs?n=hc.RenameOperation:e instanceof $s?n=hc.MarkerOperation:e instanceof Ws?n=hc.MoveOperation:r=dc,n&&(r=t instanceof Hs?n.InsertOperation:t instanceof zs?n.AttributeOperation:t instanceof Js?n.RootAttributeOperation:t instanceof Gs?n.RenameOperation:t instanceof $s?n.MarkerOperation:t instanceof Ws?n.MoveOperation:dc);var o=r(e,t,i);return function(e,t){for(var n=0;n<t.length;n++)t[n].baseVersion=e+n+1;return t}(e.baseVersion,o)},hc={InsertOperation:{InsertOperation:function(e,t,n){var r=e.clone(),i=void 0===n.insertBefore?!n.isStrong:n.insertBefore;return r.position=r.position._getTransformedByInsertion(t.position,t.nodes.maxOffset,i),[r]},AttributeOperation:dc,RootAttributeOperation:dc,RenameOperation:dc,MarkerOperation:dc,MoveOperation:function(e,t,n){var r=e.clone(),i=void 0===n.insertBefore?!n.isStrong:n.insertBefore;return r.position=e.position._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,i,t.isSticky&&!n.forceNotSticky),[r]}},AttributeOperation:{InsertOperation:function(e,t){return e.range._getTransformedByInsertion(t.position,t.nodes.maxOffset,!0,!1).reverse().map((function(t){return new zs(t,e.key,e.oldValue,e.newValue,e.baseVersion)}))},AttributeOperation:function(e,t,n){if(e.key===t.key){var r=e.range.getDifference(t.range).map((function(t){return new zs(t,e.key,e.oldValue,e.newValue,e.baseVersion)})),i=e.range.getIntersection(t.range);return i&&(n.isStrong?r.push(new zs(i,t.key,t.newValue,e.newValue,e.baseVersion)):0===r.length&&r.push(new Ks(0))),r}return[e.clone()]},RootAttributeOperation:dc,RenameOperation:dc,MarkerOperation:dc,MoveOperation:function(e,t){var n=Da.createFromPositionAndShift(t.sourcePosition,t.howMany),r=[],i=function(e){return 0===e.length?null:(1==e.length||(e[0].end=e[e.length-1].end),e[0])}(e.range.getDifference(n)),o=e.range.getIntersection(n);return null!==i&&(i.start=i.start._getTransformedByDeletion(t.sourcePosition,t.howMany),i.end=i.end._getTransformedByDeletion(t.sourcePosition,t.howMany),r=i._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,!0,!1).reverse()),null!==o&&(o.start=o.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),o.end=o.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.push(o)),r.map((function(t){return new zs(t,e.key,e.oldValue,e.newValue,e.baseVersion)}))}},RootAttributeOperation:{InsertOperation:dc,AttributeOperation:dc,RootAttributeOperation:function(e,t,n){return e.root!==t.root||e.key!==t.key||(e.newValue===t.newValue||n.isStrong)&&e.newValue!==t.newValue?[e.clone()]:[new Ks(e.baseVersion)]},RenameOperation:dc,MarkerOperation:dc,MoveOperation:dc},RenameOperation:{InsertOperation:function(e,t){var n=e.clone();return n.position=n.position._getTransformedByInsertion(t.position,t.nodes.maxOffset,!0),[n]},AttributeOperation:dc,RootAttributeOperation:dc,RenameOperation:function(e,t,n){var r=e.clone();if(e.position.isEqual(t.position)){if(!n.isStrong)return[new Ks(e.baseVersion)];r.oldName=t.newName}return[r]},MarkerOperation:dc,MoveOperation:function(e,t){var n=e.clone(),r=n.position.isEqual(t.sourcePosition);return n.position=n.position._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!0,r),[n]}},MarkerOperation:{InsertOperation:function(e,t){var n=e.clone();return n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertion(t.position,t.nodes.maxOffset,!1,!1)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertion(t.position,t.nodes.maxOffset,!1,!1)[0]),[n]},AttributeOperation:dc,RootAttributeOperation:dc,RenameOperation:dc,MarkerOperation:function(e,t,n){var r=e.clone();if(e.name==t.name){if(!n.isStrong)return[new Ks(e.baseVersion)];r.oldRange=t.newRange}return[r]},MoveOperation:function(e,t){var n=e.clone();if(n.oldRange){var r=n.oldRange._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);n.oldRange=Da.createFromRanges(r)}if(n.newRange){var i=n.newRange._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);n.newRange=Da.createFromRanges(i)}return[n]}},MoveOperation:{InsertOperation:function(e,t,n){var r=Da.createFromPositionAndShift(e.sourcePosition,e.howMany),i=e.isSticky&&!n.forceNotSticky;r=r._getTransformedByInsertion(t.position,t.nodes.maxOffset,!1,i)[0];var o=void 0===n.insertBefore?!n.isStrong:n.insertBefore,a=new e.constructor(r.start,r.end.offset-r.start.offset,e.targetPosition._getTransformedByInsertion(t.position,t.nodes.maxOffset,o),e.baseVersion);return a.isSticky=e.isSticky,[a]},AttributeOperation:dc,RootAttributeOperation:dc,RenameOperation:dc,MarkerOperation:dc,MoveOperation:function(e,t,n){var r=Da.createFromPositionAndShift(e.sourcePosition,e.howMany),i=Da.createFromPositionAndShift(t.sourcePosition,t.howMany),o=n.isStrong,a=e.isSticky&&!n.forceNotSticky,s=void 0===n.insertBefore?!o:n.insertBefore,c=e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,s,t.isSticky&&!n.forceNotSticky);if(vc(e,t)&&vc(t,e))return[t.getReversed()];var u=r.containsPosition(t.targetPosition)||r.start.isEqual(t.targetPosition)&&a||r.end.isEqual(t.targetPosition)&&a;if(u&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!a),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,a),pc([r],c,e);if((i.containsPosition(e.targetPosition)||i.start.isEqual(e.targetPosition)&&t.isSticky&&!n.forceNotSticky||i.end.isEqual(e.targetPosition)&&t.isSticky&&!n.forceNotSticky)&&i.containsRange(r,!0))return r.start=r.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.end=r.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),pc([r],c,e);var l=Un(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!a),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,a),pc([r],c,e);n.forceWeakRemove||(e instanceof Us&&!(t instanceof Us)?o=!0:!(e instanceof Us)&&t instanceof Us&&(o=!1));var h,v=[],p=r.getDifference(i),g=d(p);try{for(g.s();!(h=g.n()).done;){var m=h.value;m.start=m.start._getTransformedByDeletion(t.sourcePosition,t.howMany),m.end=m.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var y="same"==Un(m.start.getParentPath(),t.getMovedRangeStart().getParentPath()),k=m._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,y,a);v.push.apply(v,f(k))}}catch(w){g.e(w)}finally{g.f()}var b=r.getIntersection(i);return null!==b&&o&&!u&&(b.start=b.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),b.end=b.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===v.length?v.push(b):1==v.length?i.start.isBefore(r.start)||i.start.isEqual(r.start)?v.unshift(b):v.push(b):v.splice(1,0,b)),0===v.length?[new Ks(e.baseVersion)]:pc(v,c,e)}}};function dc(e){return[e.clone()]}function vc(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function pc(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=gc(e[i],t,n.isSticky);r.push(o);for(var a=i+1;a<e.length;a++)e[a]=e[a]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany,!0,!1)}return r}function gc(e,t,n){var r=new("$graveyard"==t.root.rootName?Us:"$graveyard"==e.start.root.rootName?qs:Ws)(e.start,e.end.offset-e.start.offset,t,0);return r.isSticky=n,r}var mc=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o},yc=Math.ceil,kc=Math.max,bc=function(e,t,n){t=(n?rr(e,t,n):void 0===t)?1:kc(yr(t),0);var r=e?e.length:0;if(!r||t<1)return[];for(var i=0,o=0,a=Array(yc(r/t));i<r;)a[o++]=mc(e,i,i+=t);return a},wc=function(e){for(var t=-1,n=e?e.length:0,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},_c=function(e){return vt(e)||dt(e)},xc=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=_c),o||(o=[]);++a<s;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,i,o):It(o,c):i||(o[o.length]=c)}return o},Ac=function(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return e?It(vt(n)?Ot(n):[n],xc(t,1)):[]},Cc=function(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!=o)return i}return-1},Tc=function(e,t,n){if(t!=t)return Cc(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1},Oc=function(e,t){return!!e.length&&Tc(e,t,0)>-1},Sc=function(e,t,n){for(var r=-1,i=e.length;++r<i;)if(n(t,e[r]))return!0;return!1},Pc=function(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},Ec=function(e){return function(t){return e(t)}},Rc=function(e,t){return e.has(t)},Ic=200,Mc=function(e,t,n,r){var i=-1,o=Oc,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=Pc(t,Ec(n))),r?(o=Sc,a=!1):t.length>=Ic&&(o=Rc,a=!1,t=new po(t));e:for(;++i<s;){var l=e[i],f=n?n(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var h=u;h--;)if(t[h]===f)continue e;c.push(l)}else o(t,f,r)||c.push(l)}return c},Fc=wr((function(e,t){return st(e)?Mc(e,xc(t,1,st,!0)):[]})),Dc=1,Nc=2,jc=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var f=new $e;if(r)var h=r(u,l,c,e,t,f);if(!(void 0===h?Ko(l,u,r,Dc|Nc,f):h))return!1}}return!0},Bc=function(e){return e==e&&!ae(e)},Vc=function(e,t){return Pc(t,(function(t){return[t,e[t]]}))},Lc=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n},zc="[object Map]",Wc="[object Set]",qc=function(e){return function(t){var n=$t(t);return n==zc?en(t):n==Wc?Lc(t):Vc(t,e(t))}}(At),Uc=function(e){for(var t=qc(e),n=t.length;n--;)t[n][2]=Bc(t[n][1]);return t},Hc=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},$c=function(e){var t=Uc(e);return 1==t.length&&t[0][2]?Hc(t[0][0],t[0][1]):function(n){return n===e||jc(n,e,t)}},Kc="Expected a function";function Gc(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Kc);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Gc.Cache||We),n}Gc.Cache=We;var Jc=Gc,Yc=1/0,Qc=cn?cn.prototype:void 0,Xc=Qc?Qc.toString:void 0,Zc=function(e){if("string"==typeof e)return e;if(sr(e))return Xc?Xc.call(e):"";var t=e+"";return"0"==t&&1/e==-Yc?"-0":t},eu=function(e){return null==e?"":Zc(e)},tu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,nu=/\\(\\)?/g,ru=Jc((function(e){var t=[];return eu(e).replace(tu,(function(e,n,r,i){t.push(r?i.replace(nu,"$1"):n||e)})),t})),iu=function(e){return vt(e)?e:ru(e)},ou=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,au=/^\w*$/,su=function(e,t){if(vt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!sr(e))||au.test(e)||!ou.test(e)||null!=t&&e in Object(t)},cu=1/0,uu=function(e){if("string"==typeof e||sr(e))return e;var t=e+"";return"0"==t&&1/e==-cu?"-0":t},lu=function(e,t){for(var n=0,r=(t=su(t,e)?[t]:iu(t)).length;null!=e&&n<r;)e=e[uu(t[n++])];return n&&n==r?e:void 0},fu=function(e,t,n){var r=null==e?void 0:lu(e,t);return void 0===r?n:r},hu=function(e,t){return t in Object(e)},du=function(e,t,n){for(var r,i=-1,o=(t=su(t,e)?[t]:iu(t)).length;++i<o;){var a=uu(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(o=e?e.length:0)&&ot(o)&&wt(a,o)&&(vt(e)||mt(e)||dt(e))},vu=function(e,t){return null!=e&&du(e,t,hu)},pu=1,gu=2,mu=function(e,t){return su(e)&&Bc(t)?Hc(uu(e),t):function(n){var r=fu(n,e);return void 0===r&&r===t?vu(n,e):Ko(t,r,void 0,pu|gu)}},yu=function(e){return e},ku=function(e){return function(t){return lu(t,e)}},bu=function(e){return su(e)?nt(uu(e)):ku(e)},wu=function(e){return"function"==typeof e?e:null==e?yu:"object"==typeof e?vt(e)?mu(e[0],e[1]):$c(e):bu(e)},_u=wr((function(e,t){var n=Ma(t);return st(n)&&(n=void 0),st(e)?Mc(e,xc(t,1,st,!0),wu(n)):[]})),xu=wr((function(e,t){var n=Ma(t);return st(n)&&(n=void 0),st(e)?Mc(e,xc(t,1,st,!0),void 0,n):[]})),Au=function(e,t,n){var r=e?e.length:0;return r?(t=n||void 0===t?1:yr(t),mc(e,t<0?0:t,r)):[]},Cu=function(e,t,n){var r=e?e.length:0;return r?(t=n||void 0===t?1:yr(t),mc(e,0,(t=r-t)<0?0:t)):[]},Tu=function(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?mc(e,r?0:o,r?o+1:i):mc(e,r?o+1:0,r?i:o)},Ou=function(e,t){return e&&e.length?Tu(e,wu(t,3),!0,!0):[]},Su=function(e,t){return e&&e.length?Tu(e,wu(t,3),!0):[]},Pu=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},Eu=4294967295,Ru=function(e){return e?Pu(yr(e),0,Eu):0},Iu=function(e,t,n,r){var i=e.length;for((n=yr(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:yr(r))<0&&(r+=i),r=n>r?0:Ru(r);n<r;)e[n++]=t;return e},Mu=function(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&rr(e,t,n)&&(n=0,r=i),Iu(e,t,n,r)):[]},Fu=function(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1},Du=function(e,t){return e&&e.length?Fu(e,wu(t,3)):-1},Nu=function(e,t){return e&&e.length?Fu(e,wu(t,3),!0):-1},ju=function(e){return e&&e.length?e[0]:void 0},Bu=function(e){return e&&e.length?xc(e,1):[]},Vu=1/0,Lu=function(e){return e&&e.length?xc(e,Vu):[]},zu=function(e,t){return e&&e.length?(t=void 0===t?1:yr(t),xc(e,t)):[]},Wu=function(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},qu=Math.max,Uu=function(e,t,n){var r=e?e.length:0;return r?((n=yr(n))<0&&(n=qu(r+n,0)),Tc(e,t,n)):-1},Hu=function(e){return Cu(e,1)},$u=Math.min,Ku=function(e,t,n){for(var r=n?Sc:Oc,i=e[0].length,o=e.length,a=o,s=Array(o),c=1/0,u=[];a--;){var l=e[a];a&&t&&(l=Pc(l,Ec(t))),c=$u(l.length,c),s[a]=!n&&(t||i>=120&&l.length>=120)?new po(a&&l):void 0}l=e[0];var f=-1,h=s[0];e:for(;++f<i&&u.length<c;){var d=l[f],v=t?t(d):d;if(d=n||0!==d?d:0,!(h?Rc(h,v):r(u,v,n))){for(a=o;--a;){var p=s[a];if(!(p?Rc(p,v):r(e[a],v,n)))continue e}h&&h.push(v),u.push(d)}}return u},Gu=function(e){return st(e)?e:[]},Ju=wr((function(e){var t=Pc(e,Gu);return t.length&&t[0]===e[0]?Ku(t):[]})),Yu=wr((function(e){var t=Ma(e),n=Pc(e,Gu);return t===Ma(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Ku(n,wu(t)):[]})),Qu=wr((function(e){var t=Ma(e),n=Pc(e,Gu);return t===Ma(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Ku(n,void 0,t):[]})),Xu=Array.prototype.join,Zu=function(e,t){return e?Xu.call(e,t):""},el=Math.max,tl=Math.min,nl=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(void 0!==n&&(i=((i=yr(n))<0?el(r+i,0):tl(i,r-1))+1),t!=t)return Cc(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},rl=function(e,t){var n=e.length;if(n)return wt(t+=t<0?n:0,n)?e[t]:void 0},il=function(e,t){return e&&e.length?rl(e,yr(t)):void 0},ol=function(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1},al=Array.prototype.splice,sl=function(e,t,n,r){var i=r?ol:Tc,o=-1,a=t.length,s=e;for(n&&(s=Pc(e,Ec(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&al.call(s,c,1),al.call(e,c,1);return e},cl=function(e,t){return e&&e.length&&t&&t.length?sl(e,t):e},ul=wr(cl),ll=function(e,t,n){return e&&e.length&&t&&t.length?sl(e,t,wu(n)):e},fl=function(e,t,n){return e&&e.length&&t&&t.length?sl(e,t,void 0,n):e},hl=function(e,t){for(var n=-1,r=null==e,i=t.length,o=Array(i);++n<i;)o[n]=r?void 0:fu(e,t[n]);return o},dl=function(e,t){return 1==t.length?e:lu(e,mc(t,0,-1))},vl=Array.prototype.splice,pl=function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;if(wt(i))vl.call(e,i,1);else if(su(i,e))delete e[uu(i)];else{var a=iu(i),s=dl(e,a);null!=s&&delete s[uu(Ma(a))]}}}return e},gl=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=sr(e),a=void 0!==t,s=null===t,c=t==t,u=sr(t);if(!s&&!u&&!o&&e>t||o&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0},ml=wr((function(e,t){t=xc(t,1);var n=e?e.length:0,r=hl(e,t);return pl(e,Pc(t,(function(e){return wt(e,n)?+e:e})).sort(gl)),r})),yl=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=wu(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return pl(e,i),n},kl=Array.prototype.reverse,bl=function(e){return e?kl.call(e):e},wl=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&rr(e,t,n)?(t=0,n=r):(t=null==t?0:yr(t),n=void 0===n?r:yr(n)),mc(e,t,n)):[]},_l=4294967294,xl=Math.floor,Al=Math.min,Cl=function(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!=t,s=null===t,c=sr(t),u=void 0===t;i<o;){var l=xl((i+o)/2),f=n(e[l]),h=void 0!==f,d=null===f,v=f==f,p=sr(f);if(a)var g=r||v;else g=u?v&&(r||h):s?v&&h&&(r||!d):c?v&&h&&!d&&(r||!p):!d&&!p&&(r?f<=t:f<t);g?i=l+1:o=l}return Al(o,_l)},Tl=2147483647,Ol=function(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t==t&&i<=Tl){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!sr(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Cl(e,t,yu,n)},Sl=function(e,t){return Ol(e,t)},Pl=function(e,t,n){return Cl(e,t,wu(n))},El=function(e,t){var n=e?e.length:0;if(n){var r=Ol(e,t);if(r<n&&K(e[r],t))return r}return-1},Rl=function(e,t){return Ol(e,t,!0)},Il=function(e,t,n){return Cl(e,t,wu(n),!0)},Ml=function(e,t){if(e&&e.length){var n=Ol(e,t,!0)-1;if(K(e[n],t))return n}return-1},Fl=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!K(s,c)){var c=s;o[i++]=0===a?0:a}}return o},Dl=function(e){return e&&e.length?Fl(e):[]},Nl=function(e,t){return e&&e.length?Fl(e,wu(t)):[]},jl=function(e){return Au(e,1)},Bl=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:yr(t),mc(e,0,t<0?0:t)):[]},Vl=function(e,t,n){var r=e?e.length:0;return r?(t=n||void 0===t?1:yr(t),mc(e,(t=r-t)<0?0:t,r)):[]},Ll=function(e,t){return e&&e.length?Tu(e,wu(t,3),!1,!0):[]},zl=function(e,t){return e&&e.length?Tu(e,wu(t,3)):[]},Wl=function(){},ql=jt&&1/an(new jt([,-0]))[1]==1/0?function(e){return new jt(e)}:Wl,Ul=200,Hl=function(e,t,n){var r=-1,i=Oc,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=Sc;else if(o>=Ul){var u=t?null:ql(e);if(u)return an(u);a=!1,i=Rc,c=new po}else c=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),s.push(l)}else i(c,f,n)||(c!==s&&c.push(f),s.push(l))}return s},$l=wr((function(e){return Hl(xc(e,1,st,!0))})),Kl=wr((function(e){var t=Ma(e);return st(t)&&(t=void 0),Hl(xc(e,1,st,!0),wu(t))})),Gl=wr((function(e){var t=Ma(e);return st(t)&&(t=void 0),Hl(xc(e,1,st,!0),void 0,t)})),Jl=function(e){return e&&e.length?Hl(e):[]},Yl=function(e,t){return e&&e.length?Hl(e,wu(t)):[]},Ql=function(e,t){return e&&e.length?Hl(e,void 0,t):[]},Xl=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},Zl=Math.max,ef=function(e){if(!e||!e.length)return[];var t=0;return e=Xl(e,(function(e){if(st(e))return t=Zl(e.length,t),!0})),tt(t,(function(t){return Pc(e,nt(t))}))},tf=function(e,t){if(!e||!e.length)return[];var n=ef(e);return null==t?n:Pc(n,(function(e){return ir(t,void 0,e)}))},nf=wr((function(e,t){return st(e)?Mc(e,t):[]})),rf=function(e,t,n){for(var r=-1,i=e.length;++r<i;)var o=o?It(Mc(o,e[r],t,n),Mc(e[r],o,t,n)):e[r];return o&&o.length?Hl(o,t,n):[]},of=wr((function(e){return rf(Xl(e,st))})),af=wr((function(e){var t=Ma(e);return st(t)&&(t=void 0),rf(Xl(e,st),wu(t))})),sf=wr((function(e){var t=Ma(e);return st(t)&&(t=void 0),rf(Xl(e,st),void 0,t)})),cf=wr(ef),uf=function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a},lf=function(e,t){return uf(e||[],t||[],Je)},ff=function(e,t,n,r){for(var i=-1,o=(t=su(t,e)?[t]:iu(t)).length,a=o-1,s=e;null!=s&&++i<o;){var c=uu(t[i]);if(ae(s)){var u=n;if(i!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=null==l?wt(t[i+1])?[]:{}:l)}Je(s,c,u)}s=s[c]}return e},hf=function(e,t){return uf(e||[],t||[],ff)},df=wr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,tf(e,n)})),vf={chunk:bc,compact:wc,concat:Ac,difference:Fc,differenceBy:_u,differenceWith:xu,drop:Au,dropRight:Cu,dropRightWhile:Ou,dropWhile:Su,fill:Mu,findIndex:Du,findLastIndex:Nu,first:ju,flatten:Bu,flattenDeep:Lu,flattenDepth:zu,fromPairs:Wu,head:ju,indexOf:Uu,initial:Hu,intersection:Ju,intersectionBy:Yu,intersectionWith:Qu,join:Zu,last:Ma,lastIndexOf:nl,nth:il,pull:ul,pullAll:cl,pullAllBy:ll,pullAllWith:fl,pullAt:ml,remove:yl,reverse:bl,slice:wl,sortedIndex:Sl,sortedIndexBy:Pl,sortedIndexOf:El,sortedLastIndex:Rl,sortedLastIndexBy:Il,sortedLastIndexOf:Ml,sortedUniq:Dl,sortedUniqBy:Nl,tail:jl,take:Bl,takeRight:Vl,takeRightWhile:Ll,takeWhile:zl,union:$l,unionBy:Kl,unionWith:Gl,uniq:Jl,uniqBy:Yl,uniqWith:Ql,unzip:ef,unzipWith:tf,without:nf,xor:of,xorBy:af,xorWith:sf,zip:cf,zipObject:lf,zipObjectDeep:hf,zipWith:df},pf=new Map,gf={transform:function(e,t,n){var r=(gf.getTransformationCase(e,t)||gf.defaultTransform)(e,t,Object.assign({},n));return function(e,t){var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=d(o.operations);try{for(a.s();!(i=a.n()).done;)i.value.baseVersion=++e}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return t}(vf.last(t.operations).baseVersion,r)},defaultTransform:function(e,t,n){var r,i=[],o=t.operations,a=[],s=d(e.operations);try{for(s.s();!(r=s.n()).done;){var c,u=[r.value],l=d(o);try{for(l.s();!(c=l.n()).done;)for(var f=c.value,h=0;h<u.length;h++){var v=u[h],p=fc(v,f,n);Array.prototype.splice.apply(u,[h,1].concat(p)),h+=p.length-1;var g=Object.assign({},n);g.isStrong=!n.isStrong,g.insertBefore=void 0!==n.insertBefore?!n.insertBefore:void 0;var m=fc(f,v,g);Array.prototype.push.apply(a,m)}}catch(w){l.e(w)}finally{l.f()}o=a,a=[];for(var y=0,k=u;y<k.length;y++){var b=k[y];i.push(b)}}}catch(w){s.e(w)}finally{s.f()}return function e(t,n){var r,i=[],o=null;switch(t){case ic:case oc:var a,s=d(n);try{for(s.s();!(a=s.n()).done;){var c=a.value;(o=c instanceof Ks?new ec:c instanceof Us?new oc:new ic).addOperation(c),i.push(o)}}catch(w){s.e(w)}finally{s.f()}return i;case nc:case sc:return(o=new t).addOperation(n[0]),o.addOperation(n[1]),i=e(ic,n.slice(2)),[o].concat(i);case rc:case cc:return i=e(ic,n.slice(0,-2)),(o=new t).addOperation(n[n.length-2]),o.addOperation(n[n.length-1]),i.concat(o);case ac:return(o=n[0]instanceof Ks?new ec:new ac).addOperation(n[0]),[o];case tc:for(r=0;r<n.length&&n[r]instanceof Ks;r++);r==n.length?o=new ec:(o=new tc,0!=r&&n.unshift(n.splice(r,1)[0]));var u,l=d(n);try{for(l.s();!(u=l.n()).done;){var f=u.value;o.addOperation(f)}}catch(w){l.e(w)}finally{l.f()}return[o];default:o=new t;var h,v=d(n);try{for(v.s();!(h=v.n()).done;){var p=h.value;o.addOperation(p)}}catch(w){v.e(w)}finally{v.f()}return[o]}}(e.constructor,i)},addTransformationCase:function(e,t,n){var r=pf.get(e);r||(r=new Map,pf.set(e,r)),r.set(t,n)},getTransformationCase:function(e,t){var n=pf.get(e.constructor);if(!n||!n.get(t.constructor)){var r,i=pf.keys(),o=d(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(e instanceof a&&pf.get(a).get(t.constructor)){n=pf.get(a);break}}}catch(s){o.e(s)}finally{o.f()}}if(n)return n.get(t.constructor)},transformDeltaSets:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Array.from(e),i=Array.from(t),o=null!==n,a={isStrong:!0};if(o){a.wasAffected=new Map,a.originalDelta=new Map,a.document=n,a.undoMode=!0;var s,c=d(i);try{for(c.s();!(s=c.n()).done;){var u=s.value;a.originalDelta.set(u,u)}}catch(T){c.e(T)}finally{c.f()}}for(var l=0;l<r.length;l++){for(var h=[r[l]],v=0;v<i.length;v++){for(var p=[i[v]],g=0;g<h.length;g++)for(var m=0;m<p.length;m++){o&&bf(h[g],p[m],a);var y=gf.transform(h[g],p[m],{insertBefore:a.insertBefore,forceNotSticky:a.forceNotSticky,isStrong:a.isStrong,forceWeakRemove:a.forceWeakRemove,undoMode:a.undoMode}),k=gf.transform(p[m],h[g],{insertBefore:!a.insertBefore,forceNotSticky:a.forceNotSticky,isStrong:!a.isStrong,forceWeakRemove:a.forceWeakRemove,undoMode:a.undoMode});if(o){_f(h[g],y,a);var b,w=a.originalDelta.get(p[m]),_=d(k);try{for(_.s();!(b=_.n()).done;){var x=b.value;a.originalDelta.set(x,w)}}catch(T){_.e(T)}finally{_.f()}}h.splice.apply(h,[g,1].concat(f(y))),g+=y.length-1,p.splice.apply(p,[m,1].concat(f(k))),m+=k.length-1}i.splice.apply(i,[v,1].concat(p)),v+=p.length-1}r.splice.apply(r,[l,1].concat(h)),l+=h.length-1}var A=yf(r)-yf(e),C=yf(i)-yf(t);return C<A?kf(i,A-C):A<C&&kf(r,C-A),{deltasA:r,deltasB:i}}},mf=gf;function yf(e){return e.reduce((function(e,t){return e+t.operations.length}),0)}function kf(e,t){for(var n=e[e.length-1],r=n.operations.length+n.baseVersion,i=new ec,o=0;o<t;o++)i.addOperation(new Ks(r++));e.push(i)}function bf(e,t,n){!function(e,t,n){n.wasAffected.get(e)||n.wasAffected.set(e,new Map);var r,i=n.originalDelta.get(t),o=!!n.wasAffected.get(e).get(i),a=d(e.operations);try{for(a.s();!(r=a.n()).done;){var s,c=r.value,u=d(t.operations);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(c instanceof Ws&&l instanceof Ws&&wf(c,l)){o=!0;break}}}catch(f){u.e(f)}finally{u.f()}if(o)break}}catch(f){a.e(f)}finally{a.f()}n.wasAffected.get(e).set(i,o)}(e,t,n),function(e,t,n){var r=n.originalDelta.get(t);if(n.document.history.isUndoingDelta(r)){var i=n.document.history.getUndoneDelta(r),o=n.wasAffected.get(e).get(i);void 0!==o&&(n.insertBefore=o)}}(e,t,n),function(e,t){var n=t.document.history,r=t.originalDelta.get(e);t.forceWeakRemove=n.isUndoneDelta(r)}(t,n),function(e,t){var n=t.originalDelta.get(e),r=t.document.history;t.forceNotSticky=r.isUndoneDelta(n)||r.isUndoingDelta(n)}(t,n)}function wf(e,t){var n=e.targetPosition,r=t.sourcePosition,i=Un(r.getParentPath(),n.getParentPath());return n.root==r.root&&"same"==i&&r.offset<n.offset}function _f(e,t,n){delete n.insertBefore,delete n.forceNotSticky,delete n.forceWeakRemove;var r=n.wasAffected.get(e);n.wasAffected.delete(e);var i,o=d(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.wasAffected.set(a,new Map(r))}}catch(s){o.e(s)}finally{o.f()}}var xf=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"type",get:function(){return"marker"}},{key:"_reverseDeltaClass",get:function(){return n}}],[{key:"className",get:function(){return"engine.model.delta.MarkerDelta"}}]),n}(ec);Zs.register(xf);var Af=mf.addTransformationCase,Cf=mf.defaultTransform;function Tf(e,t){var n=e.clone(),r=n.operations[0];return r.oldRange&&(r.oldRange=r.oldRange.getTransformedByDelta(t)[0]),r.newRange&&(r.newRange=r.newRange.getTransformedByDelta(t)[0]),[n]}function Of(e,t){for(var n=new tc,r=e.nodes,i=r.getNode(0).getAttribute(t.key),o=0,a=r.getNode(0).offsetSize,s=1;s<r.length;s++){var c=r.getNode(s),u=c.getAttribute(t.key);u!=i&&(i!=t.value&&l(),i=u,o=a),a+=c.offsetSize}return l(),n;function l(){var r=new Da(e.position.getShiftedBy(o),e.position.getShiftedBy(a)),s=new zs(r,t.key,i,t.value,0);n.addOperation(s)}}function Sf(){var e=new ec;return e.addOperation(new Ks(0)),e}Af(tc,lc,(function(e,t,n){var r=Cf(e,t,n);return e.range.containsPosition(t.position)&&r.push(Of(t,e)),r})),Af(tc,nc,(function(e,t,n){if(!t.position)return Cf(e,t,n);var r=n.undoMode,i=new Fa(t.position.root,t.position.path.slice(0,-1)),o=Cf(e,t,n);if(r||!(t._cloneOperation instanceof Hs))return o;var a,s=d(e.operations);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.range.containsPosition(i)||c.range.start.isEqual(i)){var u=new tc,l=i.getShiftedBy(1),f=Fa.createFromPosition(l);f.path.push(0);var h=t._cloneOperation.nodes.getNode(0).getAttribute(c.key);u.addOperation(new zs(new Da(l,f),c.key,void 0===h?null:h,c.newValue,0)),o.push(u);break}}}catch(v){s.e(v)}finally{s.f()}return o})),Af(uc,rc,(function(e,t,n){return t.position&&!n.undoMode&&e.position.isEqual(t.position)?[t.getReversed(),e.clone()]:Cf(e,t,n)})),Af(xf,nc,Tf),Af(xf,rc,Tf),Af(xf,sc,Tf),Af(xf,cc,Tf),Af(xf,ic,Tf),Af(xf,ac,Tf),Af(ic,rc,(function(e,t,n){if(n.undoMode||!t.position)return Cf(e,t,n);var r=e.sourcePosition.root==t.position.root&&"same"===Un(e.sourcePosition.getParentPath(),t.position.getParentPath()),i=e.sourcePosition.offset<=t.position.offset&&e.sourcePosition.offset+e.howMany>t.position.offset;return r&&i?[t.getReversed(),e.clone()]:Cf(e,t,n)})),Af(rc,uc,(function(e,t,n){return e.position&&!n.undoMode&&e.position.isEqual(t.position)?[Sf()]:Cf(e,t,n)})),Af(rc,ic,(function(e,t,n){if(n.undoMode||!e.position)return Cf(e,t,n);var r=e.position.root==t.sourcePosition.root&&"same"===Un(e.position.getParentPath(),t.sourcePosition.getParentPath()),i=t.sourcePosition.offset<=e.position.offset&&t.sourcePosition.offset+t.howMany>e.position.offset;return r&&i?[Sf()]:Cf(e,t,n)})),Af(nc,nc,(function(e,t,n){if(n.undoMode)return Cf(e,t,n);if(!e.position||!t.position)return Cf(e,t,n);var r=e.position.getParentPath(),i=t.position.getParentPath();if(e.position.root==t.position.root&&"same"==Un(r,i)){if((e=e.clone()).position.offset<t.position.offset||e.position.offset==t.position.offset&&n.isStrong){e._cloneOperation instanceof qs&&t._cloneOperation instanceof qs&&e._cloneOperation.sourcePosition.offset>t._cloneOperation.sourcePosition.offset&&e._cloneOperation.sourcePosition.offset--;var o,a=Da.createFromPositionAndShift(e.position,e._moveOperation.howMany),s=Da.createFromPositionAndShift(t.position,t._moveOperation.howMany),c=a.getDifference(s),u=0,l=d(c);try{for(l.s();!(o=l.n()).done;){var f=o.value;u+=f.end.offset-f.start.offset}}catch(v){l.e(v)}finally{l.f()}return 0===u?(e.operations.pop(),e.addOperation(new Ks(e.operations[0].baseVersion+1))):e.operations[1].howMany=u,[e]}var h=Object.assign({},n);return h.isStrong=!0,h.insertBefore=!0,Cf(e,t,h)}return Cf(e,t,n)})),Af(nc,cc,(function(e,t,n){return e.position&&e.position.root==t.position.root&&"same"===Un(t.position.path,e.position.getParentPath())?[Sf()]:Cf(e,t,n)})),Af(nc,sc,(function(e,t,n){if(!e.position)return Cf(e,t,n);var r=e.position.root==t.range.start.root,i=r&&"same"===Un(e.position.getParentPath(),t.range.start.getParentPath()),o=t.range.start.offset<e.position.offset&&t.range.end.offset>=e.position.offset;if(i&&o)return[Sf()];if(r&&"same"===Un(e.position.getParentPath(),t.range.end.getShiftedBy(-1).path)){var a=e.clone(),s=Fa.createFromPosition(t.range.start);s.path.push(t.howMany-1);var c=s.getShiftedBy(1);a._cloneOperation.position=c;var u=Fa.createFromPosition(s);u.path.push(e.position.offset),a._moveOperation.sourcePosition=u;var l=Fa.createFromPosition(c);return l.path.push(0),a._moveOperation.targetPosition=l,[a]}return Cf(e,t,n)})),Af(nc,tc,(function(e,t,n){if(!e.position)return Cf(e,t,n);e=e.clone();var r=n.undoMode,i=new Fa(e.position.root,e.position.path.slice(0,-1));if(r||!(e._cloneOperation instanceof Hs))return[e];var o,a=d(t.operations);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.range.containsPosition(i)||s.range.start.isEqual(i)){null!==s.newValue?e._cloneOperation.nodes.getNode(0)._setAttribute(s.key,s.newValue):e._cloneOperation.nodes.getNode(0)._removeAttribute(s.key);break}}}catch(c){a.e(c)}finally{a.f()}return[e]})),Af(cc,nc,(function(e,t,n){return t.position&&e.position.root==t.position.root&&"same"===Un(e.position.path,t.position.getParentPath())?[t.getReversed(),e.clone()]:Cf(e,t,n)})),Af(lc,tc,(function(e,t){var n=[e.clone()];return t.range.containsPosition(e.position)&&n.push(Of(e,t)),n})),Af(sc,nc,(function(e,t,n){if(!t.position)return Cf(e,t,n);var r=e.range.start.root==t.position.root,i=r&&"same"===Un(e.range.start.getParentPath(),t.position.getParentPath()),o=e.range.start.offset<t.position.offset&&e.range.end.offset>=t.position.offset;if(i&&o)return[t.getReversed(),e.clone()];if(r&&"same"===Un(t.position.getParentPath(),e.range.end.getShiftedBy(-1).path)){var a=e.clone();return a._insertOperation.position.offset++,a._moveOperation.howMany++,a._moveOperation.targetPosition.path[a._moveOperation.targetPosition.path.length-2]++,[a]}return Cf(e,t,n)})),Af(ac,nc,(function(e,t,n){var r=n.undoMode,i=Cf(e,t,n);if(r||!(t._cloneOperation instanceof Hs))return i;var o=t._cloneOperation.position.getShiftedBy(-1);if(o&&e.operations[0].position.isEqual(o)){var a=e.clone();a.operations[0].position=o.getShiftedBy(1),i.push(a)}return i})),Af(nc,ac,(function(e,t,n){e=e.clone();var r=n.undoMode;if(r||!(e._cloneOperation instanceof Hs))return[e];var i=e._cloneOperation.position.getShiftedBy(-1);if(i&&!r&&t.operations[0].position.isEqual(i)){var o=t.clone();return o.operations[0].position=i.getShiftedBy(1),o.operations[0].oldName=e._cloneOperation.nodes.getNode(0).name,[e,o]}return[e]})),Af(oc,nc,(function(e,t,n){var r=Cf(e,t,n),i=t._cloneOperation.position||t._cloneOperation.targetPosition;if(!i)return Cf(e,t,n);if(n.undoMode)return r;var o,a=d(r);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s instanceof oc){var c=s._moveOperation;c.sourcePosition.getShiftedBy(c.howMany).isEqual(i)&&(c.howMany+=1)}}}catch(u){a.e(u)}finally{a.f()}return r})),Af(nc,oc,(function(e,t,n){if(n.undoMode)return Cf(e,t,n);var r=e._cloneOperation.position||e._cloneOperation.targetPosition;if(!r)return Cf(e,t,n);var i=(t=t.clone())._moveOperation;return i.sourcePosition.getShiftedBy(i.howMany).isEqual(r)&&(i.howMany+=1),Cf(e,t,n)}));var Pf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";v(this,e),this.deltas=[],this.type=t}return p(e,[{key:"baseVersion",get:function(){var e,t=d(this.deltas);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null!==n.baseVersion)return n.baseVersion}}catch(r){t.e(r)}finally{t.f()}return null}},{key:"addDelta",value:function(e){return e.batch=this,this.deltas.push(e),e}},{key:"getOperations",value:s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this.deltas),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=8;break}return r=n.value,e.delegateYield(r.operations,"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),t.e(e.t1);case 13:return e.prev=13,t.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])}))}]),e}(),Ef=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"className",get:function(){return"engine.model.delta.RootAttributeDelta"}}]),n}(ec);Zs.register(Ef);var Rf=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,null)).sourcePosition=Fa.createFromPosition(e),i.howMany=r,i}return p(n,[{key:"type",get:function(){return"detach"}},{key:"_validate",value:function(){if(this.sourcePosition.root.document)throw new R.b("detach-operation-on-document-node: Cannot detach document node.")}},{key:"_execute",value:function(){Ds(Da.createFromPositionAndShift(this.sourcePosition,this.howMany))}}],[{key:"className",get:function(){return"engine.model.operation.DetachOperation"}}]),n}(Is),If=function(e){g(n,e);var t=m(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";return v(this,n),(i=t.call(this,r))._doc=e,i.rootName=o,i}return p(n,[{key:"document",get:function(){return this._doc}},{key:"is",value:function(e,t){return t?"rootElement"==e&&t==this.name||u(l(n.prototype),"is",this).call(this,e,t):"rootElement"==e||u(l(n.prototype),"is",this).call(this,e)}},{key:"toJSON",value:function(){return this.rootName}}]),n}(Ea),Mf=function(){function e(t,n){v(this,e),this.model=t,this.batch=n}return p(e,[{key:"createText",value:function(e,t){return new Oa(e,t)}},{key:"createElement",value:function(e,t){return new Ea(e,t)}},{key:"createDocumentFragment",value:function(){return new Ms}},{key:"insert",value:function(e,t,n){this._assertWriterUsedCorrectly();var r=Fa.createAt(t,n),i=e instanceof Oa&&!e.parent?new lc:new uc;if(e.parent){if(Bf(e.root,r.root))return void this.move(Da.createOn(e),r);if(e.root.document)throw new Error("model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree.");this.remove(e)}var o=r.root.document?r.root.document.version:null,a=new Hs(r,e,o);if(this.batch.addDelta(i),i.addOperation(a),this.model.applyOperation(a),e instanceof Ms){var s,c=d(e.markers);try{for(c.s();!(s=c.n()).done;){var u=h(s.value,2),l=u[0],f=u[1],v=Fa.createAt(f.root),p=new Da(f.start._getCombined(v,r),f.end._getCombined(v,r));this.addMarker(l,{range:p,usingOperation:!0})}}catch(g){c.e(g)}finally{c.f()}}}},{key:"insertText",value:function(e,t,n,r){t instanceof Ms||t instanceof Ea||t instanceof Fa?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,r)}},{key:"insertElement",value:function(e,t,n,r){t instanceof Ms||t instanceof Ea||t instanceof Fa?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,r)}},{key:"append",value:function(e,t){this.insert(e,t,"end")}},{key:"appendText",value:function(e,t,n){t instanceof Ms||t instanceof Ea?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}},{key:"appendElement",value:function(e,t,n){t instanceof Ms||t instanceof Ea?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}},{key:"setAttribute",value:function(e,t,n){this._assertWriterUsedCorrectly(),n instanceof Da?Ff(this,e,t,n):Df(this,e,t,n)}},{key:"setAttributes",value:function(e,t){var n,r=d(Ca(e));try{for(r.s();!(n=r.n()).done;){var i=h(n.value,2),o=i[0],a=i[1];this.setAttribute(o,a,t)}}catch(s){r.e(s)}finally{r.f()}}},{key:"removeAttribute",value:function(e,t){this._assertWriterUsedCorrectly(),t instanceof Da?Ff(this,e,null,t):Df(this,e,null,t)}},{key:"clearAttributes",value:function(e){var t=this;this._assertWriterUsedCorrectly();var n=function(e){var n,r=d(e.getAttributeKeys());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeAttribute(i,e)}}catch(o){r.e(o)}finally{r.f()}};if(e instanceof Da){var r,i=d(e.getItems());try{for(i.s();!(r=i.n()).done;)n(r.value)}catch(o){i.e(o)}finally{i.f()}}else n(e)}},{key:"move",value:function(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof Da))throw new R.b("writer-move-invalid-range: Invalid range to move.");if(!e.isFlat)throw new R.b("writer-move-range-not-flat: Range to move is not flat.");var r=Fa.createAt(t,n);if(!Bf(e.root,r.root))throw new R.b("writer-move-different-document: Range is going to be moved between different documents.");var i=new ic;this.batch.addDelta(i);var o=e.root.document?e.root.document.version:null,a=new Ws(e.start,e.end.offset-e.start.offset,r,o);i.addOperation(a),this.model.applyOperation(a)}},{key:"remove",value:function(e){var t=this;this._assertWriterUsedCorrectly();var n=function(e,n){var r=new oc;t.batch.addDelta(r),jf(e,n,r,t.model)};if(e instanceof Da){var r,i=e.getMinimalFlatRanges().reverse(),o=d(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;n(a.start,a.end.offset-a.start.offset)}}catch(c){o.e(c)}finally{o.f()}}else{var s=e.is("text")?e.offsetSize:1;n(Fa.createBefore(e),s)}}},{key:"merge",value:function(e){this._assertWriterUsedCorrectly();var t=new rc;this.batch.addDelta(t);var n=e.nodeBefore,r=e.nodeAfter;if(!(n instanceof Ea))throw new R.b("writer-merge-no-element-before: Node before merge position must be an element.");if(!(r instanceof Ea))throw new R.b("writer-merge-no-element-after: Node after merge position must be an element.");var i=Fa.createFromParentAndOffset(r,0),o=Fa.createFromParentAndOffset(n,n.maxOffset),a=e.root.document?e.root.document.version:null,s=new Ws(i,r.maxOffset,o,a);s.isSticky=!0,t.addOperation(s),this.model.applyOperation(s),jf(e,1,t,this.model)}},{key:"rename",value:function(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Ea))throw new R.b("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.");var n=new ac;this.batch.addDelta(n);var r=e.root.document?e.root.document.version:null,i=new Gs(Fa.createBefore(e),e.name,t,r);n.addOperation(i),this.model.applyOperation(i)}},{key:"split",value:function(e,t){this._assertWriterUsedCorrectly();var n,r,i=e.parent;if(!i.parent)throw new R.b("writer-split-element-no-parent: Element with no parent can not be split.");if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new R.b("writer-split-invalid-limit-element: Limit element is not a position ancestor.");do{var o=new nc;this.batch.addDelta(o);var a=new Ea(i.name,i.getAttributes()),s=i.root.document?i.root.document.version:null,c=new Hs(Fa.createAfter(i),a,s);o.addOperation(c),this.model.applyOperation(c);var u=null!==s?s+1:null,l=new Ws(e,i.maxOffset-e.offset,Fa.createFromParentAndOffset(a,0),u);l.isSticky=!0,o.addOperation(l),this.model.applyOperation(l),n||r||(n=i,r=a),i=(e=Fa.createBefore(a)).parent}while(i!==t);return{position:e,range:new Da(Fa.createAt(n,"end"),Fa.createAt(r))}}},{key:"wrap",value:function(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new R.b("writer-wrap-range-not-flat: Range to wrap is not flat.");var n=t instanceof Ea?t:new Ea(t);if(n.childCount>0)throw new R.b("writer-wrap-element-not-empty: Element to wrap with is not empty.");if(null!==n.parent)throw new R.b("writer-wrap-element-attached: Element to wrap with is already attached to tree model.");var r=new sc;this.batch.addDelta(r);var i=e.root.document?e.root.document.version:null,o=new Hs(e.end,n,i);r.addOperation(o),this.model.applyOperation(o);var a=null!==i?i+1:null,s=Fa.createFromParentAndOffset(n,0),c=new Ws(e.start,e.end.offset-e.start.offset,s,a);r.addOperation(c),this.model.applyOperation(c)}},{key:"unwrap",value:function(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new R.b("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.");var t=new cc;this.batch.addDelta(t);var n=Fa.createFromParentAndOffset(e,0),r=n.root.document?n.root.document.version:null,i=new Ws(n,e.maxOffset,Fa.createBefore(e),r);i.isSticky=!0,t.addOperation(i),this.model.applyOperation(i),jf(Fa.createBefore(e),1,t,this.model)}},{key:"addMarker",value:function(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new R.b("writer-addMarker-no-usingOperations: The options.usingOperations parameter is required when adding a new marker.");var n=t.usingOperation,r=t.range,i=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new R.b("writer-addMarker-marker-exists: Marker with provided name already exists.");if(!r)throw new R.b("writer-addMarker-no-range: Range parameter is required when adding a new marker.");return n?(Nf(this,e,null,r,i),this.model.markers.get(e)):this.model.markers._set(e,r,n,i)}},{key:"updateMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._assertWriterUsedCorrectly();var n="string"==typeof e?e:e.name,r=this.model.markers.get(n);if(!r)throw new R.b("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.");var i="boolean"==typeof t.usingOperation,o="boolean"==typeof t.affectsData,a=o?t.affectsData:r.affectsData;if(!i&&!t.range&&!o)throw new R.b("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.");var s=r.getRange(),c=t.range?t.range:s;i&&t.usingOperation!==r.managedUsingOperations?t.usingOperation?Nf(this,n,null,c,a):(Nf(this,n,s,null,a),this.model.markers._set(n,c,void 0,a)):r.managedUsingOperations?Nf(this,n,s,c,a):this.model.markers._set(n,c,void 0,a)}},{key:"removeMarker",value:function(e){this._assertWriterUsedCorrectly();var t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new R.b("writer-removeMarker-no-marker: Trying to remove marker which does not exist.");var n=this.model.markers.get(t);n.managedUsingOperations?Nf(this,t,n.getRange(),null,n.affectsData):this.model.markers._remove(t)}},{key:"setSelection",value:function(e,t,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,n)}},{key:"setSelectionFocus",value:function(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}},{key:"setSelectionAttribute",value:function(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else{var n,r=d(Ca(e));try{for(r.s();!(n=r.n()).done;){var i=h(n.value,2),o=i[0],a=i[1];this._setSelectionAttribute(o,a)}}catch(s){r.e(s)}finally{r.f()}}}},{key:"removeSelectionAttribute",value:function(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else{var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._removeSelectionAttribute(r)}}catch(i){n.e(i)}finally{n.f()}}}},{key:"overrideSelectionGravity",value:function(){return this.model.document.selection._overrideGravity()}},{key:"restoreSelectionGravity",value:function(e){this.model.document.selection._restoreGravity(e)}},{key:"_setSelectionAttribute",value:function(e,t){var n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){var r=$a._getStoreAttributeKey(e);this.setAttribute(r,t,n.anchor.parent)}n._setAttribute(e,t)}},{key:"_removeSelectionAttribute",value:function(e){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var n=$a._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}},{key:"_assertWriterUsedCorrectly",value:function(){if(this.model._currentWriter!==this)throw new R.b("writer-incorrect-use: Trying to use a writer outside the change() block.")}}]),e}();function Ff(e,t,n,r){var i,o,a,s,c=new tc,u=e.model,l=u.document,f=r.start,h=d(r);try{for(h.s();!(s=h.n()).done;){var v=s.value;a=v.item.getAttribute(t),i&&o!=a&&(o!=n&&p(),f=i),i=v.nextPosition,o=a}}catch(g){h.e(g)}finally{h.f()}function p(){0===c.operations.length&&e.batch.addDelta(c);var r=new Da(f,i),a=r.root.document?l.version:null,s=new zs(r,t,o,n,a);c.addOperation(s),u.applyOperation(s)}i instanceof Fa&&i!=f&&o!=n&&p()}function Df(e,t,n,r){var i,o,a=e.model,s=a.document,c=r.getAttribute(t);if(c!=n){var u=r.root===r,l=u?new Ef:new tc;if(e.batch.addDelta(l),u){var f=r.document?s.version:null;o=new Js(r,t,c,n,f)}else{var h=(i=r.is("element")?new Da(Fa.createBefore(r),Fa.createFromParentAndOffset(r,0)):new Da(Fa.createBefore(r),Fa.createAfter(r))).root.document?s.version:null;o=new zs(i,t,c,n,h)}l.addOperation(o),a.applyOperation(o)}}function Nf(e,t,n,r,i){var o=e.model,a=o.document,s=new xf,c=new $s(t,n,r,o.markers,a.version,i);e.batch.addDelta(s),s.addOperation(c),o.applyOperation(c)}function jf(e,t,n,r){var i;if(e.root.document){var o=r.document,a=new Fa(o.graveyard,[0]);i=new Us(e,t,a,o.version)}else i=new Rf(e,t);n.addOperation(i),r.applyOperation(i)}function Bf(e,t){return e===t||e instanceof If&&t instanceof If}var Vf=function(){function e(t){v(this,e),this._markerCollection=t,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}return p(e,[{key:"isEmpty",get:function(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}},{key:"bufferOperation",value:function(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var t,n=d(e.range.getItems());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._isInInsertedElement(r.parent)||this._markAttribute(r)}}catch(f){n.e(f)}finally{n.f()}break;case"remove":case"move":case"reinsert":var i=this._isInInsertedElement(e.sourcePosition.parent),o=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),o||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var a,s=Da.createFromPositionAndShift(e.position,1),c=d(this._markerCollection.getMarkersIntersectingRange(s));try{for(c.s();!(a=c.n()).done;){var u=a.value,l=u.getRange();this.bufferMarkerChange(u.name,l,l,u.affectsData)}}catch(f){c.e(f)}finally{c.f()}}this._cachedChanges=null}},{key:"bufferMarkerChange",value:function(e,t,n,r){var i=this._changedMarkers.get(e);i?(i.newRange=n,i.affectsData=r,null==i.oldRange&&null==i.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:n,affectsData:r})}},{key:"getMarkersToRemove",value:function(){var e,t=[],n=d(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];null!=o.oldRange&&t.push({name:i,range:o.oldRange})}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"getMarkersToAdd",value:function(){var e,t=[],n=d(this._changedMarkers);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],o=r[1];null!=o.newRange&&t.push({name:i,range:o.newRange})}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"hasDataChanges",value:function(){var e,t=d(this._changedMarkers);try{for(t.s();!(e=t.n()).done;)if(h(e.value,2)[1].affectsData)return!0}catch(n){t.e(n)}finally{t.f()}return this._changesInElement.size>0}},{key:"getChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var t,n=[],r=d(this._changesInElement.keys());try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=this._changesInElement.get(o).sort((function(e,t){return e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1})),s=this._elementSnapshots.get(o),c=Lf(o.getChildren()),u=zf(s.length,a),l=0,h=0,v=d(u);try{for(v.s();!(i=v.n()).done;){var p=i.value;if("i"===p)n.push(this._getInsertDiff(o,l,c[l].name)),l++;else if("r"===p)n.push(this._getRemoveDiff(o,l,s[h].name)),h++;else if("a"===p){var g=c[l].attributes,m=s[h].attributes,y=void 0;if("$text"==c[l].name)y=Da.createFromParentsAndOffsets(o,l,o,l+1);else{var k=o.offsetToIndex(l);y=Da.createFromParentsAndOffsets(o,l,o.getChild(k),0)}n.push.apply(n,f(this._getAttributesDiff(y,m,g))),l++,h++}else l++,h++}}catch(P){v.e(P)}finally{v.f()}}}catch(P){r.e(P)}finally{r.f()}n.sort((function(e,t){return e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount<t.changeCount?-1:1:e.position.isBefore(t.position)?-1:1}));for(var b=1;b<n.length;b++){var w=n[b-1],_=n[b],x="remove"==w.type&&"remove"==_.type&&"$text"==w.name&&"$text"==_.name&&w.position.isEqual(_.position),A="insert"==w.type&&"insert"==_.type&&"$text"==w.name&&"$text"==_.name&&w.position.parent==_.position.parent&&w.position.offset+w.length==_.position.offset,C="attribute"==w.type&&"attribute"==_.type&&w.position.parent==_.position.parent&&w.range.isFlat&&_.range.isFlat&&w.position.offset+w.length==_.position.offset&&w.attributeKey==_.attributeKey&&w.attributeOldValue==_.attributeOldValue&&w.attributeNewValue==_.attributeNewValue;(x||A||C)&&(n[b-1].length++,C&&(n[b-1].range.end=n[b-1].range.end.getShiftedBy(1)),n.splice(b,1),b--)}for(var T=0,O=n;T<O.length;T++){var S=O[T];delete S.changeCount,"attribute"==S.type&&(delete S.position,delete S.length)}return this._changeCount=0,this._cachedChangesWithGraveyard=n.slice(),this._cachedChanges=n.slice().filter(Wf),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}},{key:"reset",value:function(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}},{key:"_markInsert",value:function(e,t,n){var r={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r)}},{key:"_markRemove",value:function(e,t,n){var r={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,n)}},{key:"_markAttribute",value:function(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}},{key:"_markChange",value:function(e,t){this._makeSnapshot(e);var n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(var r=0;r<n.length;r++)n[r].howMany<1&&(n.splice(r,1),r--)}},{key:"_getChangesForElement",value:function(e){var t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}},{key:"_makeSnapshot",value:function(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Lf(e.getChildren()))}},{key:"_handleChange",value:function(e,t){e.nodesToHandle=e.howMany;var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=e.offset+e.howMany,a=i.offset+i.howMany;if("insert"==e.type&&("insert"==i.type&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<a&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==i.type&&e.offset<i.offset&&(i.offset+=e.howMany),"attribute"==i.type))if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<a){var s=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:o,howMany:s-i.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==i.type)if(o<=i.offset)i.offset-=e.howMany;else if(o<=a)if(e.offset<i.offset){var c=o-i.offset;i.offset=e.offset,i.howMany-=c,e.nodesToHandle-=c}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<a){var u=a-e.offset;i.howMany-=u,e.nodesToHandle-=u}if("remove"==i.type&&(o<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),"attribute"==i.type)if(o<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){var l=o-i.offset;i.offset=e.offset,i.howMany-=l}else if(e.offset<a)if(o<=a){var f=i.howMany;i.howMany=e.offset-i.offset;var h=f-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:h,count:this._changeCount++})}else i.howMany-=a-e.offset}if("attribute"==e.type){if("insert"==i.type)if(e.offset<i.offset&&o>i.offset){if(o>a){var v={type:"attribute",offset:a,howMany:o-a,count:this._changeCount++};this._handleChange(v,t),t.push(v)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<a&&(o>a?(e.nodesToHandle=o-a,e.offset=a):e.nodesToHandle=0);"attribute"==i.type&&(e.offset>=i.offset&&o<=a?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&o>=a&&(i.howMany=0))}}}catch(p){r.e(p)}finally{r.f()}e.howMany=e.nodesToHandle,delete e.nodesToHandle}},{key:"_getInsertDiff",value:function(e,t,n){return{type:"insert",position:Fa.createFromParentAndOffset(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getRemoveDiff",value:function(e,t,n){return{type:"remove",position:Fa.createFromParentAndOffset(e,t),name:n,length:1,changeCount:this._changeCount++}}},{key:"_getAttributesDiff",value:function(e,t,n){var r=[];n=new Map(n);var i,o=d(t);try{for(o.s();!(i=o.n()).done;){var a=h(i.value,2),s=a[0],c=a[1],u=n.has(s)?n.get(s):null;u!==c&&r.push({type:"attribute",position:e.start,range:Da.createFromRange(e),length:1,attributeKey:s,attributeOldValue:c,attributeNewValue:u,changeCount:this._changeCount++}),n.delete(s)}}catch(m){o.e(m)}finally{o.f()}var l,f=d(n);try{for(f.s();!(l=f.n()).done;){var v=h(l.value,2),p=v[0],g=v[1];r.push({type:"attribute",position:e.start,range:Da.createFromRange(e),length:1,attributeKey:p,attributeOldValue:null,attributeNewValue:g,changeCount:this._changeCount++})}}catch(m){f.e(m)}finally{f.f()}return r}},{key:"_isInInsertedElement",value:function(e){var t=e.parent;if(!t)return!1;var n=this._changesInElement.get(t),r=e.startOffset;if(n){var i,o=d(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if("insert"==a.type&&r>=a.offset&&r<a.offset+a.howMany)return!0}}catch(s){o.e(s)}finally{o.f()}}return this._isInInsertedElement(t)}},{key:"_removeAllNestedChanges",value:function(e,t,n){var r,i=Da.createFromParentsAndOffsets(e,t,e,t+n),o=d(i.getItems({shallow:!0}));try{for(o.s();!(r=o.n()).done;){var a=r.value;a.is("element")&&(this._elementSnapshots.delete(a),this._changesInElement.delete(a),this._removeAllNestedChanges(a,0,a.maxOffset))}}catch(s){o.e(s)}finally{o.f()}}}]),e}();function Lf(e){var t,n=[],r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.is("text"))for(var o=0;o<i.data.length;o++)n.push({name:"$text",attributes:new Map(i.getAttributes())});else n.push({name:i.name,attributes:new Map(i.getAttributes())})}}catch(a){r.e(a)}finally{r.f()}return n}function zf(e,t){var n,r=[],i=0,o=0,a=d(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.offset>i&&(r.push.apply(r,f("e".repeat(s.offset-i).split(""))),o+=s.offset-i),"insert"==s.type?(r.push.apply(r,f("i".repeat(s.howMany).split(""))),i=s.offset+s.howMany):"remove"==s.type?(r.push.apply(r,f("r".repeat(s.howMany).split(""))),i=s.offset,o+=s.howMany):(r.push.apply(r,f("a".repeat(s.howMany).split(""))),i=s.offset+s.howMany,o+=s.howMany)}}catch(c){a.e(c)}finally{a.f()}return o<e&&r.push.apply(r,f("e".repeat(e-o).split(""))),r}function Wf(e){var t=e.position&&"$graveyard"==e.position.root.rootName,n=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!n}var qf=function(){function e(){v(this,e),this._deltas=[],this._historyPoints=new Map,this._undoPairs=new Map,this._undoneDeltas=new Set}return p(e,[{key:"addDelta",value:function(e){if(e.operations.length>0&&!this._historyPoints.has(e.baseVersion)){var t=this._deltas.length;this._deltas[t]=e,this._historyPoints.set(e.baseVersion,t)}}},{key:"getDeltas",value:s.mark((function e(){var t,n,r,i,o=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:0,n=o.length>1&&void 0!==o[1]?o[1]:Number.POSITIVE_INFINITY,0!==this._deltas.length){e.next=4;break}return e.abrupt("return");case 4:if(-1==(r=this._getIndex(t))){e.next=14;break}case 6:if(!(r<this._deltas.length)){e.next=14;break}if(!((i=this._deltas[r++]).baseVersion>=n)){e.next=10;break}return e.abrupt("break",14);case 10:return e.next=12,i;case 12:e.next=6;break;case 14:case"end":return e.stop()}}),e,this)}))},{key:"getDelta",value:function(e){var t=this._historyPoints.get(e);return void 0===t?null:this._deltas[t]}},{key:"setDeltaAsUndone",value:function(e,t){this._undoPairs.set(t,e),this._undoneDeltas.add(e)}},{key:"isUndoingDelta",value:function(e){return this._undoPairs.has(e)}},{key:"isUndoneDelta",value:function(e){return this._undoneDeltas.has(e)}},{key:"getUndoneDelta",value:function(e){return this._undoPairs.get(e)}},{key:"_getIndex",value:function(e){var t=this._historyPoints.get(e);if(void 0===t){var n=this._deltas[this._deltas.length-1],r=n.baseVersion+n.operations.length;if(e<0||e>=r)return-1;throw new R.b("model-history-wrong-version: Given base version points to the middle of a delta.")}return t}}]),e}();function Uf(e,t){return function(e){return!!e&&1==e.length&&/[\ud800-\udbff]/.test(e)}(e.charAt(t-1))&&function(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e)}(e.charAt(t))}function Hf(e,t){return function(e){return!!e&&1==e.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e)}(e.charAt(t))}var $f="$graveyard",Kf=function(){function e(t){var n=this;v(this,e),this.model=t,this.version=0,this.history=new qf(this),this.selection=new $a(this),this.roots=new ti({idProperty:"rootName"}),this.differ=new Vf(t.markers),this._postFixers=new Set,this.createRoot("$root",$f),this.listenTo(t,"applyOperation",(function(e,t){var r=t[0];if(r.isDocumentOperation&&r.baseVersion!==n.version)throw new R.b("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",{operation:r})}),{priority:"highest"}),this.listenTo(t,"applyOperation",(function(e,t){var r=t[0];r.isDocumentOperation&&n.differ.bufferOperation(r)}),{priority:"high"}),this.listenTo(t,"applyOperation",(function(e,t){var r=t[0];r.isDocumentOperation&&(n.version++,n.history.addDelta(r.delta))}),{priority:"low"});var r=!1;this.listenTo(this.selection,"change",(function(){r=!0})),this.listenTo(t,"_change",(function(e,t){n.differ.isEmpty&&!r||(n._callPostFixers(t),n.differ.hasDataChanges()?n.fire("change:data",t.batch):n.fire("change",t.batch),n.differ.reset(),r=!1)})),this.listenTo(t.markers,"update",(function(e,t,r,i){n.differ.bufferMarkerChange(t.name,r,i,t.affectsData),null===r&&t.on("change",(function(e,r){n.differ.bufferMarkerChange(t.name,r,t.getRange(),t.affectsData)}))}))}return p(e,[{key:"graveyard",get:function(){return this.getRoot($f)}},{key:"createRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.roots.get(t))throw new R.b("model-document-createRoot-name-exists: Root with specified name already exists.",{name:t});var n=new If(this,e,t);return this.roots.add(n),n}},{key:"destroy",value:function(){this.selection.destroy(),this.stopListening()}},{key:"getRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(e)}},{key:"getRootNames",value:function(){return Array.from(this.roots,(function(e){return e.rootName})).filter((function(e){return e!=$f}))}},{key:"registerPostFixer",value:function(e){this._postFixers.add(e)}},{key:"toJSON",value:function(){var e=qn(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}},{key:"_getDefaultRoot",value:function(){var e,t=d(this.roots);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n!==this.graveyard)return n}}catch(r){t.e(r)}finally{t.f()}return this.graveyard}},{key:"_getDefaultRange",value:function(){var e=this._getDefaultRoot(),t=this.model.schema,n=new Fa(e,[0]);return t.getNearestSelectionRange(n)||new Da(n)}},{key:"_validateSelectionRange",value:function(e){return Gf(e.start)&&Gf(e.end)}},{key:"_callPostFixers",value:function(e){var t=!1;do{var n,r=d(this._postFixers);try{for(r.s();!(n=r.n()).done&&!(t=(0,n.value)(e)););}catch(i){r.e(i)}finally{r.f()}}while(t)}}]),e}();function Gf(e){var t=e.textNode;if(t){var n=t.data,r=e.offset-t.startOffset;return!Uf(n,r)&&!Hf(n,r)}return!0}H(Kf,B);var Jf=function(){function e(){v(this,e),this._markers=new Map}return p(e,[{key:Symbol.iterator,value:function(){return this._markers.values()}},{key:"has",value:function(e){return this._markers.has(e)}},{key:"get",value:function(e){return this._markers.get(e)||null}},{key:"_set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e instanceof Yf?e.name:e,o=this._markers.get(i);if(o){var a=o.getRange(),s=!1;return a.isEqual(t)||(o._attachLiveRange(Ua.createFromRange(t)),s=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,s=!0),"boolean"==typeof r&&r!=o.affectsData&&(o._affectsData=r,s=!0),s&&this.fire("update:"+i,o,a,t),o}var c=Ua.createFromRange(t),u=new Yf(i,c,n,r);return this._markers.set(i,u),this.fire("update:"+i,u,null,t),u}},{key:"_remove",value:function(e){var t=e instanceof Yf?e.name:e,n=this._markers.get(t);return!!n&&(this._markers.delete(t),this.fire("update:"+t,n,n.getRange(),null),this._destroyMarker(n),!0)}},{key:"getMarkersAtPosition",value:s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(i=r.value,e.t0=i.getRange().containsPosition(t),!e.t0){e.next=9;break}return e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"getMarkersIntersectingRange",value:s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d(this),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(i=r.value,e.t0=null!==i.getRange().getIntersection(t),!e.t0){e.next=9;break}return e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"destroy",value:function(){var e,t=d(this._markers.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;this._destroyMarker(n)}}catch(r){t.e(r)}finally{t.f()}this._markers=null,this.stopListening()}},{key:"getMarkersGroup",value:s.mark((function e(t){var n,r,i;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d(this._markers.values()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}if(i=r.value,e.t0=i.name.startsWith(t+":"),!e.t0){e.next=9;break}return e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(1),n.e(e.t1);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"_destroyMarker",value:function(e){e.stopListening(),e._detachLiveRange()}}]),e}();H(Jf,B);var Yf=function(){function e(t,n,r,i){v(this,e),this.name=t,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=r,this._affectsData=i}return p(e,[{key:"managedUsingOperations",get:function(){if(!this._liveRange)throw new R.b("marker-destroyed: Cannot use a destroyed marker instance.");return this._managedUsingOperations}},{key:"affectsData",get:function(){if(!this._liveRange)throw new R.b("marker-destroyed: Cannot use a destroyed marker instance.");return this._affectsData}},{key:"getStart",value:function(){if(!this._liveRange)throw new R.b("marker-destroyed: Cannot use a destroyed marker instance.");return Fa.createFromPosition(this._liveRange.start)}},{key:"getEnd",value:function(){if(!this._liveRange)throw new R.b("marker-destroyed: Cannot use a destroyed marker instance.");return Fa.createFromPosition(this._liveRange.end)}},{key:"getRange",value:function(){if(!this._liveRange)throw new R.b("marker-destroyed: Cannot use a destroyed marker instance.");return Da.createFromRange(this._liveRange)}},{key:"_attachLiveRange",value:function(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}},{key:"_detachLiveRange",value:function(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}]),e}();H(Yf,B);var Qf=function(e){g(n,e);var t=m(n);function n(e,r,i){var a;if(v(this,n),!(a=t.call(this,e,r)).root.is("rootElement"))throw new R.b("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.");return a.stickiness=i||"sticksToNext",function(){var e=this,t=new Set(["insert","move","remove","reinsert"]);this.listenTo(this.root.document.model,"applyOperation",(function(n,r){var i=r[0];i.isDocumentOperation&&t.has(i.type)&&function(e){var t,n;"insert"==e.type?t=Da.createFromPositionAndShift(e.position,e.nodes.maxOffset):(t=Da.createFromPositionAndShift(e.getMovedRangeStart(),e.howMany),n=e.sourcePosition);var r,i=t.end.offset-t.start.offset;switch(e.type){case"insert":var o="sticksToNext"==this.stickiness;r=this._getTransformedByInsertion(t.start,i,o);break;case"move":case"remove":case"reinsert":var a=Da.createFromPositionAndShift(n,i);if(a.containsPosition(this)||a.start.isEqual(this)&&"sticksToNext"==this.stickiness||a.end.isEqual(this)&&"sticksToPrevious"==this.stickiness)r=this._getCombined(n,t.start);else{var s="sticksToNext"==this.stickiness,c=t.start._getTransformedByInsertion(n,i);r=this._getTransformedByMove(n,c,i,s)}}if(!this.isEqual(r)){var u=Fa.createFromPosition(this);this.path=r.path,this.root=r.root,this.fire("change",u)}}.call(e,i)}),{priority:"low"})}.call(o(a)),c(a)}return p(n,[{key:"detach",value:function(){this.stopListening()}}]),n}(Fa);H(Qf,B);var Xf=function(){function e(t,n,r){v(this,e),this.model=t,this.writer=n,this.position=r,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._filterAttributesOf=[]}return p(e,[{key:"handleNodes",value:function(e,t){e=Array.from(e);for(var n=0;n<e.length;n++){var r=e[n];this._handleNode(r,{isFirst:0===n&&t.isFirst,isLast:n===e.length-1&&t.isLast})}this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}},{key:"getSelectionRange",value:function(){return this.nodeToSelect?Da.createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}},{key:"_handleNode",value:function(e,t){this.schema.isObject(e)?this._handleObject(e,t):this._checkAndSplitToAllowedPosition(e,t)?(this._insert(e),this._mergeSiblingsOf(e,t)):this._handleDisallowedNode(e,t)}},{key:"_handleObject",value:function(e,t){this._checkAndSplitToAllowedPosition(e)?this._insert(e):this._tryAutoparagraphing(e,t)}},{key:"_handleDisallowedNode",value:function(e,t){e.is("element")?this.handleNodes(e.getChildren(),t):this._tryAutoparagraphing(e,t)}},{key:"_insert",value:function(e){if(this.schema.checkChild(this.position,e)){var t=Qf.createFromPosition(this.position);this.writer.insert(e,this.position),this.position=Fa.createFromPosition(t),t.detach(),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e)}else oa.a.error("insertcontent-wrong-position: The node cannot be inserted on the given position.",{node:e,position:this.position})}},{key:"_mergeSiblingsOf",value:function(e,t){if(e instanceof Ea){var n=this._canMergeLeft(e,t),r=this._canMergeRight(e,t),i=Qf.createBefore(e),o=Qf.createAfter(e);if(n){var a=Qf.createFromPosition(this.position);this.writer.merge(i),this.position=Fa.createFromPosition(a),a.detach()}if(r){this.position.isEqual(o)||oa.a.error("insertcontent-wrong-position-on-merge: The insertion position should equal the merge position"),this.position=Fa.createAt(o.nodeBefore,"end");var s=new Qf(this.position.root,this.position.path,"sticksToPrevious");this.writer.merge(o),this.position=Fa.createFromPosition(s),s.detach()}(n||r)&&this._filterAttributesOf.push(this.position.parent),i.detach(),o.detach()}}},{key:"_canMergeLeft",value:function(e,t){var n=e.previousSibling;return t.isFirst&&n instanceof Ea&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(n,e)}},{key:"_canMergeRight",value:function(e,t){var n=e.nextSibling;return t.isLast&&n instanceof Ea&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(e,n)}},{key:"_tryAutoparagraphing",value:function(e,t){var n=this.writer.createElement("paragraph");this._getAllowedIn(n,this.position.parent)&&this.schema.checkChild(n,e)&&(n._appendChild(e),this._handleNode(n,t))}},{key:"_checkAndSplitToAllowedPosition",value:function(e){var t=this._getAllowedIn(e,this.position.parent);if(!t)return!1;for(;t!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){var n=this.position.parent;this.position=Fa.createBefore(n),n.isEmpty&&this.writer.remove(n)}else if(this.position.isAtEnd)this.position=Fa.createAfter(this.position.parent);else{var r=Fa.createAfter(this.position.parent);this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}}return!0}},{key:"_getAllowedIn",value:function(e,t){return this.schema.checkChild(t,e)?t:t.parent?this._getAllowedIn(e,t.parent):null}}]),e}();function Zf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){var r=e.schema;e.change((function(e){if(n.doNotResetEntireContent||!function(e,t){var n=e.getLimitElement(t);if(!t.containsEntireContent(n))return!1;var r=t.getFirstRange();return r.start.parent!=r.end.parent&&e.checkChild(n,"paragraph")}(r,t)){var i=t.getFirstRange(),o=i.start,a=Qf.createFromPosition(i.end);i.start.isTouching(i.end)||e.remove(i),n.leaveUnmerged||(function e(t,n,r){var i=n.parent,o=r.parent;if(i!=o&&i.parent&&o.parent&&function(e,t,n){var r,i=new Da(e,t),o=d(i.getWalker());try{for(o.s();!(r=o.n()).done;){var a=r.value;if(n.isLimit(a.item))return!1}}catch(s){o.e(s)}finally{o.f()}return!0}(n,r,t.model.schema)){for(n=Fa.createAfter(i),(r=Fa.createBefore(o)).isEqual(n)||t.insert(o,n),t.merge(n);r.parent.isEmpty;){var a=r.parent;r=Fa.createBefore(a),t.remove(a)}e(t,n,r)}}(e,o,a),r.removeDisallowedAttributes(o.parent.getChildren(),e)),t instanceof $a?e.setSelection(o):t.setTo(o),function(e,t){var n=e.checkChild(t,"$text"),r=e.checkChild(t,"paragraph");return!n&&r}(r,o)&&eh(e,o,t),a.detach()}else!function(e,t){var n=e.model.schema.getLimitElement(t);e.remove(Da.createIn(n)),eh(e,Fa.createAt(n),t)}(e,t)}))}}function eh(e,t,n){var r=e.createElement("paragraph");e.insert(r,t),n instanceof $a?e.setSelection(r,0):n.setTo(r,0)}var th=' ,.?!:;"-()';function nh(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.schema,o="backward"!=r.direction,a=r.unit?r.unit:"character",s=t.focus,c=new Ra({boundaries:function(e,t){var n=e.root,r=Fa.createAt(n,t?"end":0);return t?new Da(e,r):new Da(r,e)}(s,o),singleCharacters:!0,direction:o?"forward":"backward"}),u={walker:c,schema:i,isForward:o,unit:a},l=function(){if(n.done)return{v:void 0};var r=rh(u,n.value);return r?{v:void(t instanceof $a?e.change((function(e){e.setSelectionFocus(r)})):t.setFocus(r))}:void 0};n=c.next();){var f=l();if("object"===typeof f)return f.v}}function rh(e,t){if("text"==t.type)return"word"===e.unit?function(e,t){var n=e.position.textNode;if(n)for(var r=e.position.offset-n.startOffset;!ih(n.data,r,t)&&!oh(n,r,t);){e.next();var i=t?e.position.nodeAfter:e.position.nodeBefore;if(i&&i.is("text")){var o=i.data.charAt(t?0:i.data.length-1);th.includes(o)||(e.next(),n=e.position.textNode)}r=e.position.offset-n.startOffset}return e.position}(e.walker,e.isForward):function(e,t){var n=e.position.textNode;if(n)for(var r=n.data,i=e.position.offset-n.startOffset;Uf(r,i)||"character"==t&&Hf(r,i);)e.next(),i=e.position.offset-n.startOffset;return e.position}(e.walker,e.unit,e.isForward);if(t.type==(e.isForward?"elementStart":"elementEnd")){if(e.schema.isObject(t.item))return Fa.createAt(t.item,e.isForward?"after":"before");if(e.schema.checkChild(t.nextPosition,"$text"))return t.nextPosition}else{if(e.schema.isLimit(t.item))return void e.walker.skip((function(){return!0}));if(e.schema.checkChild(t.nextPosition,"$text"))return t.nextPosition}}function ih(e,t,n){var r=t+(n?0:-1);return th.includes(e.charAt(r))}function oh(e,t,n){return t===(n?e.endOffset:0)}function ah(e,t){var n=[];Array.from(e.getItems({direction:"backward"})).map((function(e){return Da.createOn(e)})).filter((function(t){return(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end))})).forEach((function(e){n.push(e.start.parent),t.remove(e)})),n.forEach((function(e){for(var n=e;n.parent&&n.isEmpty;){var r=Da.createOn(n);n=n.parent,t.remove(r)}}))}function sh(e){e.document.registerPostFixer((function(t){return function(e,t){var n,r=t.document.selection,i=t.schema,o=[],a=!1,s=d(r.getRanges());try{for(s.s();!(n=s.n()).done;){var c=n.value,u=ch(c,i);u?(o.push(u),a=!0):o.push(c)}}catch(v){s.e(v)}finally{s.f()}if(a){var l=o;if(o.length>1){var f=o[0].start,h=o[o.length-1].end;l=[new Da(f,h)]}e.setSelection(l,{backward:r.isBackward})}}(t,e)}))}function ch(e,t){return e.isCollapsed?function(e,t){var n=e.start,r=t.getNearestSelectionRange(n);if(!r)return null;var i=r.start;return n.isEqual(i)?null:i.nodeAfter&&t.isLimit(i.nodeAfter)?new Da(i,Fa.createAfter(i.nodeAfter)):new Da(i)}(e,t):function(e,t){var n=e.start,r=e.end,i=t.checkChild(n,"$text"),o=t.checkChild(r,"$text"),a=t.getLimitElement(n),s=t.getLimitElement(r);if(a===s){if(i&&o)return null;if(function(e,t,n){var r=e.nodeAfter&&!n.isLimit(e.nodeAfter)||n.checkChild(e,"$text"),i=t.nodeBefore&&!n.isLimit(t.nodeBefore)||n.checkChild(t,"$text");return r&&i}(n,r,t)){var c=t.getNearestSelectionRange(n,"forward"),u=t.getNearestSelectionRange(r,"backward");return new Da(c?c.start:n,u?u.start:r)}}var l=a&&!a.is("rootElement"),f=s&&!s.is("rootElement");if(l||f){var h=l?uh(Fa.createAt(a),t,"start"):n,d=f?uh(Fa.createAt(s),t,"end"):r;return new Da(h,d)}return null}(e,t)}function uh(e,t,n){for(var r=e.parent,i=r;t.isLimit(i)&&i.parent;)r=i,i=i.parent;return"start"===n?Fa.createBefore(r):Fa.createAfter(r)}var lh=function(){function e(){var t=this;v(this,e),this.markers=new Jf,this.document=new Kf(this),this.schema=new us,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach((function(e){return t.decorate(e)})),this.on("applyOperation",(function(e,t){t[0]._validate()}),{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block"}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$marker",{allowIn:["$root","$block"]}),sh(this)}return p(e,[{key:"change",value:function(e){return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Pf,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}},{key:"enqueueChange",value:function(e,t){"string"==typeof e?e=new Pf(e):"function"==typeof e&&(t=e,e=new Pf),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}},{key:"applyOperation",value:function(e){e._execute()}},{key:"transformDeltas",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return mf.transformDeltaSets(e,t,n?this.document:null)}},{key:"insertContent",value:function(e,t){!function(e,t,n){e.change((function(r){n.isCollapsed||e.deleteContent(n);var i,o=new Xf(e,r,n.anchor);i=t.is("documentFragment")?t.getChildren():[t],o.handleNodes(i,{isFirst:!0,isLast:!0});var a=o.getSelectionRange();a?n instanceof $a?r.setSelection(a):n.setTo(a):oa.a.warn("insertcontent-no-range: Cannot determine a proper selection range after insertion.")}))}(this,e,t)}},{key:"deleteContent",value:function(e,t){Zf(this,e,t)}},{key:"modifySelection",value:function(e,t){nh(this,e,t)}},{key:"getSelectedContent",value:function(e){return function(e,t){return e.change((function(e){var n=e.createDocumentFragment(),r=t.getFirstRange();if(!r||r.isCollapsed)return n;var i,o,a=r.start.root,s=r.start.getCommonPath(r.end),c=a.getNodeByPath(s),u=(i=r.start.parent==r.end.parent?r:Da.createFromParentsAndOffsets(c,r.start.path[s.length],c,r.end.path[s.length]+1)).end.offset-i.start.offset,l=d(i.getItems({shallow:!0}));try{for(l.s();!(o=l.n()).done;){var f=o.value;f.is("textProxy")?e.appendText(f.data,f.getAttributes(),n):e.append(f._clone(!0),n)}}catch(p){l.e(p)}finally{l.f()}if(i!=r){var h=r._getTransformedByMove(i.start,Fa.createAt(n,0),u)[0],v=new Da(Fa.createAt(n),h.start);ah(new Da(h.end,Fa.createAt(n,"end")),e),ah(v,e)}return n}))}(this,e)}},{key:"hasContent",value:function(e){if(e instanceof Ea&&(e=Da.createIn(e)),e.isCollapsed)return!1;var t,n=d(e.getItems());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.is("textProxy")||this.schema.isObject(r))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"destroy",value:function(){this.document.destroy(),this.stopListening()}},{key:"_runPendingChanges",value:function(){for(var e=[];this._pendingChanges.length;){var t=this._pendingChanges[0].batch;this._currentWriter=new Mf(this,t);var n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.fire("_change",this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return e}}]),e}();H(lh,Br);var fh=function(){function e(){v(this,e),this._listener=Object.create(ao)}return p(e,[{key:"listenTo",value:function(e){var t=this;this._listener.listenTo(e,"keydown",(function(e,n){t._listener.fire("_keydown:"+vi(n),n)}))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){return"string"==typeof e&&(e=pi(e)),e.map((function(e){return"string"==typeof e?vi(e):e})).reduce((function(e,t){return t+e}),0)}(e),i=n.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(function(e,n){t(n,(function(){n.preventDefault(),n.stopPropagation(),e.stop()})),e.return=!0}),{priority:i})}},{key:"press",value:function(e){return!!this._listener.fire("_keydown:"+vi(e),e)}},{key:"destroy",value:function(){this._listener.stopListening()}}]),e}(),hh=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this)).editor=e,r}return p(n,[{key:"set",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof t){var o=t;t=function(e,t){r.editor.execute(o),t()}}u(l(n.prototype),"set",this).call(this,e,t,i)}}]),n}(fh);n(26);var dh=function(){function e(t){var n=this;v(this,e);var r=this.constructor.builtinPlugins;this.config=new E(t,this.constructor.defaultConfig),this.config.define("plugins",r),this.plugins=new rs(this,r),this.commands=new is,this.locale=new as(this.config.get("language")),this.t=this.locale.t,this.set("state","initializing"),this.once("ready",(function(){return n.state="ready"}),{priority:"high"}),this.once("destroy",(function(){return n.state="destroyed"}),{priority:"high"}),this.set("isReadOnly",!1),this.model=new lh,this.data=new Ss(this.model),this.editing=new ns(this.model),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ps,this.conversion.register("downcast",[this.editing.downcastDispatcher,this.data.downcastDispatcher]),this.conversion.register("editingDowncast",[this.editing.downcastDispatcher]),this.conversion.register("dataDowncast",[this.data.downcastDispatcher]),this.conversion.register("upcast",[this.data.upcastDispatcher]),this.keystrokes=new hh(this),this.keystrokes.listenTo(this.editing.view.document)}return p(e,[{key:"initPlugins",value:function(){var e=this,t=this,n=this.config;return function(){var e=n.get("plugins")||[],r=n.get("removePlugins")||[];return t.plugins.load(e,r)}().then((function(e){return r(e,"init").then((function(){return r(e,"afterInit")}))})).then((function(){return e.fire("pluginsReady")}));function r(e,t){return e.reduce((function(e,n){return n[t]?e.then(n[t].bind(n)):e}),Promise.resolve())}}},{key:"destroy",value:function(){var e=this,t=Promise.resolve();return"initializing"==this.state&&(t=new Promise((function(t){return e.once("ready",t)}))),t.then((function(){e.fire("destroy"),e.stopListening(),e.commands.destroy()})).then((function(){return e.plugins.destroy()})).then((function(){e.model.destroy(),e.data.destroy(),e.editing.destroy(),e.keystrokes.destroy()}))}},{key:"execute",value:function(){var e;(e=this.commands).execute.apply(e,arguments)}}],[{key:"create",value:function(e){var t=this;return new Promise((function(n){var r=new t(e);n(r.initPlugins().then((function(){r.fire("dataReady"),r.fire("ready")})).then((function(){return r})))}))}}]),e}();H(dh,Br);var vh={setData:function(e){this.data.set(e)},getData:function(){return this.data.get()}},ph={updateSourceElement:function(){if(!this.sourceElement)throw new R.b("editor-missing-sourceelement: Cannot update the source element of a detached editor.");!function(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}(this.sourceElement,this.data.get())}},gh=function(){function e(){v(this,e)}return p(e,[{key:"getHtml",value:function(e){var t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}]),e}(),mh=function(){function e(){v(this,e),this._domParser=new DOMParser,this._domConverter=new no({blockFiller:Ri}),this._htmlWriter=new gh}return p(e,[{key:"toData",value:function(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t)}},{key:"toView",value:function(e){var t=this._toDom(e);return this._domConverter.domToView(t)}},{key:"_toDom",value:function(e){for(var t=this._domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;r.length>0;)n.appendChild(r[0]);return n}}]),e}(),yh=function(){function e(t){v(this,e),this.editor=t,this._components=new Map}return p(e,[{key:"names",value:s.mark((function e(){var t,n,r;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d(this._components.values()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,r.originalName;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"add",value:function(e,t){if(this.has(e))throw new R.b("componentfactory-item-exists: The item already exists in the component factory.",{name:e});this._components.set(kh(e),{callback:t,originalName:e})}},{key:"create",value:function(e){if(!this.has(e))throw new R.b("componentfactory-item-missing: The required component is not registered in the factory.",{name:e});return this._components.get(kh(e)).callback(this.editor.locale)}},{key:"has",value:function(e){return this._components.has(kh(e))}}]),e}();function kh(e){return String(e).toLowerCase()}var bh=function(){function e(){v(this,e),this.set("isFocused",!1),this.focusedElement=null,this._elements=new Set,this._nextEventLoopTimeout=null}return p(e,[{key:"add",value:function(e){var t=this;if(this._elements.has(e))throw new R.b("focusTracker-add-element-already-exist");this.listenTo(e,"focus",(function(){return t._focus(e)}),{useCapture:!0}),this.listenTo(e,"blur",(function(){return t._blur()}),{useCapture:!0}),this._elements.add(e)}},{key:"remove",value:function(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}},{key:"_focus",value:function(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}},{key:"_blur",value:function(){var e=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout((function(){e.focusedElement=null,e.isFocused=!1}),0)}}]),e}();H(bh,ao),H(bh,Br);var wh=function(){function e(t,n){var r=this;v(this,e),this.editor=t,this.view=n,this.componentFactory=new yh(t),this.focusTracker=new bh,this.listenTo(t.editing.view.document,"layoutChanged",(function(){return r.update()}))}return p(e,[{key:"update",value:function(){this.fire("update")}},{key:"destroy",value:function(){this.stopListening(),this.view.destroy()}}]),e}();H(wh,B);var _h=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e,r))._toolbarConfig=function(e){return Array.isArray(e)?{items:e}:e?Object.assign({items:[]},e):{items:[]}}(e.config.get("toolbar")),i}return p(n,[{key:"init",value:function(){var e=this.editor,t=this.view;t.render(),t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,this._toolbarConfig.viewportTopOffset&&(t.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset);var n=e.editing.view.document.getRoot();t.editable.bind("isReadOnly").to(n),t.editable.bind("isFocused").to(e.editing.view.document),t.editable.name=n.rootName,this.focusTracker.add(this.view.editableElement),this.view.toolbar.fillFromConfig(this._toolbarConfig.items,this.componentFactory),function(e){var t=e.origin,n=e.originKeystrokeHandler,r=e.originFocusTracker,i=e.toolbar,o=e.beforeFocus,a=e.afterBlur;r.add(i.element),n.set("Alt+F10",(function(e,t){r.isFocused&&!i.focusTracker.isFocused&&(o&&o(),i.focus(),t())})),i.keystrokes.set("Esc",(function(e,n){i.focusTracker.isFocused&&(t.focus(),a&&a(),n())}))}({origin:e.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:this.view.toolbar})}}]),n}(wh),xh=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,{idProperty:"viewUid"})).on("add",(function(e,t,n){t.isRendered||t.render(),t.element&&r._parentElement&&r._parentElement.insertBefore(t.element,r._parentElement.children[n])})),r.on("remove",(function(e,t){t.element&&r._parentElement&&t.element.remove()})),r.locale=e,r._parentElement=null,r}return p(n,[{key:"destroy",value:function(){this.map((function(e){return e.destroy()}))}},{key:"setParent",value:function(e){this._parentElement=e}},{key:"delegate",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length||!function(e){return e.every((function(e){return"string"==typeof e}))}(n))throw new R.b("ui-viewcollection-delegate-wrong-events: All event names must be strings.");return{to:function(t){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var o,a=r.value,s=d(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;a.delegate(c).to(t)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}e.on("add",(function(e,r){var i,o=d(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;r.delegate(a).to(t)}}catch(u){o.e(u)}finally{o.f()}})),e.on("remove",(function(e,r){var i,o=d(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;r.stopDelegating(a,t)}}catch(u){o.e(u)}finally{o.f()}}))}}}}]),n}(ti);H(ti,Br);var Ah=function(e,t){return Wn(e,!0,!0,t)},Ch="http://www.w3.org/1999/xhtml",Th=function(){function e(t){v(this,e),Object.assign(this,Dh(Fh(t))),this._isRendered=!1,this._revertData=null}return p(e,[{key:"render",value:function(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}},{key:"apply",value:function(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}},{key:"revert",value:function(e){if(!this._revertData)throw new R.b("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.");this._revertTemplateFromNode(e,this._revertData)}},{key:"getViews",value:s.mark((function e(){return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(s.mark((function e(t){var n,r,i;return s.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.children){o.next=24;break}n=d(t.children),o.prev=2,n.s();case 4:if((r=n.n()).done){o.next=16;break}if(!Lh(i=r.value)){o.next=11;break}return o.next=9,i;case 9:o.next=14;break;case 11:if(o.t0=zh(i),!o.t0){o.next=14;break}return o.delegateYield(e(i),"t1",14);case 14:o.next=4;break;case 16:o.next=21;break;case 18:o.prev=18,o.t2=o.catch(2),n.e(o.t2);case 21:return o.prev=21,n.f(),o.finish(21);case 24:case"end":return o.stop()}}),e,null,[[2,18,21,24]])}))(this),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"_renderNode",value:function(e){if(e.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new R.b('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.');return this.text?this._renderText(e):this._renderElement(e)}},{key:"_renderElement",value:function(e){var t=e.node;return t||(t=e.node=document.createElementNS(this.ns||Ch,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}},{key:"_renderText",value:function(e){var t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Eh(this.text)?this._bindToObservable({schema:this.text,updater:function(e){return{set:function(t){e.textContent=t},remove:function(){e.textContent=""}}}(t),data:e}):t.textContent=this.text.join(""),t}},{key:"_renderAttributes",value:function(e){var t,n,r,i;if(this.attributes){var o=e.node,a=e.revertData;for(t in this.attributes)if(r=o.getAttribute(t),n=this.attributes[t],a&&(a.attributes[t]=r),i=ae(n[0])&&n[0].ns?n[0].ns:null,Eh(n)){var s=i?n[0].value:n;a&&qh(t)&&s.unshift(r),this._bindToObservable({schema:s,updater:Ih(o,t,i),data:e})}else"style"==t&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],e):(a&&r&&qh(t)&&n.unshift(r),Vh(n=n.map((function(e){return e&&e.value||e})).reduce((function(e,t){return e.concat(t)}),[]).reduce(jh,""))||o.setAttributeNS(i,t,n))}}},{key:"_renderStyleAttribute",value:function(e,t){var n=t.node;for(var r in e){var i=e[r];Eh(i)?this._bindToObservable({schema:[i],updater:Mh(n,r),data:t}):n.style[r]=i}}},{key:"_renderElementChildren",value:function(e){var t,n=e.node,r=e.intoFragment?document.createDocumentFragment():n,i=e.isApplying,o=0,a=d(this.children);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(Wh(s)){if(!i){s.setParent(n);var c,u=d(s);try{for(u.s();!(c=u.n()).done;){var l=c.value;r.appendChild(l.element)}}catch(h){u.e(h)}finally{u.f()}}}else if(Lh(s))i||(s.isRendered||s.render(),r.appendChild(s.element));else if(Hi(s))r.appendChild(s);else if(i){var f={children:[],bindings:[],attributes:{}};e.revertData.children.push(f),s._renderNode({node:r.childNodes[o++],isApplying:!0,revertData:f})}else r.appendChild(s.render())}}catch(h){a.e(h)}finally{a.f()}e.intoFragment&&n.appendChild(r)}},{key:"_setUpListeners",value:function(e){var t=this;if(this.eventListeners){var n=function(n){var r=t.eventListeners[n].map((function(t){var r=n.split("@"),i=h(r,2),o=i[0],a=i[1];return t.activateDomEventListener(o,a,e)}));e.revertData&&e.revertData.bindings.push(r)};for(var r in this.eventListeners)n(r)}}},{key:"_bindToObservable",value:function(e){var t=e.schema,n=e.updater,r=e.data,i=r.revertData;Rh(t,n,r);var o=t.filter((function(e){return!Vh(e)})).filter((function(e){return e.observable})).map((function(e){return e.activateAttributeListener(t,n,r)}));i&&i.bindings.push(o)}},{key:"_revertTemplateFromNode",value:function(e,t){var n,r=d(t.bindings);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=d(o);try{for(a.s();!(i=a.n()).done;)(0,i.value)()}catch(l){a.e(l)}finally{a.f()}}}catch(l){r.e(l)}finally{r.f()}if(t.text)e.textContent=t.text;else{for(var s in t.attributes){var c=t.attributes[s];null===c?e.removeAttribute(s):e.setAttribute(s,c)}for(var u=0;u<t.children.length;++u)this._revertTemplateFromNode(e.childNodes[u],t.children[u])}}}],[{key:"bind",value:function(e,t){return{to:function(n,r){return new Sh({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:r})},if:function(n,r,i){return new Ph({observable:e,emitter:t,attribute:n,valueIfTrue:r,callback:i})}}}},{key:"extend",value:function(e,t){e._isRendered&&oa.a.warn("template-extend-render: Attempting to extend a template which has already been rendered."),function e(t,n){var r;if(n.attributes&&(t.attributes||(t.attributes={}),Bh(t.attributes,n.attributes)),n.eventListeners&&(t.eventListeners||(t.eventListeners={}),Bh(t.eventListeners,n.eventListeners)),n.text&&(r=t.text).push.apply(r,f(n.text)),n.children&&n.children.length){if(t.children.length!=n.children.length)throw new R.b("ui-template-extend-children-mismatch: The number of children in extended definition does not match.");var i,o=0,a=d(n.children);try{for(a.s();!(i=a.n()).done;){var s=i.value;e(t.children[o++],s)}}catch(c){a.e(c)}finally{a.f()}}}(e,Dh(Fh(t)))}}]),e}();H(Th,B);var Oh=function(){function e(t){v(this,e),Object.assign(this,t)}return p(e,[{key:"getValue",value:function(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}},{key:"activateAttributeListener",value:function(e,t,n){var r=this,i=function(){return Rh(e,t,n)};return this.emitter.listenTo(this.observable,"change:"+this.attribute,i),function(){r.emitter.stopListening(r.observable,"change:"+r.attribute,i)}}}]),e}(),Sh=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"activateDomEventListener",value:function(e,t,n){var r=this,i=function(e,n){t&&!n.target.matches(t)||("function"==typeof r.eventNameOrFunction?r.eventNameOrFunction(n):r.observable.fire(r.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,e,i),function(){r.emitter.stopListening(n.node,e,i)}}}]),n}(Oh),Ph=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"getValue",value:function(e){return!Vh(u(l(n.prototype),"getValue",this).call(this,e))&&(this.valueIfTrue||!0)}}]),n}(Oh);function Eh(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Eh):e instanceof Oh)}function Rh(e,t,n){var r=function(e,t){return e.map((function(e){return e instanceof Oh?e.getValue(t):e}))}(e,n.node);Vh(r=1==e.length&&e[0]instanceof Ph?r[0]:r.reduce(jh,""))?t.remove():t.set(r)}function Ih(e,t,n){return{set:function(r){e.setAttributeNS(n,t,r)},remove:function(){e.removeAttributeNS(n,t)}}}function Mh(e,t){return{set:function(n){e.style[t]=n},remove:function(){e.style[t]=null}}}function Fh(e){return Ah(e,(function(e){if(e&&(e instanceof Oh||zh(e)||Lh(e)||Wh(e)))return e}))}function Dh(e){if("string"==typeof e?e=function(e){return{text:[e]}}(e):e.text&&function(e){Array.isArray(e.text)||(e.text=[e.text])}(e),e.on&&(e.eventListeners=function(e){for(var t in e)Nh(e,t);return e}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(var t in e)e[t].value&&(e[t].value=[].concat(e[t].value)),Nh(e,t)}(e.attributes);var t=[];if(e.children)if(Wh(e.children))t.push(e.children);else{var n,r=d(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;zh(i)||Lh(i)||Hi(i)?t.push(i):t.push(new Th(i))}}catch(o){r.e(o)}finally{r.f()}}e.children=t}return e}function Nh(e,t){Array.isArray(e[t])||(e[t]=[e[t]])}function jh(e,t){return Vh(t)?e:Vh(e)?t:"".concat(e," ").concat(t)}function Bh(e,t){for(var n in t){var r;e[n]?(r=e[n]).push.apply(r,f(t[n])):e[n]=t[n]}}function Vh(e){return!e&&0!==e}function Lh(e){return e instanceof Uh}function zh(e){return e instanceof Th}function Wh(e){return e instanceof xh}function qh(e){return"class"==e||"style"==e}n(27);var Uh=function(){function e(t){v(this,e),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new ti,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(function(e,n){n.locale=t})),this.decorate("render")}return p(e,[{key:"bindTemplate",get:function(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Th.bind(this,this)}},{key:"createCollection",value:function(){var e=new xh;return this._viewCollections.add(e),e}},{key:"registerChild",value:function(e){Jn(e)||(e=[e]);var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._unboundChildren.add(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"deregisterChild",value:function(e){Jn(e)||(e=[e]);var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._unboundChildren.remove(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"setTemplate",value:function(e){this.template=new Th(e)}},{key:"extendTemplate",value:function(e){Th.extend(this.template,e)}},{key:"render",value:function(){if(this.isRendered)throw new R.b("ui-view-render-already-rendered: This View has already been rendered.");this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}},{key:"destroy",value:function(){this.stopListening(),this._viewCollections.map((function(e){return e.destroy()}))}}]),e}();H(Uh,ao),H(Uh,Br),n(30);var Hh=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).body=r.createCollection(),r}return p(n,[{key:"render",value:function(){u(l(n.prototype),"render",this).call(this),this._renderBodyCollection()}},{key:"destroy",value:function(){return this._bodyCollectionContainer.remove(),u(l(n.prototype),"destroy",this).call(this)}},{key:"_renderBodyCollection",value:function(){var e=this._bodyCollectionContainer=new Th({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"]},children:this.body}).render();document.body.appendChild(e)}}]),n}(Uh);n(32);var $h=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),(r=t.call(this,e)).set("text"),r.set("for");var i=r.bindTemplate;return r.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],for:i.to("for")},children:[{text:i.to("text")}]}),r}return n}(Uh),Kh=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),r=t.call(this,e);var i=F();return r.top=r.createCollection(),r.main=r.createCollection(),r._voiceLabelView=r._createVoiceLabel(i),r.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:"ltr",lang:e.language,"aria-labelledby":"ck-editor__aria-label_".concat(i)},children:[r._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:r.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:r.main}]}),r}return p(n,[{key:"_createVoiceLabel",value:function(e){var t=this.t,n=new $h;return n.text=t("y"),n.extendTemplate({attributes:{id:"ck-editor__aria-label_".concat(e),class:"ck-voice-label"}}),n}}]),n}(Hh),Gh=function(e){g(n,e);var t=m(n);function n(e,r){var i;v(this,n);var o=(i=t.call(this,e,r)).bindTemplate,a=i.t;return i.set("name",null),i.extendTemplate({attributes:{role:"textbox","aria-label":o.to("name",(function(e){return a("z",[e])})),class:"ck-editor__editable_inline"}}),i}return n}(function(e){g(n,e);var t=m(n);function n(e,r){var i;v(this,n);var o=(i=t.call(this,e)).bindTemplate;return r&&(i.element=i.editableElement=r),i.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners",o.to("isFocused",(function(e){return e?"ck-focused":"ck-blurred"}))],contenteditable:o.to("isReadOnly",(function(e){return!e}))}}),i.set("isReadOnly",!1),i.set("isFocused",!1),i.externalElement=r,i}return p(n,[{key:"render",value:function(){u(l(n.prototype),"render",this).call(this),this.externalElement?this.template.apply(this.element=this.externalElement):this.editableElement=this.element}},{key:"destroy",value:function(){this.externalElement&&this.template.revert(this.externalElement),u(l(n.prototype),"destroy",this).call(this)}}]),n}(Uh));n(34);var Jh=function(e){return function(t){return t+e}}("px"),Yh=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.set("isActive",!1),r.set("isSticky",!1),r.set("limiterElement",null),r.set("limiterBottomOffset",50),r.set("viewportTopOffset",0),r.set("_marginLeft",null),r.set("_isStickyToTheLimiter",!1),r.set("_hasViewportTopOffset",!1),r.content=r.createCollection(),r._contentPanelPlaceholder=new Th({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:i.to("isSticky",(function(e){return e?"block":"none"})),height:i.to("isSticky",(function(e){return e?Jh(r._panelRect.height):null}))}}}).render(),r._contentPanel=new Th({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",i.if("isSticky","ck-sticky-panel__content_sticky"),i.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:i.to("isSticky",(function(e){return e?Jh(r._contentPanelPlaceholder.getBoundingClientRect().width):null})),top:i.to("_hasViewportTopOffset",(function(e){return e?Jh(r.viewportTopOffset):null})),bottom:i.to("_isStickyToTheLimiter",(function(e){return e?Jh(r.limiterBottomOffset):null})),marginLeft:i.to("_marginLeft")}},children:r.content}).render(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[r._contentPanelPlaceholder,r._contentPanel]}),r}return p(n,[{key:"render",value:function(){var e=this;u(l(n.prototype),"render",this).call(this),this._checkIfShouldBeSticky(),this.listenTo(Xi.window,"scroll",(function(){e._checkIfShouldBeSticky()})),this.listenTo(this,"change:isActive",(function(){e._checkIfShouldBeSticky()}))}},{key:"_checkIfShouldBeSticky",value:function(){var e,t=this._panelRect=this._contentPanel.getBoundingClientRect();this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Jh(-Xi.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}]),n}(Uh),Qh=function(){function e(t){var n=this;if(v(this,e),Object.assign(this,t),t.actions&&t.keystrokeHandler){var r=function(e){var r=t.actions[e];"string"==typeof r&&(r=[r]);var i,o=d(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.keystrokeHandler.set(a,(function(t,r){n[e](),r()}))}}catch(s){o.e(s)}finally{o.f()}};for(var i in t.actions)r(i)}}return p(e,[{key:"first",get:function(){return this.focusables.find(Xh)||null}},{key:"last",get:function(){return this.focusables.filter(Xh).slice(-1)[0]||null}},{key:"next",get:function(){return this._getFocusableItem(1)}},{key:"previous",get:function(){return this._getFocusableItem(-1)}},{key:"current",get:function(){var e=this,t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((function(n,r){var i=n.element===e.focusTracker.focusedElement;return i&&(t=r),i})),t)}},{key:"focusFirst",value:function(){this._focus(this.first)}},{key:"focusLast",value:function(){this._focus(this.last)}},{key:"focusNext",value:function(){this._focus(this.next)}},{key:"focusPrevious",value:function(){this._focus(this.previous)}},{key:"_focus",value:function(e){e&&e.focus()}},{key:"_getFocusableItem",value:function(e){var t=this.current,n=this.focusables.length;if(!n)return null;if(null===t)return this[1===e?"first":"last"];var r=(t+n+e)%n;do{var i=this.focusables.get(r);if(Xh(i))return i;r=(r+n+e)%n}while(r!==t);return null}}]),e}();function Xh(e){return!(!e.focus||"none"==Xi.window.getComputedStyle(e.element).display)}var Zh=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}}),r}return n}(Uh);n(36);var ed=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.items=r.createCollection(),r.focusTracker=new bh,r.keystrokes=new fh,r.set("isVertical",!1),r.set("className"),r._focusCycler=new Qh({focusables:r.items,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}}),r.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar",i.if("isVertical","ck-toolbar_vertical"),i.to("className")]},children:r.items,on:{mousedown:function(e){return e.bindTemplate.to((function(t){t.target===e.element&&t.preventDefault()}))}(o(r))}}),r}return p(n,[{key:"render",value:function(){var e=this;u(l(n.prototype),"render",this).call(this);var t,r=d(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.focusTracker.add(i.element)}}catch(o){r.e(o)}finally{r.f()}this.items.on("add",(function(t,n){e.focusTracker.add(n.element)})),this.items.on("remove",(function(t,n){e.focusTracker.remove(n.element)})),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"fillFromConfig",value:function(e,t){var n=this;e.map((function(e){"|"==e?n.items.add(new Zh):t.has(e)?n.items.add(t.create(e)):oa.a.warn("toolbarview-item-unavailable: The requested toolbar item is unavailable.",{name:e})}))}}]),n}(Uh);n(38);var td=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).stickyPanel=new Yh(e),r.toolbar=new ed(e),r.editable=new Gh(e),r}return p(n,[{key:"render",value:function(){u(l(n.prototype),"render",this).call(this),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}},{key:"editableElement",get:function(){return this.editable.element}}]),n}(Kh),nd=function(){function e(){v(this,e),this._replacedElements=[]}return p(e,[{key:"replace",value:function(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}},{key:"restore",value:function(){this._replacedElements.forEach((function(e){var t=e.element,n=e.newElement;t.style.display="",n&&n.remove()})),this._replacedElements=[]}}]),e}(),rd=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),i=t.call(this,r),to(e)&&(i.sourceElement=e),i._elementReplacer=new nd,i.data.processor=new mh,i.model.document.createRoot(),i.ui=new _h(o(i),new td(i.locale)),function(e){if(!le(e.updateSourceElement))throw new R.b("attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.");var t=e.sourceElement;if(t&&"textarea"===t.tagName.toLowerCase()&&t.form){var n,r=t.form,i=function(){return e.updateSourceElement()};le(r.submit)&&(n=r.submit,r.submit=function(){i(),n.apply(r)}),r.addEventListener("submit",i),e.on("destroy",(function(){r.removeEventListener("submit",i),n&&(r.submit=n)}))}}(o(i)),i}return p(n,[{key:"element",get:function(){return this.ui.view.element}},{key:"destroy",value:function(){return this.sourceElement&&this.updateSourceElement(),this._elementReplacer.restore(),this.ui.destroy(),u(l(n.prototype),"destroy",this).call(this)}}],[{key:"create",value:function(e,t){var n=this;return new Promise((function(r){var i=new n(e,t);r(i.initPlugins().then((function(){return i.ui.init()})).then((function(){to(e)&&i._elementReplacer.replace(e,i.element),i.fire("uiReady")})).then((function(){return i.editing.view.attachDomRoot(i.ui.view.editableElement)})).then((function(){var t=to(e)?function(e){return e instanceof HTMLTextAreaElement?e.value:e.innerHTML}(e):e;return i.data.init(t)})).then((function(){i.fire("dataReady"),i.fire("ready")})).then((function(){return i})))}))}}]),n}(dh);H(rd,vh),H(rd,ph);var id=function(){function e(t){v(this,e),this.editor=t}return p(e,[{key:"destroy",value:function(){this.stopListening()}}]),e}();H(id,Br);var od=function(){function e(t){v(this,e),this.files=function(e){var t=e.files?Array.from(e.files):[],n=e.items?Array.from(e.items):[];return t.length?t:n.filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()}))}(t),this._native=t}return p(e,[{key:"types",get:function(){return this._native.types}},{key:"getData",value:function(e){return this._native.getData(e)}},{key:"setData",value:function(e,t){this._native.setData(e,t)}}]),e}(),ad=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n);var i=(r=t.call(this,e)).document;function o(e,t){t.preventDefault();var n=t.dropRange?[t.dropRange]:Array.from(i.selection.getRanges());i.fire("clipboardInput",{dataTransfer:t.dataTransfer,targetRanges:n})}return r.domEventType=["paste","copy","cut","drop","dragover"],r.listenTo(i,"paste",o,{priority:"low"}),r.listenTo(i,"drop",o,{priority:"low"}),r}return p(n,[{key:"onDomEvent",value:function(e){var t={dataTransfer:new od(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"==e.type&&(t.dropRange=function(e,t){var n,r=t.target.ownerDocument,i=t.clientX,o=t.clientY;return r.caretRangeFromPoint&&r.caretRangeFromPoint(i,o)?n=r.caretRangeFromPoint(i,o):t.rangeParent&&((n=r.createRange()).setStart(t.rangeParent,t.rangeOffset),n.collapse(!0)),n?e.domConverter.domRangeToView(n):e.document.selection.getFirstRange()}(this.view,e)),this.fire(e.type,e,t)}}]),n}(Qo),sd=["figcaption","li"],cd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.model.document,r=t.editing.view,i=r.document;function o(e,r){var o=r.dataTransfer;r.preventDefault();var a=t.data.toView(t.model.getSelectedContent(n.selection));i.fire("clipboardOutput",{dataTransfer:o,content:a,method:e.name})}this._htmlDataProcessor=new mh,r.addObserver(ad),this.listenTo(i,"clipboardInput",(function(e){t.isReadOnly&&e.stop()}),{priority:"highest"}),this.listenTo(i,"clipboardInput",(function(t,n){var i=n.dataTransfer,o="";i.getData("text/html")?o=function(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(function(e,t){return 1==t.length?" ":t}))}(i.getData("text/html")):i.getData("text/plain")&&(o=function(e){return(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>-1&&(e="<p>".concat(e,"</p>")),e}(i.getData("text/plain"))),o=e._htmlDataProcessor.toView(o),e.fire("inputTransformation",{content:o}),r.scrollToTheSelection()}),{priority:"low"}),this.listenTo(this,"inputTransformation",(function(t,r){if(!r.content.isEmpty){var i=e.editor.data,o=e.editor.model,a=i.toModel(r.content,"$clipboardHolder");if(0==a.childCount)return;o.insertContent(a,n.selection)}}),{priority:"low"}),this.listenTo(i,"copy",o,{priority:"low"}),this.listenTo(i,"cut",(function(e,n){t.isReadOnly?n.preventDefault():o(e,n)}),{priority:"low"}),this.listenTo(i,"clipboardOutput",(function(r,i){i.content.isEmpty||(i.dataTransfer.setData("text/html",e._htmlDataProcessor.toData(i.content)),i.dataTransfer.setData("text/plain",function e(t){var n="";if(t.is("text")||t.is("textProxy"))n=t.data;else if(t.is("img")&&t.hasAttribute("alt"))n=t.getAttribute("alt");else{var r,i=null,o=d(t.getChildren());try{for(o.s();!(r=o.n()).done;){var a=r.value,s=e(a);i&&(i.is("containerElement")||a.is("containerElement"))&&(sd.includes(i.name)||sd.includes(a.name)?n+="\n":n+="\n\n"),n+=s,i=a}}catch(c){o.e(c)}finally{o.f()}}return n}(i.content))),"cut"==i.method&&t.model.deleteContent(n.selection)}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"Clipboard"}}]),n}(id),ud=function(){function e(t){var n=this;v(this,e),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this.decorate("execute"),this.listenTo(this.editor.model.document,"change",(function(){n.refresh()})),this.on("execute",(function(e){n.isEnabled||e.stop()}),{priority:"high"}),this.listenTo(t,"change:isReadOnly",(function(e,t,r){r?(n.on("set:isEnabled",ld,{priority:"highest"}),n.isEnabled=!1):(n.off("set:isEnabled",ld),n.refresh())}))}return p(e,[{key:"refresh",value:function(){this.isEnabled=!0}},{key:"execute",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),e}();function ld(e){e.return=!1,e.stop()}H(ud,Br);var fd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document;t.change((function(r){!function(e,t,n,r){var i=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,s=o.end.parent;if(r.isLimit(a)||r.isLimit(s))i||a!=s||e.deleteContent(n);else if(i)hd(t,n,o.start);else{var c=!(o.start.isAtStart&&o.end.isAtEnd),u=a==s;e.deleteContent(n,{leaveUnmerged:c}),c&&(u?hd(t,n,n.focus):t.setSelection(s,0))}}(e.editor.model,r,n.selection,t.schema),e.fire("afterExecute",{writer:r})}))}}]),n}(ud);function hd(e,t,n){var r=n.parent,i=new r.constructor(r.name,r.getAttributes());n.isAtEnd?e.insert(i,n.parent,"after"):n.isAtStart?e.insert(i,n.parent,"before"):e.split(n),e.setSelection(n.parent.nextSibling,0)}var dd=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n);var i=(r=t.call(this,e)).document;return i.on("keydown",(function(e,t){var n;r.isEnabled&&t.keyCode==di.enter&&(i.once("enter",(function(e){return n=e}),{priority:"highest"}),i.fire("enter",new Yo(i,t.domEvent,{isSoft:t.shiftKey})),n&&n.stop.called&&e.stop())})),r}return p(n,[{key:"observe",value:function(){}}]),n}(uo),vd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view,n=t.document;t.addObserver(dd),e.commands.add("enter",new fd(e)),this.listenTo(n,"enter",(function(n,r){r.isSoft||(e.execute("enter"),r.preventDefault(),t.scrollToTheSelection())}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"Enter"}}]),n}(id),pd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document;t.change((function(r){!function(e,t,n){var r=n.isCollapsed,i=n.getFirstRange(),o=i.start.parent,a=i.end.parent,s=o==a;if(r)gd(t,i.end);else{var c=!(i.start.isAtStart&&i.end.isAtEnd);e.deleteContent(n,{leaveUnmerged:c}),s?gd(t,n.focus):c&&t.setSelection(a,0)}}(t,r,n.selection),e.fire("afterExecute",{writer:r})}))}},{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;var n=t.anchor;if(!n||!e.checkChild(n,"softBreak"))return!1;var r=t.getFirstRange(),i=r.start.parent,o=r.end.parent;return!md(i,e)&&!md(o,e)||i===o}(e.schema,t.selection)}}]),n}(ud);function gd(e,t){var n=e.createElement("softBreak");e.insert(n,t),e.setSelection(n,"after")}function md(e,t){return!e.is("rootElement")&&(t.isLimit(e)||md(e.parent,t))}var yd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.conversion,r=e.editing.view,i=r.document;t.register("softBreak",{allowWhere:"$text"}),n.for("upcast").add(_s({model:"softBreak",view:"br"})),n.for("downcast").add(Ya({model:"softBreak",view:function(e,t){return t.createEmptyElement("br")}})),r.addObserver(dd),e.commands.add("shiftEnter",new pd(e)),this.listenTo(i,"enter",(function(t,n){n.isSoft&&(e.execute("shiftEnter"),n.preventDefault(),r.scrollToTheSelection())}),{priority:"low"})}}],[{key:"pluginName",get:function(){return"ShiftEnter"}}]),n}(id),kd=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;v(this,e),this.model=t,this.size=0,this.limit=r,this.isLocked=!1,this._changeCallback=function(e,t){"transparent"!=t.type&&t!==n._batch&&n._reset(!0)},this._selectionChangeCallback=function(){n._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}return p(e,[{key:"batch",get:function(){return this._batch||(this._batch=new Pf),this._batch}},{key:"input",value:function(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}},{key:"lock",value:function(){this.isLocked=!0}},{key:"unlock",value:function(){this.isLocked=!1}},{key:"destroy",value:function(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}},{key:"_reset",value:function(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}]),e}(),bd=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e))._buffer=new kd(e.model,r),i}return p(n,[{key:"buffer",get:function(){return this._buffer}},{key:"destroy",value:function(){u(l(n.prototype),"destroy",this).call(this),this._buffer.destroy()}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document,i=t.text||"",o=i.length,a=t.range||r.selection.getFirstRange(),s=t.resultRange;n.enqueueChange(this._buffer.batch,(function(t){var n=a.isCollapsed;e._buffer.lock(),n||t.remove(a),i&&t.insertText(i,r.selection.getAttributes(),a.start),s?t.setSelection(s):n&&t.setSelection(a.start.getShiftedBy(o)),e._buffer.unlock(),e._buffer.input(o)}))}}]),n}(ud);function wd(e){var t=null,n=e.model,r=e.editing.view,i=e.commands.get("input");function o(){var e=i.buffer;e.lock(),n.enqueueChange(e.batch,(function(){n.deleteContent(n.document.selection)})),e.unlock()}r.document.on("keydown",(function(e,a){return function(e){var a=n.document,s=r.document.isComposing,c=t&&t.isEqual(a.selection);t=null,i.isEnabled&&(function(e){return!!e.ctrlKey||_d.includes(e.keyCode)}(e)||a.selection.isCollapsed||s&&229===e.keyCode||!s&&229===e.keyCode&&c||o())}(a)}),{priority:"lowest"}),r.document.on("compositionstart",(function(){var e=n.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;e.selection.isCollapsed||t||o()}),{priority:"lowest"}),r.document.on("compositionend",(function(){t=new za(n.document.selection)}),{priority:"lowest"})}for(var _d=[vi("arrowUp"),vi("arrowRight"),vi("arrowDown"),vi("arrowLeft"),9,16,17,18,20,27,33,34,35,36],xd=112;xd<=135;xd++)_d.push(xd);function Ad(e){if(0==e.length)return!1;var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("children"===r.type&&!Cd(r))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}function Cd(e){if(e.newChildren.length-e.oldChildren.length==1){var t=function(e,t){var n,r=[],i=0;return e.forEach((function(e){"equal"==e?(o(),i++):"insert"==e?(a("insert")?n.values.push(t[i]):(o(),n={type:"insert",index:i,values:[t[i]]}),i++):a("delete")?n.howMany++:(o(),n={type:"delete",index:i,howMany:1})})),o(),r;function o(){n&&(r.push(n),n=null)}function a(e){return n&&n.type==e}}(zi(e.oldChildren,e.newChildren,Td),e.newChildren);if(!(t.length>1)){var n=t[0];return n.values[0]instanceof $n?n:void 0}}}function Td(e,t){return e instanceof $n&&t instanceof $n?e.data===t.data:e===t}var Od=function(){function e(t){v(this,e),this.editor=t,this.editing=this.editor.editing}return p(e,[{key:"handle",value:function(e,t){if(Ad(e))this._handleContainerChildrenMutations(e,t);else{var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._handleTextMutation(i,t),this._handleTextNodeInsertion(i)}}catch(o){r.e(o)}finally{r.f()}}}},{key:"_handleContainerChildrenMutations",value:function(e,t){var n=function(e){var t=e.map((function(e){return e.node})).reduce((function(e,t){return e.getCommonAncestor(t,{includeSelf:!0})}));if(t)return t.getAncestors({includeSelf:!0,parentFirst:!0}).find((function(e){return e.is("containerElement")||e.is("rootElement")}))}(e);if(n){var r=this.editor.editing.view.domConverter.mapViewToDom(n),i=new no,o=this.editor.data.toModel(i.domToView(r)).getChild(0),a=this.editor.editing.mapper.toModelElement(n);if(a){var s=Array.from(o.getChildren()),c=Array.from(a.getChildren()),u=s[s.length-1],l=c[c.length-1];if(u&&u.is("softBreak")&&l&&!l.is("softBreak")&&s.pop(),Sd(s)&&Sd(c)){var f=s.map((function(e){return e.is("text")?e.data:"@"})).join("").replace(/\u00A0/g," "),h=c.map((function(e){return e.is("text")?e.data:"@"})).join("");if(h!==f){var d=Pd(zi(h,f)),v=d.firstChangeAt,p=d.insertions,g=d.deletions,m=null;t&&(m=this.editing.mapper.toModelRange(t.getFirstRange()));var y=f.substr(v,p),k=Da.createFromParentsAndOffsets(a,v,a,v+g);this.editor.execute("input",{text:y,range:k,resultRange:m})}}}}}},{key:"_handleTextMutation",value:function(e,t){if("text"==e.type){var n=e.newText.replace(/\u00A0/g," "),r=Pd(zi(e.oldText.replace(/\u00A0/g," "),n)),i=r.firstChangeAt,o=r.insertions,a=r.deletions,s=null;t&&(s=this.editing.mapper.toModelRange(t.getFirstRange()));var c=new Jr(e.node,i),u=this.editing.mapper.toModelPosition(c),l=Da.createFromPositionAndShift(u,a),f=n.substr(i,o);this.editor.execute("input",{text:f,range:l,resultRange:s})}}},{key:"_handleTextNodeInsertion",value:function(e){if("children"==e.type){var t=Cd(e),n=new Jr(e.node,t.index),r=this.editing.mapper.toModelPosition(n),i=t.values[0].data;this.editor.execute("input",{text:i.replace(/\u00A0/g," "),range:new Da(r)})}}}]),e}();function Sd(e){return e.every((function(e){return e.is("text")||e.is("softBreak")}))}function Pd(e){for(var t=null,n=null,r=0;r<e.length;r++)"equal"!=e[r]&&(t=null===t?r:t,n=r);for(var i=0,o=0,a=t;a<=n;a++)"insert"!=e[a]&&i++,"delete"!=e[a]&&o++;return{insertions:o,deletions:i,firstChangeAt:t}}var Ed=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor,t=new bd(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),wd(e),function(e){e.editing.view.document.on("mutations",(function(t,n,r){new Od(e).handle(n,r)}))}(e)}}],[{key:"pluginName",get:function(){return"Input"}}]),n}(id),Rd=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).direction=r,i._buffer=new kd(e.model,e.config.get("typing.undoStep")),i}return p(n,[{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document;n.enqueueChange(this._buffer.batch,(function(i){e._buffer.lock();var o=new za(r.selection),a=o.isCollapsed;if(o.isCollapsed&&n.modifySelection(o,{direction:e.direction,unit:t.unit}),e._shouldEntireContentBeReplacedWithParagraph(t.sequence||1))e._replaceEntireContentWithParagraph(i);else if(!o.isCollapsed){var s=0;o.getFirstRange().getMinimalFlatRanges().forEach((function(e){s+=Xr(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))})),n.deleteContent(o,{doNotResetEntireContent:a}),e._buffer.input(s),i.setSelection(o),e._buffer.unlock()}}))}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function(e){if(e>1)return!1;var t=this.editor.model,n=t.document.selection,r=t.schema.getLimitElement(n);if(!n.isCollapsed||!n.containsEntireContent(r))return!1;if(!t.schema.checkChild(r,"paragraph"))return!1;var i=r.getChild(0);return!i||"paragraph"!==i.name}},{key:"_replaceEntireContentWithParagraph",value:function(e){var t=this.editor.model,n=t.document.selection,r=t.schema.getLimitElement(n),i=new Ea("paragraph");e.remove(Da.createIn(r)),e.insert(i,r),e.setSelection(i,0)}}]),n}(ud),Id=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),r=t.call(this,e);var i=e.document,o=0;return i.on("keyup",(function(e,t){t.keyCode!=di.delete&&t.keyCode!=di.backspace||(o=0)})),i.on("keydown",(function(e,t){var n={};if(t.keyCode==di.delete)n.direction="forward",n.unit="character";else{if(t.keyCode!=di.backspace)return;n.direction="backward",n.unit="codePoint"}var r,a=li.isMac?t.altKey:t.ctrlKey;n.unit=a?"word":n.unit,n.sequence=++o,i.once("delete",(function(e){return r=e}),{priority:"highest"}),i.fire("delete",new Yo(i,t.domEvent,n)),r&&r.stop.called&&e.stop()})),r}return p(n,[{key:"observe",value:function(){}}]),n}(uo);function Md(e){var t=e.model,n=e.editing.view,r=200,i=null,o=new za(t.document.selection),a=Date.now();t.document.selection.on("change",(function(e){var t=new za(e.source);o.isEqual(t)||(i=o,o=t,a=Date.now())})),n.document.on("mutations",(function(n,s){Ad(s)&&function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("children"===r.type){var i=r.oldChildren,o=r.newChildren;if(Fd(i)){var a=zi(i,o),s=a.some((function(e){return"delete"===e})),c=a.some((function(e){return"insert"===e}));if(s&&!c)return!0}}}}catch(u){n.e(u)}finally{n.f()}return!1}(s)&&(Date.now()-a<r&&i&&!i.isCollapsed&&o.isCollapsed&&o.getLastPosition().isEqual(i.getLastPosition())&&t.enqueueChange((function(e){e.setSelection(i)})),e.execute("delete"),n.stop())}),{priority:"highest"})}function Fd(e){return e.every((function(e){return e.is("containerElement")}))}var Dd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor,t=e.editing.view,n=t.document;t.addObserver(Id),e.commands.add("forwardDelete",new Rd(e,"forward")),e.commands.add("delete",new Rd(e,"backward")),this.listenTo(n,"delete",(function(n,r){e.execute("forward"==r.direction?"forwardDelete":"delete",{unit:r.unit,sequence:r.sequence}),r.preventDefault(),t.scrollToTheSelection()})),Md(e)}}],[{key:"pluginName",get:function(){return"Delete"}}]),n}(id),Nd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[Ed,Dd]}},{key:"pluginName",get:function(){return"Typing"}}]),n}(id),jd=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e))._stack=[],r._createdBatches=new WeakSet,r.refresh(),r}return p(n,[{key:"refresh",value:function(){this.isEnabled=this._stack.length>0}},{key:"addBatch",value:function(e){var t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}},{key:"clearStack",value:function(){this._stack=[],this.refresh()}},{key:"_restoreSelection",value:function(e,t,n){var r,i=this.editor.model,o=i.document,a=[],s=d(e);try{for(s.s();!(r=s.n()).done;){var c=Bd(r.value,n).find((function(e){return e.start.root!=o.graveyard}));c&&a.push(c)}}catch(u){s.e(u)}finally{s.f()}a.length&&i.change((function(e){e.setSelection(a,{backward:t})}))}},{key:"_undo",value:function(e,t){var n=this.editor.model,r=n.document;this._createdBatches.add(t);var i=e.deltas.slice();i.reverse();var o,a=d(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.operations.some((function(e){return e.isDocumentOperation}))){var c,u=s.baseVersion+s.operations.length,l=Array.from(r.history.getDeltas(u)),f=n.transformDeltas([s.getReversed()],l,!0).deltasA,h=d(f);try{for(h.s();!(c=h.n()).done;){var v=c.value;v.baseVersion=r.version,t.addDelta(v);var p,g=d(v.operations);try{for(g.s();!(p=g.n()).done;){var m=p.value;n.applyOperation(m)}}catch(y){g.e(y)}finally{g.f()}r.history.setDeltaAsUndone(s,v)}}catch(y){h.e(y)}finally{h.f()}}}}catch(y){a.e(y)}finally{a.f()}}}]),n}(ud);function Bd(e,t){var n=function(e,t){var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=d(o.operations);try{for(a.s();!(i=a.n()).done;)for(var s=i.value,c=0;c<e.length;c++){var u=void 0;switch(s.type){case"insert":u=e[c]._getTransformedByInsertion(s.position,s.nodes.maxOffset,!0);break;case"move":case"remove":case"reinsert":u=e[c]._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany,!0)}u&&(e.splice.apply(e,[c,1].concat(f(u))),c=c+u.length-1)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){r.e(l)}finally{r.f()}return e}([e],t);n.sort((function(e,t){return e.start.isBefore(t.start)?-1:1}));for(var r=1;r<n.length;r++){var i=n[r-1],o=n[r];i.end.isTouching(o.start)&&(i.end=o.end,n.splice(r,1),r--)}return n}var Vd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t?this._stack.findIndex((function(e){return e.batch==t})):this._stack.length-1,r=this._stack.splice(n,1)[0],i=new Pf;this.editor.model.enqueueChange(i,(function(){e._undo(r.batch,i);var t=e.editor.model.document.history.getDeltas(r.batch.baseVersion);e._restoreSelection(r.selection.ranges,r.selection.isBackward,t),e.fire("revert",r.batch,i)})),this.refresh()}}]),n}(jd),Ld=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"execute",value:function(){var e=this,t=this._stack.pop(),n=new Pf;this.editor.model.enqueueChange(n,(function(){var r=t.batch.deltas[t.batch.deltas.length-1],i=r.baseVersion+r.operations.length,o=e.editor.model.document.history.getDeltas(i);e._restoreSelection(t.selection.ranges,t.selection.isBackward,o),e._undo(t.batch,n)})),this.refresh()}}]),n}(jd),zd=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e))._batchRegistry=new WeakSet,r}return p(n,[{key:"init",value:function(){var e=this,t=this.editor;this._undoCommand=new Vd(t),this._redoCommand=new Ld(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",(function(t,n){var r=n[0];if(r.isDocumentOperation){var i=r.delta.batch;e._batchRegistry.has(i)||"transparent"==i.type||(e._redoCommand._createdBatches.has(i)?e._undoCommand.addBatch(i):e._undoCommand._createdBatches.has(i)||(e._undoCommand.addBatch(i),e._redoCommand.clearStack()),e._batchRegistry.add(i))}}),{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(function(t,n,r){e._redoCommand.addBatch(r)})),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo")}}]),n}(id);n(40);var Wd=function(e){g(n,e);var t=m(n);function n(){var e;v(this,n);var r=(e=t.call(this)).bindTemplate;return e.set("content",""),e.set("viewBox","0 0 20 20"),e.set("fillColor",""),e.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:r.to("viewBox")}}),e}return p(n,[{key:"render",value:function(){var e=this;u(l(n.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",(function(){e._updateXMLContent(),e._colorFillPaths()})),this.on("change:fillColor",(function(){e._colorFillPaths()}))}},{key:"_updateXMLContent",value:function(){if(this.content){var e=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");for(t&&(this.viewBox=t),this.element.innerHTML="";e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}},{key:"_colorFillPaths",value:function(){var e=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach((function(t){t.style.fill=e.fillColor}))}}]),n}(Uh);n(42);var qd=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),(r=t.call(this,e)).set("text",""),r.set("position","s");var i=r.bindTemplate;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",i.to("position",(function(e){return"ck-tooltip_"+e})),i.if("text","ck-hidden",(function(e){return!e.trim()}))]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:i.to("text")}]}]}),r}return n}(Uh);n(44);var Ud=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n);var i=(r=t.call(this,e)).bindTemplate,a=F();return r.set("class"),r.set("labelStyle"),r.set("icon"),r.set("isEnabled",!0),r.set("isOn",!1),r.set("isVisible",!0),r.set("keystroke"),r.set("label"),r.set("tabindex",-1),r.set("tooltip"),r.set("tooltipPosition","s"),r.set("type","button"),r.set("withText",!1),r.children=r.createCollection(),r.tooltipView=r._createTooltipView(),r.labelView=r._createLabelView(a),r.iconView=new Wd,r.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),r.bind("_tooltipString").to(o(r),"tooltip",o(r),"label",o(r),"keystroke",r._getTooltipString.bind(o(r))),r.setTemplate({tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",(function(e){return!e})),i.if("isVisible","ck-hidden",(function(e){return!e})),i.to("isOn",(function(e){return e?"ck-on":"ck-off"})),i.if("withText","ck-button_with-text")],type:i.to("type",(function(e){return e||"button"})),tabindex:i.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_".concat(a),"aria-disabled":i.if("isEnabled",!0,(function(e){return!e})),"aria-pressed":i.if("isOn",!0)},children:r.children,on:{mousedown:i.to((function(e){e.preventDefault()})),click:i.to((function(e){r.isEnabled?r.fire("execute"):e.preventDefault()}))}}),r}return p(n,[{key:"render",value:function(){u(l(n.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView)}},{key:"focus",value:function(){this.element.focus()}},{key:"_createTooltipView",value:function(){var e=new qd;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}},{key:"_createLabelView",value:function(e){var t=new Uh,n=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:n.to("labelStyle"),id:"ck-editor__aria-label_".concat(e)},children:[{text:this.bindTemplate.to("label")}]}),t}},{key:"_getTooltipString",value:function(e,t,n){return e?"string"==typeof e?e:(n&&(n=function(e){return li.isMac?pi(e).map((function(e){return hi[e.toLowerCase()]||e})).reduce((function(e,t){return e.slice(-1)in fi?e+t:e+"+"+t})):e}(n)),e instanceof Function?e(t,n):"".concat(t).concat(n?" (".concat(n,")"):"")):""}}]),n}(Uh),Hd=n(12),$d=n.n(Hd),Kd=n(13),Gd=n.n(Kd),Jd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor.t;this._addButton("undo",e("aa"),"CTRL+Z",$d.a),this._addButton("redo",e("ab"),"CTRL+Y",Gd.a)}},{key:"_addButton",value:function(e,t,n,r){var i=this,o=this.editor;o.ui.componentFactory.add(e,(function(a){var s=o.commands.get(e),c=new Ud(a);return c.set({label:t,icon:r,keystroke:n,tooltip:!0}),c.bind("isEnabled").to(s,"isEnabled"),i.listenTo(c,"execute",(function(){return o.execute(e)})),c}))}}]),n}(id),Yd=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[zd,Jd]}},{key:"pluginName",get:function(){return"Undo"}}]),n}(id),Qd=function e(t,n,r){var i;if(v(this,e),"function"==typeof r)i=r;else{var o=r;i=function(){t.execute(o)}}t.model.document.on("change",(function(e,r){if("transparent"!=r.type){var o=Array.from(t.model.document.differ.getChanges()),a=o[0];if(1==o.length&&"insert"===a.type&&"$text"==a.name&&1==a.length){var s=a.position.textNode||a.position.nodeAfter;if(s.parent.is("paragraph")){var c=n.exec(s.data);c&&t.model.enqueueChange((function(e){var t=Da.createFromParentsAndOffsets(s.parent,0,s.parent,c[0].length);e.remove(t),i({match:c})}))}}}}))},Xd=function e(t,n,r){var i,o,a,s;v(this,e),n instanceof RegExp?i=n:a=n,"string"==typeof r?o=r:s=r,a=a||function(e){for(var t,n=[],r=[];null!==(t=i.exec(e))&&!(t&&t.length<4);){var o=t,a=o.index,s=o[1],c=o[2],u=o[3],l=s+c+u,f=[a+=t[0].length-l.length,a+s.length],h=[a+s.length+c.length,a+s.length+c.length+u.length];n.push(f),n.push(h),r.push([a+s.length,a+s.length+c.length])}return{remove:n,format:r}},s=s||function(e,t){var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.setAttribute(o,!0,i)}}catch(a){r.e(a)}finally{r.f()}e.removeSelectionAttribute(o)},t.model.document.on("change",(function(e,n){if("transparent"!=n.type){var r=t.model.document.selection;if(r.isCollapsed){var i=Array.from(t.model.document.differ.getChanges()),c=i[0];if(1==i.length&&"insert"===c.type&&"$text"==c.name&&1==c.length){var u=r.focus.parent,l=function(e){return Array.from(e.getChildren()).reduce((function(e,t){return e+t.data}),"")}(u).slice(0,r.focus.offset),f=a(l),h=Zd(u,f.format),v=Zd(u,f.remove);h.length&&v.length&&t.model.enqueueChange((function(e){var n=t.model.schema.getValidRanges(h,o);s(e,n);var r,i=d(v.reverse());try{for(i.s();!(r=i.n()).done;){var a=r.value;e.remove(a)}}catch(c){i.e(c)}finally{i.f()}}))}}}}))};function Zd(e,t){return t.filter((function(e){return void 0!==e[0]&&void 0!==e[1]})).map((function(t){return Da.createFromParentsAndOffsets(e,t[0],e,t[1])}))}var ev=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).attributeKey=r,i}return p(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document.selection,i=void 0===t.forceValue?!this.value:t.forceValue;n.change((function(t){if(r.isCollapsed)i?t.setSelectionAttribute(e.attributeKey,!0):t.removeSelectionAttribute(e.attributeKey);else{var o,a=n.schema.getValidRanges(r.getRanges(),e.attributeKey),s=d(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;i?t.setAttribute(e.attributeKey,i,c):t.removeAttribute(e.attributeKey,c)}}catch(u){s.e(u)}finally{s.f()}}}))}},{key:"_getValueFromFirstAllowedNode",value:function(){var e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);var r,i=d(n.getRanges());try{for(i.s();!(r=i.n()).done;){var o,a=r.value,s=d(a.getItems());try{for(s.s();!(o=s.n()).done;){var c=o.value;if(t.checkAttribute(c,this.attributeKey))return c.hasAttribute(this.attributeKey)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return!1}}]),n}(ud),tv="bold",nv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:tv}),e.conversion.attributeToElement({model:tv,view:"strong",upcastAlso:["b",{styles:{"font-weight":"bold"}}]}),e.commands.add(tv,new ev(e,tv)),e.keystrokes.set("CTRL+B",tv)}}]),n}(id),rv=n(14),iv=n.n(rv),ov="bold",av=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(ov,(function(r){var i=t.commands.get(ov),o=new Ud(r);return o.set({label:n("a"),icon:iv.a,keystroke:"CTRL+B",tooltip:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){return t.execute(ov)})),o}))}}]),n}(id),sv="italic",cv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:sv}),e.conversion.attributeToElement({model:sv,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(sv,new ev(e,sv)),e.keystrokes.set("CTRL+I",sv)}}]),n}(id),uv=n(15),lv=n.n(uv),fv="italic",hv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(fv,(function(r){var i=t.commands.get(fv),o=new Ud(r);return o.set({label:n("b"),icon:lv.a,keystroke:"CTRL+I",tooltip:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){return t.execute(fv)})),o}))}}]),n}(id),dv="strikethrough",vv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:dv}),e.conversion.attributeToElement({model:dv,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(dv,new ev(e,dv)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}]),n}(id),pv=n(16),gv=n.n(pv),mv="strikethrough",yv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(mv,(function(r){var i=t.commands.get(mv),o=new Ud(r);return o.set({label:n("c"),icon:gv.a,keystroke:"CTRL+SHIFT+X",tooltip:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){return t.execute(mv)})),o}))}}]),n}(id),kv="underline",bv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:kv}),e.conversion.attributeToElement({model:kv,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(kv,new ev(e,kv)),e.keystrokes.set("CTRL+U","underline")}}]),n}(id),wv=n(17),_v=n.n(wv),xv="underline",Av=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t;t.ui.componentFactory.add(xv,(function(r){var i=t.commands.get(xv),o=new Ud(r);return o.set({label:n("d"),icon:_v.a,keystroke:"CTRL+U",tooltip:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),e.listenTo(o,"execute",(function(){return t.execute(xv)})),o}))}}]),n}(id);function Cv(e){var t=e.next();return t.done?null:t.value}var Tv=["left","right","center","justify"];function Ov(e){return Tv.includes(e)}function Sv(e){return"left"===e}var Pv="alignment",Ev=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"refresh",value:function(){var e=Cv(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!e&&this._canBeAligned(e),this.value=this.isEnabled&&e.hasAttribute("alignment")?e.getAttribute("alignment"):"left"}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document,i=t.value;n.change((function(t){var n=Array.from(r.selection.getSelectedBlocks()).filter((function(t){return e._canBeAligned(t)})),o=n[0].getAttribute("alignment");Sv(i)||o===i||!i?function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.removeAttribute(Pv,i)}}catch(o){r.e(o)}finally{r.f()}}(n,t):function(e,t,n){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.setAttribute(Pv,n,o)}}catch(a){i.e(a)}finally{i.f()}}(n,t,i)}))}},{key:"_canBeAligned",value:function(e){return this.editor.model.schema.checkAttribute(e,Pv)}}]),n}(ud),Rv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),e.config.define("alignment",{options:[].concat(Tv)}),r}return p(n,[{key:"init",value:function(){var e=this.editor,t=e.model.schema,n=e.config.get("alignment.options").filter(Ov);t.extend("$block",{allowAttributes:"alignment"});var r=function(e){var t,n={model:{key:"alignment",values:e.slice()},view:{}},r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.view[i]={key:"style",value:{"text-align":i}}}}catch(o){r.e(o)}finally{r.f()}return n}(n.filter((function(e){return!Sv(e)})));e.conversion.attributeToAttribute(r),e.commands.add("alignment",new Ev(e))}}]),n}(id),Iv=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n);var i=(r=t.call(this,e)).bindTemplate;return r.set("isVisible",!1),r.children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",i.if("isVisible","ck-dropdown__panel-visible")]},children:r.children,on:{selectstart:i.to((function(e){return e.preventDefault()}))}}),r}return p(n,[{key:"focus",value:function(){this.children.length&&this.children.first.focus()}},{key:"focusLast",value:function(){if(this.children.length){var e=this.children.last;"function"==typeof e.focusLast?e.focusLast():e.focus()}}}]),n}(Uh);n(46);var Mv=function(e){g(n,e);var t=m(n);function n(e,r,i){var o;v(this,n);var a=(o=t.call(this,e)).bindTemplate;return o.buttonView=r,o.panelView=i,o.set("isOpen",!1),o.set("isEnabled",!0),o.focusTracker=new bh,o.keystrokes=new fh,o.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",a.if("isEnabled","ck-disabled",(function(e){return!e}))]},children:[r,i]}),r.extendTemplate({attributes:{class:["ck-dropdown__button"]}}),o}return p(n,[{key:"render",value:function(){var e=this;u(l(n.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",(function(){e.isOpen=!e.isOpen})),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);var t=function(t,n){e.isOpen&&(e.buttonView.focus(),e.isOpen=!1,n())};this.keystrokes.set("arrowdown",(function(t,n){e.buttonView.isEnabled&&!e.isOpen&&(e.isOpen=!0,n())})),this.keystrokes.set("arrowright",(function(t,n){e.isOpen&&n()})),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}},{key:"focus",value:function(){this.buttonView.focus()}}]),n}(Uh),Fv=n(18),Dv=n.n(Fv),Nv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).arrowView=r._createArrowView(),r.extendTemplate({attributes:{"aria-haspopup":!0}}),r.delegate("execute").to(o(r),"open"),r}return p(n,[{key:"render",value:function(){u(l(n.prototype),"render",this).call(this),this.children.add(this.arrowView)}},{key:"_createArrowView",value:function(){var e=new Wd;return e.content=Dv.a,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}]),n}(Ud);n(48);var jv=function(e){g(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this)).items=e.createCollection(),e.focusTracker=new bh,e.keystrokes=new fh,e._focusCycler=new Qh({focusables:e.items,focusTracker:e.focusTracker,keystrokeHandler:e.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),e.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:e.items}),e}return p(n,[{key:"render",value:function(){var e=this;u(l(n.prototype),"render",this).call(this);var t,r=d(this.items);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.focusTracker.add(i.element)}}catch(o){r.e(o)}finally{r.f()}this.items.on("add",(function(t,n){e.focusTracker.add(n.element)})),this.items.on("remove",(function(t,n){e.focusTracker.remove(n.element)})),this.keystrokes.listenTo(this.element)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}}]),n}(Uh),Bv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).children=r.createCollection(),r.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:r.children}),r}return p(n,[{key:"focus",value:function(){this.children.first.focus()}}]),n}(Uh),Vv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}}),r}return n}(Uh);n(50);var Lv=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).toggleSwitchView=r._createToggleView(),r.extendTemplate({attributes:{class:"ck-switchbutton"}}),r}return p(n,[{key:"render",value:function(){u(l(n.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView)}},{key:"_createToggleView",value:function(){var e=new Uh;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}]),n}(Ud);function zv(e){var t=new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nv)(e),n=new Iv(e),r=new Mv(e,t,n);return t.bind("isEnabled").to(r),t instanceof Nv?t.bind("isOn").to(r,"isOpen"):t.arrowView.bind("isOn").to(r,"isOpen"),function(e){(function(e){e.on("render",(function(){!function(e){var t=e.emitter,n=e.activator,r=e.callback,i=e.contextElements;t.listenTo(document,"mousedown",(function(e,t){var o=t.target;if(n()){var a,s=d(i);try{for(s.s();!(a=s.n()).done;)if(a.value.contains(o))return}catch(c){s.e(c)}finally{s.f()}r()}}))}({emitter:e,activator:function(){return e.isOpen},callback:function(){e.isOpen=!1},contextElements:[e.element]})}))})(e),function(e){e.on("execute",(function(t){t.source instanceof Lv||(e.isOpen=!1)}))}(e),function(e){e.keystrokes.set("arrowdown",(function(t,n){e.isOpen&&(e.panelView.focus(),n())})),e.keystrokes.set("arrowup",(function(t,n){e.isOpen&&(e.panelView.focusLast(),n())}))}(e)}(r),r}function Wv(e,t){var n=e.locale,r=e.listView=new jv(n);r.items.bindTo(t).using((function(e){var t=e.type,r=e.model;if("separator"===t)return new Vv(n);if("button"===t||"switchbutton"===t){var i,o,a=new Bv(n);return(i=o="button"===t?new Ud(n):new Lv(n)).bind.apply(i,f(Object.keys(r))).to(r),o.delegate("execute").to(a),a.children.add(o),a}})),e.panelView.children.add(r),r.items.delegate("execute").to(e)}n(52),n(54);var qv=n(6),Uv=n.n(qv),Hv=n(19),$v=n.n(Hv),Kv=n(20),Gv=n.n(Kv),Jv=n(21),Yv=n.n(Jv),Qv=new Map([["left",Uv.a],["right",$v.a],["center",Gv.a],["justify",Yv.a]]),Xv=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"localizedOptionTitles",get:function(){var e=this.editor.t;return{left:e("e"),right:e("f"),center:e("g"),justify:e("h")}}},{key:"init",value:function(){var e=this,t=this.editor,n=t.ui.componentFactory,r=t.t,i=t.config.get("alignment.options");i.filter(Ov).forEach((function(t){return e._addButton(t)})),n.add("alignment",(function(e){var t=zv(e),o=i.map((function(e){return n.create("alignment:".concat(e))}));!function(e,t){var n=e.toolbarView=new ed;e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.map((function(e){return n.items.add(e)})),e.panelView.children.add(n),n.items.delegate("execute").to(e)}(t,o),t.buttonView.set({label:r("i"),tooltip:!0}),t.toolbarView.isVertical=!0,t.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});var a=Uv.a;return t.buttonView.bind("icon").toMany(o,"isOn",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.findIndex((function(e){return e}));return r<0?a:o[r].icon})),t.bind("isEnabled").toMany(o,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),t}))}},{key:"_addButton",value:function(e){var t=this,n=this.editor;n.ui.componentFactory.add("alignment:".concat(e),(function(r){var i=n.commands.get("alignment"),o=new Ud(r);return o.set({label:t.localizedOptionTitles[e],icon:Qv.get(e),tooltip:!0}),o.bind("isEnabled").to(i),o.bind("isOn").to(i,"value",(function(t){return t===e})),t.listenTo(o,"execute",(function(){n.execute("alignment",{value:e}),n.editing.view.focus()})),o}))}}],[{key:"pluginName",get:function(){return"AlignmentUI"}}]),n}(id),Zv=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).attributeKey=r,i}return p(n,[{key:"refresh",value:function(){var e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}},{key:"execute",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.model,r=n.document.selection,i=t.value;n.change((function(t){if(r.isCollapsed)i?t.setSelectionAttribute(e.attributeKey,i):t.removeSelectionAttribute(e.attributeKey);else{var o,a=n.schema.getValidRanges(r.getRanges(),e.attributeKey),s=d(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;i?t.setAttribute(e.attributeKey,i,c):t.removeAttribute(e.attributeKey,c)}}catch(u){s.e(u)}finally{s.f()}}}))}}]),n}(ud),ep=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,"fontSize")}return n}(Zv);function tp(e){return e.map(rp).filter((function(e){return!!e}))}var np={tiny:{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:5}},small:{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:5}},big:{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:5}},huge:{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:5}}};function rp(e){if("object"==typeof e)return e;if(np[e])return np[e];if("default"===e)return{model:void 0,title:"Default"};var t=parseFloat(e);return isNaN(t)?void 0:function(e){return{title:String(e),model:e,view:{name:"span",styles:{"font-size":"".concat(e,"px")},priority:5}}}(t)}function ip(e,t){var n,r={model:{key:e,values:[]},view:{},upcastAlso:{}},i=d(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.model.values.push(o.model),r.view[o.model]=o.view,o.upcastAlso&&(r.upcastAlso[o.model]=o.upcastAlso)}}catch(a){i.e(a)}finally{i.f()}return r}var op="fontSize",ap=function(e){g(n,e);var t=m(n);function n(e){var r;v(this,n),r=t.call(this,e),e.config.define(op,{options:["tiny","small","default","big","huge"]});var i=tp(r.editor.config.get("fontSize.options")).filter((function(e){return e.model})),o=ip(op,i);return e.conversion.attributeToElement(o),e.commands.add(op,new ep(e)),r}return p(n,[{key:"init",value:function(){this.editor.model.schema.extend("$text",{allowAttributes:op})}}]),n}(id),sp=function e(t,n){v(this,e),n&&Mr(this,n),t&&this.set(t)};H(sp,Br);var cp=n(22),up=n.n(cp);n(56);var lp=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,r=this._getLocalizedOptions(),i=t.commands.get("fontSize");t.ui.componentFactory.add("fontSize",(function(o){var a=zv(o);return Wv(a,function(e,t){var n,r=new ti,i=d(e);try{var o=function(){var e=n.value,i={type:"button",model:new sp({commandName:"fontSize",commandParam:e.model,label:e.title,class:"ck-fontsize-option",withText:!0})};e.view&&e.view.styles&&i.model.set("labelStyle","font-size:".concat(e.view.styles["font-size"])),e.view&&e.view.classes&&i.model.set("class","".concat(i.model.class," ").concat(e.view.classes)),i.model.bind("isOn").to(t,"value",(function(t){return t===e.model})),r.add(i)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}(r,i)),a.buttonView.set({label:n("j"),icon:up.a,tooltip:!0}),a.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),a.bind("isEnabled").to(i),e.listenTo(a,"execute",(function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()})),a}))}},{key:"_getLocalizedOptions",value:function(){var e=this.editor,t=e.t,n={Default:t("k"),Tiny:t("l"),Small:t("m"),Big:t("n"),Huge:t("o")};return tp(e.config.get("fontSize.options")).map((function(e){var t=n[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e}))}}]),n}(id),fp=function(e){g(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,"fontFamily")}return n}(Zv);function hp(e){return e.map(dp).filter((function(e){return!!e}))}function dp(e){return"object"==typeof e?e:"default"===e?{title:"Default",model:void 0}:"string"==typeof e?function(e){var t=e.replace(/"|'/g,"").split(","),n=t[0];return{title:n,model:n,view:{name:"span",styles:{"font-family":t.map(vp).join(", ")},priority:5}}}(e):void 0}function vp(e){return(e=e.trim()).indexOf(" ")>0&&(e="'".concat(e,"'")),e}var pp="fontFamily",gp=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),e.config.define(pp,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"]}),r}return p(n,[{key:"init",value:function(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:pp});var t=hp(e.config.get("fontFamily.options")).filter((function(e){return e.model})),n=ip(pp,t);e.conversion.attributeToElement(n),e.commands.add(pp,new fp(e))}}]),n}(id),mp=n(23),yp=n.n(mp),kp=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,r=this._getLocalizedOptions(),i=t.commands.get("fontFamily");t.ui.componentFactory.add("fontFamily",(function(o){var a=zv(o);return Wv(a,function(e,t){var n,r=new ti,i=d(e);try{var o=function(){var e=n.value,i={type:"button",model:new sp({commandName:"fontFamily",commandParam:e.model,label:e.title,withText:!0})};i.model.bind("isOn").to(t,"value",(function(t){return t===e.model})),e.view&&e.view.styles&&i.model.set("labelStyle","font-family: ".concat(e.view.styles["font-family"])),r.add(i)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}(r,i)),a.buttonView.set({label:n("p"),icon:yp.a,tooltip:!0}),a.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),a.bind("isEnabled").to(i),e.listenTo(a,"execute",(function(e){t.execute(e.source.commandName,{value:e.source.commandParam}),t.editing.view.focus()})),a}))}},{key:"_getLocalizedOptions",value:function(){var e=this.editor,t=e.t;return hp(e.config.get("fontFamily.options")).map((function(e){return"Default"===e.title&&(e.title=t("k")),e}))}}]),n}(id),bp=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"refresh",value:function(){var e=this.editor.model,t=Cv(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("paragraph"),this.isEnabled=!!t&&wp(t,e.schema)}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.editor.model,n=t.document;t.change((function(r){var i,o=(e.selection||n.selection).getSelectedBlocks(),a=d(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;!s.is("paragraph")&&wp(s,t.schema)&&r.rename(s,"paragraph")}}catch(c){a.e(c)}finally{a.f()}}))}}]),n}(ud);function wp(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}var _p=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,r=t.model,i=t.data;t.commands.add("paragraph",new bp(t)),r.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),i.upcastDispatcher.on("element",(function(e,t,r){if(r.consumable.test(t.viewItem,{name:t.viewItem.name}))if(n.paragraphLikeElements.has(t.viewItem.name)){if(t.viewItem.isEmpty)return;var i=r.writer.createElement("paragraph"),o=r.splitToAllowedParent(i,t.modelCursor);if(!o)return;r.writer.insert(i,o.position);var a=r.convertChildren(t.viewItem,Fa.createAt(i)).modelRange;t.modelRange=new Da(Fa.createBefore(i),a.end),t.modelCursor=t.modelRange.end}else Ap(t.viewItem,t.modelCursor,r.schema)&&(t=Object.assign(t,xp(t.viewItem,t.modelCursor,r)))}),{priority:"low"}),i.upcastDispatcher.on("text",(function(e,t,n){t.modelRange||Ap(t.viewItem,t.modelCursor,n.schema)&&(t=Object.assign(t,xp(t.viewItem,t.modelCursor,n)))}),{priority:"lowest"}),r.document.registerPostFixer((function(t){return e._autoparagraphEmptyRoots(t)})),t.on("dataReady",(function(){r.enqueueChange("transparent",(function(t){return e._autoparagraphEmptyRoots(t)}))}),{priority:"lowest"})}},{key:"_autoparagraphEmptyRoots",value:function(e){var t,n=this.editor.model,r=d(n.document.getRootNames());try{for(r.s();!(t=r.n()).done;){var i=t.value,o=n.document.getRoot(i);if(o.isEmpty&&"$graveyard"!=o.rootName&&n.schema.checkChild(o,"paragraph"))return e.insertElement("paragraph",o),!0}}catch(a){r.e(a)}finally{r.f()}}}],[{key:"pluginName",get:function(){return"Paragraph"}}]),n}(id);function xp(e,t,n){var r=n.writer.createElement("paragraph");return n.writer.insert(r,t),n.convertItem(e,Fa.createAt(r))}function Ap(e,t,n){var r=new ls(t);return!!n.checkChild(r,"paragraph")&&!!n.checkChild(r.push("paragraph"),e)}_p.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);var Cp=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).modelElements=r,i}return p(n,[{key:"refresh",value:function(){var e=this,t=Cv(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some((function(n){return Tp(t,n,e.editor.model.schema)}))}},{key:"execute",value:function(e){var t=this.editor.model,n=t.document,r=e.value;t.change((function(e){var i,o=Array.from(n.selection.getSelectedBlocks()).filter((function(e){return Tp(e,r,t.schema)})),a=d(o);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.is(r)||e.rename(s,r)}}catch(c){a.e(c)}finally{a.f()}}))}}]),n}(ud);function Tp(e,t,n){return n.checkChild(e.parent,t)&&!n.isObject(e)}var Op="paragraph",Sp=function(e){g(n,e);var t=m(n);function n(e){var r;return v(this,n),r=t.call(this,e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]}),r}return p(n,[{key:"init",value:function(){var e,t=this.editor,n=t.config.get("heading.options"),r=[],i=d(n);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.model!==Op&&(t.model.schema.register(o.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(o),r.push(o.model))}}catch(a){i.e(a)}finally{i.f()}t.commands.add("heading",new Cp(t,r))}},{key:"afterInit",value:function(){var e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(function(t,r){var i=e.model.document.selection.getFirstPosition().parent;n.some((function(e){return i.is(e.model)}))&&!i.is(Op)&&0===i.childCount&&r.writer.rename(i,Op)}))}}],[{key:"requires",get:function(){return[_p]}}]),n}(id);n(9);var Pp=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor,n=t.t,r=function(e){var t=e.t,n={Paragraph:t("u"),"Heading 1":t("v"),"Heading 2":t("w"),"Heading 3":t("x")};return e.config.get("heading.options").map((function(e){var t=n[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e}))}(t),i=n("q"),o=n("r");t.ui.componentFactory.add("heading",(function(n){var a,s={},c=new ti,u=t.commands.get("heading"),l=t.commands.get("paragraph"),f=[u],h=d(r);try{var v=function(){var e=a.value,t={type:"button",model:new sp({label:e.title,class:e.class,withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(l,"value"),t.model.set("commandName","paragraph"),f.push(l)):(t.model.bind("isOn").to(u,"value",(function(t){return t===e.model})),t.model.set({commandName:"heading",commandValue:e.model})),c.add(t),s[e.model]=e.title};for(h.s();!(a=h.n()).done;)v()}catch(g){h.e(g)}finally{h.f()}var p=zv(n);return Wv(p,c),p.buttonView.set({isOn:!1,withText:!0,tooltip:o}),p.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),p.bind("isEnabled").toMany(f,"isEnabled",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some((function(e){return e}))})),p.buttonView.bind("label").to(u,"value",l,"value",(function(e,t){var n=e||t&&"paragraph";return s[n]?s[n]:i})),e.listenTo(p,"execute",(function(e){t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus()})),p}))}}]),n}(id),Ep=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).type="bulleted"==r?"bulleted":"numbered",i}return p(n,[{key:"refresh",value:function(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document,r=Array.from(n.selection.getSelectedBlocks()).filter((function(e){return Ip(e,t.schema)})),i=!0===this.value;t.change((function(t){if(i){for(var n=r[r.length-1].nextSibling,o=Number.POSITIVE_INFINITY,a=[];n&&"listItem"==n.name&&0!==n.getAttribute("listIndent");){var s=n.getAttribute("listIndent");s<o&&(o=s);var c=s-o;a.push({element:n,listIndent:c}),n=n.nextSibling}a=a.reverse();var u,l=d(a);try{for(l.s();!(u=l.n()).done;){var f=u.value;t.setAttribute("listIndent",f.listIndent,f.element)}}catch(b){l.e(b)}finally{l.f()}}if(!i){var h,v=Number.POSITIVE_INFINITY,p=d(r);try{for(p.s();!(h=p.n()).done;){var g=h.value;g.is("listItem")&&g.getAttribute("listIndent")<v&&(v=g.getAttribute("listIndent"))}}catch(b){p.e(b)}finally{p.f()}Rp(r,!0,v=0===v?1:v),Rp(r,!1,v)}var m,y=d(r.reverse());try{for(y.s();!(m=y.n()).done;){var k=m.value;i&&"listItem"==k.name?t.rename(k,"paragraph"):i||"listItem"==k.name?i||"listItem"!=k.name||k.getAttribute("listType")==e.type||t.setAttribute("listType",e.type,k):(t.setAttributes({listType:e.type,listIndent:0},k),t.rename(k,"listItem"))}}catch(b){y.e(b)}finally{y.f()}}))}},{key:"_getValue",value:function(){var e=Cv(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("listItem")&&e.getAttribute("listType")==this.type}},{key:"_checkEnabled",value:function(){if(this.value)return!0;var e=this.editor.model.document.selection,t=this.editor.model.schema,n=Cv(e.getSelectedBlocks());return!!n&&Ip(n,t)}}]),n}(ud);function Rp(e,t,n){var r=t?e[0]:e[e.length-1];if(r.is("listItem"))for(var i=r[t?"previousSibling":"nextSibling"],o=r.getAttribute("listIndent");i&&i.is("listItem")&&i.getAttribute("listIndent")>=n;)o>i.getAttribute("listIndent")&&(o=i.getAttribute("listIndent")),i.getAttribute("listIndent")==o&&e[t?"unshift":"push"](i),i=i[t?"previousSibling":"nextSibling"]}function Ip(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e)}var Mp=function(e){g(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e))._indentBy="forward"==r?1:-1,i}return p(n,[{key:"refresh",value:function(){this.isEnabled=this._checkEnabled()}},{key:"execute",value:function(){var e=this,t=this.editor.model,n=t.document,r=Array.from(n.selection.getSelectedBlocks());t.change((function(t){for(var n=r[r.length-1],i=n.nextSibling;i&&"listItem"==i.name&&i.getAttribute("listIndent")>n.getAttribute("listIndent");)r.push(i),i=i.nextSibling;e._indentBy<0&&(r=r.reverse());var o,a=d(r);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=s.getAttribute("listIndent")+e._indentBy;c<0?t.rename(s,"paragraph"):t.setAttribute("listIndent",c,s)}}catch(u){a.e(u)}finally{a.f()}}))}},{key:"_checkEnabled",value:function(){var e=Cv(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("listItem"))return!1;if(this._indentBy>0){for(var t=e.getAttribute("listIndent"),n=e.getAttribute("listType"),r=e.previousSibling;r&&r.is("listItem")&&r.getAttribute("listIndent")>=t;){if(r.getAttribute("listIndent")==t)return r.getAttribute("listType")==n;r=r.previousSibling}return!1}return!0}}]),n}(ud);function Fp(){var e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:null}function Dp(e,t,n){var r=n.consumable;if(r.test(t.item,"insert")&&r.test(t.item,"attribute:listType")&&r.test(t.item,"attribute:listIndent")){r.consume(t.item,"insert"),r.consume(t.item,"attribute:listType"),r.consume(t.item,"attribute:listIndent");var i=t.item;Jp(i,function(e,t){var n=t.mapper,r=t.writer,i="numbered"==e.getAttribute("listType")?"ol":"ul",o=function(e){var t=e.createContainerElement("li");return t.getFillerOffset=Fp,t}(r),a=r.createContainerElement(i,null);return r.insert(Jr.createAt(a),o),n.bindElements(e,o),o}(i,n),n)}}function Np(e,t,n){var r=n.mapper.toViewPosition(t.position).getLastMatchingPosition((function(e){return!e.item.is("li")})).nodeAfter,i=n.writer;i.breakContainer(Jr.createBefore(r)),i.breakContainer(Jr.createAfter(r));var o=r.parent,a=o.previousSibling,s=Yr.createOn(o),c=i.remove(s);a&&a.nextSibling&&Gp(i,a,a.nextSibling),Yp(n.mapper.toModelElement(r).getAttribute("listIndent")+1,t.position,s.start,r,n);var u,l=d(Yr.createIn(c).getItems());try{for(l.s();!(u=l.n()).done;){var f=u.value;n.mapper.unbindViewElement(f)}}catch(h){l.e(h)}finally{l.f()}e.stop()}function jp(e,t,n){if(n.consumable.consume(t.item,"attribute:listType")){var r=n.mapper.toViewElement(t.item),i=n.writer;i.breakContainer(Jr.createBefore(r)),i.breakContainer(Jr.createAfter(r));var o=r.parent,a="numbered"==t.attributeNewValue?"ol":"ul";Gp(i,o=i.rename(o,a),o.nextSibling),Gp(i,o.previousSibling,o);var s,c=d(t.item.getChildren());try{for(c.s();!(s=c.n()).done;){var u=s.value;n.consumable.consume(u,"insert")}}catch(l){c.e(l)}finally{c.f()}}}function Bp(e,t,n){if(n.consumable.consume(t.item,"attribute:listIndent")){var r=n.mapper.toViewElement(t.item),i=n.writer;i.breakContainer(Jr.createBefore(r)),i.breakContainer(Jr.createAfter(r));var o=r.parent,a=o.previousSibling,s=Yr.createOn(o);i.remove(s),a&&a.nextSibling&&Gp(i,a,a.nextSibling),Yp(t.attributeOldValue+1,t.range.start,s.start,r,n),Jp(t.item,r,n);var c,u=d(t.item.getChildren());try{for(u.s();!(c=u.n()).done;){var l=c.value;n.consumable.consume(l,"insert")}}catch(f){u.e(f)}finally{u.f()}}}function Vp(e,t,n){if("listItem"!=t.item.name){for(var r=n.mapper.toViewPosition(t.range.start),i=n.writer,o=[];("ul"==r.parent.name||"ol"==r.parent.name)&&"li"==(r=i.breakContainer(r)).parent.name;){var a=r,s=Jr.createAt(r.parent,"end");if(!a.isEqual(s)){var c=i.remove(new Yr(a,s));o.push(c)}r=Jr.createAfter(r.parent)}if(o.length>0){for(var u=0;u<o.length;u++){var l=r.nodeBefore;if(r=i.insert(r,o[u]).end,u>0){var f=Gp(i,l,l.nextSibling);f&&f.parent==l&&r.offset--}}Gp(i,r.nodeBefore,r.nodeAfter)}}}function Lp(e,t,n){var r=n.mapper.toViewPosition(t.position),i=r.nodeBefore,o=r.nodeAfter;Gp(n.writer,i,o)}function zp(e,t,n){if(n.consumable.consume(t.viewItem,{name:!0})){var r=n.writer,i=this.conversionApi.store,o=r.createElement("listItem");i.indent=i.indent||0,r.setAttribute("listIndent",i.indent,o);var a=t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted";r.setAttribute("listType",a,o),i.indent++;var s=n.splitToAllowedParent(o,t.modelCursor);if(!s)return;r.insert(o,s.position);var c,u=Fa.createAfter(o),l=d(t.viewItem.getChildren());try{for(l.s();!(c=l.n()).done;){var f=c.value;"ul"==f.name||"ol"==f.name?u=n.convertItem(f,u).modelCursor:n.convertItem(f,Fa.createAt(o,"end"))}}catch(h){l.e(h)}finally{l.f()}i.indent--,t.modelRange=new Da(t.modelCursor,u),s.cursorParent?t.modelCursor=Fa.createAt(s.cursorParent):t.modelCursor=t.modelRange.end}}function Wp(e,t,n){if(n.consumable.test(t.viewItem,{name:!0}))for(var r=0,i=Array.from(t.viewItem.getChildren());r<i.length;r++){var o=i[r];o.is("li")||o._remove()}}function qp(e,t,n){if(n.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;var r,i=f(t.viewItem.getChildren()),o=!1,a=!0,s=d(i);try{for(s.s();!(r=s.n()).done;){var c=r.value;!o||c.is("ul")||c.is("ol")||c._remove(),c.is("text")?(a&&(c._data=c.data.replace(/^\s+/,"")),(!c.nextSibling||c.nextSibling.is("ul")||c.nextSibling.is("ol"))&&(c._data=c.data.replace(/\s+$/,""))):(c.is("ul")||c.is("ol"))&&(o=!0),a=!1}}catch(u){s.e(u)}finally{s.f()}}}function Up(e,t){if(!t.isPhantom){var n=t.modelPosition.nodeBefore;if(n&&n.is("listItem")){var r,i=t.mapper.toViewElement(n),o=i.getAncestors().find((function(e){return e.is("ul")||e.is("ol")})),a=new Gr({startPosition:Jr.createAt(i,0)}),s=d(a);try{for(s.s();!(r=s.n()).done;){var c=r.value;if("elementStart"==c.type&&c.item.is("li")){t.viewPosition=c.previousPosition;break}if("elementEnd"==c.type&&c.item==o){t.viewPosition=c.nextPosition;break}}}catch(u){s.e(u)}finally{s.f()}}}}function Hp(e,t){var n=t.viewPosition,r=n.parent,i=t.mapper;if("ul"==r.name||"ol"==r.name){if(n.isAtEnd){var o=i.toModelElement(n.nodeBefore),a=i.getModelLength(n.nodeBefore);t.modelPosition=Fa.createBefore(o).getShiftedBy(a)}else{var s=i.toModelElement(n.nodeAfter);t.modelPosition=Fa.createBefore(s)}e.stop()}else if("li"==r.name&&n.nodeBefore&&("ul"==n.nodeBefore.name||"ol"==n.nodeBefore.name)){for(var c=i.toModelElement(r),u=1,l=n.nodeBefore;l&&(l.is("ul")||l.is("ol"));)u+=i.getModelLength(l),l=l.previousSibling;t.modelPosition=Fa.createBefore(c).getShiftedBy(u),e.stop()}}function $p(e,t){var n=h(t,2),r=n[0],i=n[1],o=r.is("documentFragment")?r.getChild(0):r;if(o&&o.is("listItem")){var a=i.getFirstPosition(),s=null;if(a.parent.is("listItem")?s=a.parent:a.nodeBefore&&a.nodeBefore.is("listItem")&&(s=a.nodeBefore),s){var c=s.getAttribute("listIndent");if(c>0)for(;o&&o.is("listItem");)o._setAttribute("listIndent",o.getAttribute("listIndent")+c),o=o.nextSibling}}}function Kp(e,t){for(var n=!!t.sameIndent,r=!!t.smallerIndent,i=e instanceof Ea?e.getAttribute("listIndent"):t.listIndent,o=e instanceof Ea?e.previousSibling:e.nodeBefore;o&&"listItem"==o.name;){var a=o.getAttribute("listIndent");if(n&&i==a||r&&i>a)return o;o=o.previousSibling}return null}function Gp(e,t,n){return t&&n&&("ul"==t.name||"ol"==t.name)&&t.name==n.name?e.mergeContainers(Jr.createAfter(t)):null}function Jp(e,t,n){var r=t.parent,i=n.mapper,o=n.writer,a=i.toViewPosition(Fa.createBefore(e)),s=Kp(e,{sameIndent:!0,smallerIndent:!0}),c=e.previousSibling;if(s&&s.getAttribute("listIndent")==e.getAttribute("listIndent")){var u=i.toViewElement(s);a=o.breakContainer(Jr.createAfter(u))}else a=c&&"listItem"==c.name?i.toViewPosition(Fa.createAt(c,"end")):i.toViewPosition(Fa.createBefore(e));if(a=Qp(a),o.insert(a,r),c&&"listItem"==c.name){var l,f=i.toViewElement(c),h=new Gr({boundaries:new Yr(Jr.createAt(f,0),a),ignoreElementEnd:!0}),v=d(h);try{for(v.s();!(l=v.n()).done;){var p=l.value;if(p.item.is("li")){var g=o.breakContainer(Jr.createBefore(p.item)),m=p.item.parent,y=Jr.createAt(t,"end");Gp(o,y.nodeBefore,y.nodeAfter),o.move(Yr.createOn(m),y),h.position=g}}}catch(C){v.e(C)}finally{v.f()}}else{var k=r.nextSibling;if(k&&(k.is("ul")||k.is("ol"))){var b,w=null,_=d(k.getChildren());try{for(_.s();!(b=_.n()).done;){var x=b.value,A=i.toModelElement(x);if(!(A&&A.getAttribute("listIndent")>e.getAttribute("listIndent")))break;w=x}}catch(C){_.e(C)}finally{_.f()}w&&(o.breakContainer(Jr.createAfter(w)),o.move(Yr.createOn(w.parent),Jr.createAt(t,"end")))}}Gp(o,r,r.nextSibling),Gp(o,r.previousSibling,r)}function Yp(e,t,n,r,i){var o,a=Kp(t,{sameIndent:!0,smallerIndent:!0,listIndent:e}),s=i.mapper,c=i.writer,u=a?a.getAttribute("listIndent"):null;if(a)if(u==e){var l=s.toViewElement(a).parent;o=Jr.createAfter(l)}else{var h=Fa.createAt(a,"end");o=s.toViewPosition(h)}else o=n;o=Qp(o);for(var d=0,v=f(r.getChildren());d<v.length;d++){var p=v[d];(p.is("ul")||p.is("ol"))&&(o=c.move(Yr.createOn(p),o).end,Gp(c,p,p.nextSibling),Gp(c,p.previousSibling,p))}}function Qp(e){return e.getLastMatchingPosition((function(e){return e.item.is("uiElement")}))}var Xp=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this,t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var n=t.data,r=t.editing;t.model.document.registerPostFixer((function(e){return function(e,t){var n,r=e.document.differ.getChanges(),i=new Map,o=!1,a=d(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("insert"==s.type&&"listItem"==s.name)h(s.position);else if("insert"==s.type&&"listItem"!=s.name){if("$text"!=s.name){var c=s.position.nodeAfter;c.hasAttribute("listIndent")&&(t.removeAttribute("listIndent",c),o=!0),c.hasAttribute("listType")&&(t.removeAttribute("listType",c),o=!0)}h(s.position.getShiftedBy(s.length))}else"remove"==s.type&&"listItem"==s.name?h(s.position):("attribute"==s.type&&"listIndent"==s.attributeKey||"attribute"==s.type&&"listType"==s.attributeKey)&&h(s.range.start)}}catch(g){a.e(g)}finally{a.f()}var u,l=d(i.values());try{for(l.s();!(u=l.n()).done;){var f=u.value;v(f),p(f)}}catch(g){l.e(g)}finally{l.f()}return o;function h(e){var t=e.nodeBefore;if(t&&t.is("listItem")){var n=t;if(i.has(n))return;for(;n.previousSibling&&n.previousSibling.is("listItem");)if(n=n.previousSibling,i.has(n))return;i.set(e.nodeBefore,n)}else{var r=e.nodeAfter;r&&r.is("listItem")&&i.set(r,r)}}function v(e){for(var n=0,r=null;e&&e.is("listItem");){var i=e.getAttribute("listIndent");if(i>n){var a=void 0;null===r?(r=i-n,a=n):(r>i&&(r=i),a=i-r),t.setAttribute("listIndent",a,e),o=!0}else r=null,n=e.getAttribute("listIndent")+1;e=e.nextSibling}}function p(e){for(var n=[],r=null;e&&e.is("listItem");){var i=e.getAttribute("listIndent");if(r&&r.getAttribute("listIndent")>i&&(n=n.slice(0,i+1)),0!=i)if(n[i]){var a=n[i];e.getAttribute("listType")!=a&&(t.setAttribute("listType",a,e),o=!0)}else n[i]=e.getAttribute("listType");r=e,e=e.nextSibling}}}(t.model,e)})),r.mapper.registerViewToModelLength("li",Zp),n.mapper.registerViewToModelLength("li",Zp),r.mapper.on("modelToViewPosition",Up),r.mapper.on("viewToModelPosition",Hp),n.mapper.on("modelToViewPosition",Up),r.downcastDispatcher.on("insert",Vp,{priority:"high"}),r.downcastDispatcher.on("insert:listItem",Dp),n.downcastDispatcher.on("insert",Vp,{priority:"high"}),n.downcastDispatcher.on("insert:listItem",Dp),r.downcastDispatcher.on("attribute:listType:listItem",jp),n.downcastDispatcher.on("attribute:listType:listItem",jp),r.downcastDispatcher.on("attribute:listIndent:listItem",Bp),n.downcastDispatcher.on("attribute:listIndent:listItem",Bp),r.downcastDispatcher.on("remove:listItem",Np),r.downcastDispatcher.on("remove",Lp,{priority:"low"}),n.downcastDispatcher.on("remove:listItem",Np),n.downcastDispatcher.on("remove",Lp,{priority:"low"}),n.upcastDispatcher.on("element:ul",Wp,{priority:"high"}),n.upcastDispatcher.on("element:ol",Wp,{priority:"high"}),n.upcastDispatcher.on("element:li",qp,{priority:"high"}),n.upcastDispatcher.on("element:li",zp),t.model.on("insertContent",$p,{priority:"high"}),t.commands.add("numberedList",new Ep(t,"numbered")),t.commands.add("bulletedList",new Ep(t,"bulleted")),t.commands.add("indentList",new Mp(t,"forward")),t.commands.add("outdentList",new Mp(t,"backward"));var i=this.editor.editing.view.document;this.listenTo(i,"enter",(function(t,n){var r=e.editor.model.document,i=r.selection.getLastPosition().parent;r.selection.isCollapsed&&"listItem"==i.name&&i.isEmpty&&(e.editor.execute("outdentList"),n.preventDefault(),t.stop())})),this.listenTo(i,"delete",(function(t,n){if("backward"===n.direction){var r=e.editor.model.document.selection;if(r.isCollapsed){var i=r.getFirstPosition();if(i.isAtStart){var o=i.parent;"listItem"===o.name&&(o.previousSibling&&"listItem"===o.previousSibling.name||(e.editor.execute("outdentList"),n.preventDefault(),t.stop()))}}}}),{priority:"high"});var o=function(t){return function(n,r){e.editor.commands.get(t).isEnabled&&(e.editor.execute(t),r())}};this.editor.keystrokes.set("Tab",o("indentList")),this.editor.keystrokes.set("Shift+Tab",o("outdentList"))}}],[{key:"requires",get:function(){return[_p]}}]),n}(id);function Zp(e){var t,n=1,r=d(e.getChildren());try{for(r.s();!(t=r.n()).done;){var i=t.value;if("ul"==i.name||"ol"==i.name){var o,a=d(i.getChildren());try{for(a.s();!(o=a.n()).done;)n+=Zp(o.value)}catch(s){a.e(s)}finally{a.f()}}}}catch(s){r.e(s)}finally{r.f()}return n}var eg=n(24),tg=n.n(eg),ng=n(25),rg=n.n(ng),ig=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"init",value:function(){var e=this.editor.t;this._addButton("numberedList",e("s"),tg.a),this._addButton("bulletedList",e("t"),rg.a)}},{key:"_addButton",value:function(e,t,n){var r=this,i=this.editor;i.ui.componentFactory.add(e,(function(o){var a=i.commands.get(e),s=new Ud(o);return s.set({label:t,icon:n,tooltip:!0}),s.bind("isOn","isEnabled").to(a,"value","isEnabled"),r.listenTo(s,"execute",(function(){return i.execute(e)})),s}))}}]),n}(id);n.d(t,"default",(function(){return og}));var og=function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return n}(rd);og.builtinPlugins=[function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[cd,vd,yd,Nd,Yd]}},{key:"pluginName",get:function(){return"Essentials"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,[{key:"afterInit",value:function(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats()}},{key:"_addListAutoformats",value:function(){var e=this.editor.commands;e.get("bulletedList")&&new Qd(this.editor,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&new Qd(this.editor,/^\d+[.|)]\s$/,"numberedList")}},{key:"_addBasicStylesAutoformats",value:function(){var e=this.editor.commands;e.get("bold")&&(new Xd(this.editor,/(\*\*)([^*]+)(\*\*)$/g,"bold"),new Xd(this.editor,/(__)([^_]+)(__)$/g,"bold")),e.get("italic")&&(new Xd(this.editor,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,"italic"),new Xd(this.editor,/(?:^|[^_])(_)([^_]+)(_)$/g,"italic")),e.get("code")&&new Xd(this.editor,/(`)([^`]+)(`)$/g,"code")}},{key:"_addHeadingAutoformats",value:function(){var e=this,t=this.editor.commands.get("heading");t&&t.modelElements.filter((function(e){return e.match(/^heading[1-6]$/)})).forEach((function(t){var n=t[7],r=new RegExp("^(#{".concat(n,"})\\s$"));new Qd(e.editor,r,(function(){e.editor.execute("heading",{value:t})}))}))}},{key:"_addBlockQuoteAutoformats",value:function(){this.editor.commands.get("blockQuote")&&new Qd(this.editor,/^>\s$/,"blockQuote")}}],[{key:"pluginName",get:function(){return"Autoformat"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[nv,av]}},{key:"pluginName",get:function(){return"Bold"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[cv,hv]}},{key:"pluginName",get:function(){return"Italic"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[Sp,Pp]}},{key:"pluginName",get:function(){return"Heading"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[vv,yv]}},{key:"pluginName",get:function(){return"Strikethrough"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[bv,Av]}},{key:"pluginName",get:function(){return"Underline"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[ap,lp]}},{key:"pluginName",get:function(){return"FontSize"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[gp,kp]}},{key:"pluginName",get:function(){return"FontFamily"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[Rv,Xv]}},{key:"pluginName",get:function(){return"Alignment"}}]),n}(id),function(e){g(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return p(n,null,[{key:"requires",get:function(){return[Xp,ig]}},{key:"pluginName",get:function(){return"List"}}]),n}(id),_p],og.defaultConfig={toolbar:{items:["heading","|","fontsize","fontfamily","|","bold","italic","underline","strikethrough","|","alignment","|","undo","redo"]},language:"en"}}]).default},135:function(e,t,n){var r=n(136),i=n(137),o=n(91),a=n(138);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},136:function(e,t,n){var r=n(102);e.exports=function(e){if(Array.isArray(e))return r(e)}},137:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},138:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},139:function(e,t,n){var r=n(140),i=n(141),o=n(91),a=n(142);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},140:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},141:function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},142:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},143:function(e,t,n){var r=n(82),i=n(90),o=n(144),a=n(103);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},144:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},82:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},89:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},90:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},91:function(e,t,n){var r=n(102);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},93:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},94:function(e,t,n){var r=n(132);function i(t,n,o){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},95:function(e,t,n){var r=n(90);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},96:function(e,t,n){var r=n(82),i=n(97),o=n(98);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}}},97:function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},98:function(e,t,n){var r=n(133),i=n(89);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},99:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}}]);
//# sourceMappingURL=3.ebfd3071.chunk.js.map