(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[7],{112:function(e,t,n){},114:function(e,t,n){},121:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var c=n(29),a=n.n(c),s=n(39),r=n(3),i=(n(112),n(113),n(114),n(149)),o=n.p+"static/media/avatar.e4c1ef62.jpg",l=n(18),u=function(e,t,n,c){l.b.database().ref("Blogs/".concat(c,"/comments")).push({user:e,content:t,avatar:n})},d=function(e,t,n,c,a){l.b.database().ref("Blogs/".concat(e,"/comments/").concat(t,"/feedback")).push({user:n,content:c,avatar:a})},m=n(20),j=n(33),b=function(e){return{type:j.a.SET_LST_COMMENTS,payload:e}},f=n(23),h=(n(47),n(2)),p=Object(f.b)((function(e){return{hiddenEmoji:e.comment.hiddenEmoji}}),(function(e){return{setHiddenEmoji:function(){return e({type:j.a.HIDDEN_EMOJI})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(m.b)().currentUser,l=function(){var n=Object(s.a)(a.a.mark((function n(s,r){var i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,i=t.current.value,!s){n.next=9;break}if(""===i){n.next=7;break}return n.next=6,u(c.displayName,i,c.photoURL,e.id);case 6:t.current.value="";case 7:n.next=14;break;case 9:if(""===i){n.next=14;break}return n.next=12,d(e.keyBlog,e.keyComment,c.displayName,i,c.photoURL);case 12:t.current.value="",r.target.closest(".feedback").previousSibling.checked=!1;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log("Comments: "+n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,t){return n.apply(this,arguments)}}();Object(r.useEffect)((function(){return window.addEventListener("scroll",j),function(){window.removeEventListener("scroll",j)}}));var j=function(){};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsx)("div",{className:"comment-avatar",children:Object(h.jsx)("img",{src:null!==c?c.photoURL:o,alt:null!==c?c.photoURL:""})}),Object(h.jsxs)("div",{className:"comment-type",children:[Object(h.jsx)("textarea",{ref:t,placeholder:"Th\xeam b\xecnh lu\u1eadn",id:"comment-input",onInput:function(){t.current.style.height="auto",t.current.style.height=t.current.scrollHeight+"px"},name:"nowrap",rows:"2",wrap:"soft"}),Object(h.jsxs)("div",{className:"comment-option",children:[Object(h.jsx)("span",{onClick:function(t){e.setHiddenEmoji()},children:Object(h.jsx)("i",{className:"fa fa-smile-o","aria-hidden":"true"})}),Object(h.jsx)("div",{className:"emoji-picker",ref:n,style:{display:e.hiddenEmoji?"none":"block"},children:Object(h.jsx)(i.a,{onSelect:function(e,n){t.current.value=t.current.value+e.native}})})]})]})]}),Object(h.jsxs)("div",{className:"send",children:[e.typeComment?"":Object(h.jsx)("button",{onClick:function(e){e.target.closest(".feedback").previousSibling.checked=!1},className:"btn btn-primary",children:"H\u1ee7y"}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(t){return l(e.typeComment,t)},children:"B\xecnh lu\u1eadn"})]})]})})),O=n(71),v=n(116),x=n.n(v),g=(n(121),function(){return Object(h.jsx)("div",{style:{textAlign:"center",width:"100%"},children:Object(h.jsx)("div",{className:"spinner-border",role:"status",children:Object(h.jsx)("span",{className:"sr-only",children:"Loading..."})})})}),y=Object(f.b)((function(e){return{lstComments:e.comment.lstComments}}),(function(e){return{setLstComments:function(t){return e(b(t))}}}))((function(e){var t=e.lstComments,n=e.setLstComments,c=e.idBlog;return Object(r.useEffect)((function(){n([]),l.b.database().ref("Blogs/".concat(c,"/comments")).on("value",(function(e){if(null!==e.val()){var t=Object.keys(e.val()).map((function(t){return{idCmt:t,value:e.val()[t]}}));n(t)}}))}),[]),t.length>0?Object(h.jsx)("div",{className:"list-comments",children:Object(h.jsx)("div",{className:"cmt-content",children:t?t.map((function(e,t){return Object(h.jsxs)(x.a,{className:"cmt",placeholder:Object(h.jsx)(g,{}),children:[Object(h.jsxs)("div",{className:"comments-user",children:[Object(h.jsx)("img",{src:e.value.avatar,alt:e.value.avatar}),Object(h.jsxs)("div",{className:"comments-content",children:[Object(h.jsx)("h6",{children:e.value.user}),Object(h.jsx)("p",{children:e.value.content}),Object(h.jsxs)("div",{className:"comments-action",children:[Object(h.jsx)("span",{className:"action",children:"Th\xedch"}),Object(h.jsx)("label",{className:"action",htmlFor:e.idCmt,children:"Ph\u1ea3n h\u1ed3i"}),Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"fa fa-thumbs-up","aria-hidden":"true"})," 2"]})]})]})]}),Object(h.jsx)("div",{className:"cmt-feedback",children:"undefined"!==typeof e.value.feedback?Object.keys(e.value.feedback).map((function(t,n){return Object(h.jsx)("div",{className:"cmt",children:Object(h.jsxs)("div",{className:"comments-user",children:[Object(h.jsx)("img",{src:e.value.feedback[t].avatar,alt:e.value.feedback[t].avatar}),Object(h.jsxs)("div",{className:"comments-content",children:[Object(h.jsx)("h6",{children:e.value.feedback[t].user}),Object(h.jsx)("p",{children:e.value.feedback[t].content}),Object(h.jsxs)("div",{className:"comments-action",children:[Object(h.jsx)("span",{className:"action",children:"Th\xedch"}),Object(h.jsx)("label",{className:"action",htmlFor:e.idCmt,children:"Ph\u1ea3n h\u1ed3i"}),Object(h.jsxs)("span",{children:[Object(h.jsx)("i",{className:"fa fa-thumbs-up","aria-hidden":"true"})," 2"]})]})]})]})},n)})):Object(h.jsx)("div",{})}),Object(h.jsx)("input",{type:"checkbox",name:"feedback",className:"feedbackCK",id:e.idCmt}),Object(h.jsx)("div",{className:"feedback",children:Object(h.jsx)(p,{typeComment:!1,keyComment:e.idCmt,keyBlog:c})})]},t)})):null})}):null})),N=n(85);t.default=Object(f.b)((function(e){var t=e.blog,n=e.comment,c=e.common;return{tagsBlog:t.tagsBlog,lstComments:n.lstComments,isLoading:c.isLoading}}),(function(e){return{setTagsBlog:function(t){return e(Object(O.g)(t))},setLstComments:function(t){return e(b(t))},setLoading:function(t){return e(Object(N.a)(t))}}}))((function(e){var t=e.tagsBlog,n=e.setTagsBlog,c=e.match,i=e.isLoading,o=e.setLoading,u=Object(r.useRef)();return Object(r.useEffect)((function(){n([]),Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{l.b.database().ref("Blogs/".concat(c.params.id)).on("value",(function(e){null!==e.val()&&(n(e.val().tags),null!==u.current&&(o(!1),u.current.innerHTML=e.val().content))}))}catch(t){console.log("BlogDetail: "+t)}case 1:case"end":return e.stop()}}),e)})))()}),[]),i?Object(h.jsx)("div",{style:{textAlign:"center"},className:"blog-page",children:Object(h.jsx)("div",{className:"spinner-grow",role:"status",children:Object(h.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(h.jsxs)("div",{className:"blog-detail-page",children:[Object(h.jsx)("div",{className:"ck-content",children:Object(h.jsx)("div",{ref:u})}),Object(h.jsx)("ul",{className:"blog-tags-list",children:t.map((function(e,t){return Object(h.jsx)("li",{children:e},t)}))}),Object(h.jsx)(p,{typeComment:!0,id:c.params.id}),Object(h.jsx)(y,{idBlog:c.params.id})]})}))},71:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return m}));var c=n(17),a=function(e){return{type:c.a.SET_LST_BLOGS,payload:e}},s=function(e){return{type:c.a.SET_COUNT_BLOGS,payload:e}},r=function(e){return{type:c.a.SET_TAGS_BLOG,payload:e}},i=function(e){return{type:c.a.SET_TAGS_CREATING,payload:e}},o=function(e){return{type:c.a.SET_BLOG_INFO,payload:e}},l=function(e){return{type:c.a.SET_FILENAME,payload:e}},u=function(){return{type:c.a.TOGGLE_SAVE_BOX}},d=function(e){return{type:c.a.PROGRESS_UPLOAD,payload:e}},m=function(e){return{type:c.a.HIDDEN_PROGRESS,payload:e}}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(41),a=function(e){return{type:c.a.SET_LOADING,payload:e}}}}]);
//# sourceMappingURL=7.5fd503bd.chunk.js.map