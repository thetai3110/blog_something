(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[5],{124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},148:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(3),c=(n(124),n(18)),i=n(72),o=(n(125),function(e){var t=e.title,n=void 0===t?"":t,a=e.message,c=void 0===a?"":a,i=e.type,o=void 0===i?"info":i,r=e.duration,s=void 0===r?3e3:r,l=document.getElementById("toast-custom");if(l){var u=document.createElement("div"),d=setTimeout((function(){l.removeChild(u)}),s+1e3);u.onclick=function(e){e.target.closest(".toast-custom-close")&&(l.removeChild(u),clearTimeout(d))};var b={success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-exclamation-circle",error:"fa fa-exclamation-circle"}[o],f=(s/1e3).toFixed(2);u.classList.add("toast-custom","toast-custom-".concat(o)),u.style.animation="slideInLeft ease .3s, fadeOut linear 1s ".concat(f,"s forwards"),u.innerHTML='\n                      <div class="toast-custom-icon">\n                          <i class="'.concat(b,'"></i>\n                      </div>\n                      <div class="toast-custom-body">\n                          <h3 class="toast-custom-title">').concat(n,'</h3>\n                          <p class="toast-custom-msg">').concat(c,'</p>\n                      </div>\n                      <div class="toast-custom-close">\n                          <i class="fa fa-times"></i>\n                      </div>\n                  '),l.appendChild(u)}}),r=(n(126),n(2)),s=Object(c.b)((function(e){return{tagsCreating:e.blog.tagsCreating}}),(function(e){return{setTagsCreating:function(t){return e(Object(i.h)(t))}}}))((function(e){var t=e.tagsCreating,n=e.setTagsCreating,c=Object(a.useRef)(null),i=Object(a.useRef)(null);return Object(r.jsxs)("div",{className:"tags-input",children:[Object(r.jsx)("div",{ref:i,className:"tags",onClick:function(e){if(e.target.closest(".close-tag")){var a=e.target.closest("span").innerText.trim();t.forEach((function(e,c){if(a===e){i.current.removeChild(i.current.children[c]);var o=t;o.splice(c,1),n(o)}}))}}}),Object(r.jsx)("div",{className:"input",children:Object(r.jsx)("input",{ref:c,placeholder:"T\u1ea1o kh\xf4ng qu\xe1 5 tag",type:"text",onKeyDown:function(e){if(13===e.keyCode){var a=e.target.value;if(""!==a&&!t.includes(a))if(t.length<5){var r=t,s=document.createElement("span");s.innerHTML="".concat(a,' <i class="fa fa-close close-tag"></i>'),i.current.appendChild(s),c.current.value="",r.push(a),n(r)}else o({title:"Warning!",message:"Cannot create too 5 tags",type:"warning",duration:3e3})}if((8===e.keyCode||46===e.keyCode)&&(""===e.target.value&&i.current.children.length>0)){i.current.removeChild(i.current.children[i.current.children.length-1]);var l=t;l.pop(),n(l)}},onChange:function(){}})})]})})),l=(n(127),n(29)),u=n.n(l),d=n(39),b=n(11),f=n(21),g=n(19),m=function(e){var t=e.author,n=e.title,a=e.summary,c=e.content,i=e.image,o=e.tags,r=e.published,s=e.comments;g.b.database().ref("Blogs").push({author:t,title:n,summary:a,content:c,image:i,tags:o,published:r,comments:s})},j=(n(128),Object(b.f)(Object(c.b)((function(e){var t=e.blog;return{blogInfo:t.blogInfo,tagsCreating:t.tagsCreating}}),(function(e){return{setTagsCreating:function(t){return e(Object(i.h)(t))},setBlogInfo:function(t){return e(Object(i.a)(t))},setFileName:function(t){return e(Object(i.c)(t))},toggleSaveBox:function(){return e(Object(i.i)())}}}))((function(e){var t=e.blogInfo,n=e.tagsCreating,a=e.setBlogInfo,c=e.setTagsCreating,i=e.setFileName,s=e.toggleSaveBox,l=e.history,b=Object(f.b)().currentUser,g=t.title,j=t.summary,h=t.image,p=t.content,O=function(e){"&nbsp;"!==g&&""!==p&&""!==j&&""!==h?Object(d.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(b.displayName),r={author:b.displayName,title:g,summary:j,content:p,image:h,tags:n,published:e,comments:[]},t.prev=2,t.next=5,m(r);case 5:a({summary:"",content:"",image:"",title:""}),c([]),i(""),s(!0),o({title:"Success!",message:"A new blog added.",type:"success",duration:2e3}),setTimeout((function(){l.replace("/blog")}),2e3),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),o({title:"Failed!",message:"Failed at: ".concat(t.t0),type:"error",duration:3e3}),console.log("SaveBlogBox: "+t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))():o({title:"Warning!",message:"Please fill all fields (".concat(""===h?"image, ":""," ").concat("&nbsp;"===g?"title, ":""," ").concat(""===p?"content, ":""," ").concat(""===j?"summary":"",")."),type:"warning",duration:3e3})};return Object(r.jsxs)("div",{className:"save-box",id:"save-box",children:[Object(r.jsx)("h6",{children:"C\xf4ng khai b\xe0i vi\u1ebft"}),Object(r.jsx)("p",{children:"L\u1ef1a ch\u1ecdn:"}),Object(r.jsxs)("div",{className:"save-option",children:[Object(r.jsx)("input",{type:"radio",name:"save",id:"public",defaultChecked:!1}),Object(r.jsx)("label",{htmlFor:"public",children:"C\xf4ng khai"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"radio",name:"save",id:"private",defaultChecked:!1}),Object(r.jsx)("label",{htmlFor:"private",children:"Ri\xeang t\u01b0"}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"radio",name:"save",id:"draft",defaultChecked:!0}),Object(r.jsx)("label",{htmlFor:"draft",children:"Draft"}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"option-description",id:"public-description",children:[Object(r.jsx)("p",{children:"T\u1ea5t c\u1ea3 m\u1ecdi ng\u01b0\u1eddi \u0111\u1ec1u c\xf3 th\u1ec3 nh\xecn th\u1ea5y b\xe0i vi\u1ebft n\xe0y."}),Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){return O(1)},children:"C\xf4ng khai"})]}),Object(r.jsxs)("div",{className:"option-description",id:"private-description",children:[Object(r.jsx)("p",{children:"Ch\u1ec9 c\xf3 b\u1ea1n m\u1edbi c\xf3 th\u1ec3 nh\xecn th\u1ea5y b\xe0i vi\u1ebft n\xe0y. B\u1ea1n c\xf3 th\u1ec3 c\xf4ng khai n\xf3 b\u1ea5t c\u1ee9 khi n\xe0o."}),Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){return O(2)},children:"Ri\xeang t\u01b0"})]}),Object(r.jsxs)("div",{className:"option-description",id:"draft-description",children:[Object(r.jsx)("p",{children:"L\u01b0u nh\xe1p n\u1ebfu b\u1ea1n ch\u01b0a ho\xe0n th\xe0nh b\xe0i vi\u1ebft n\xe0y v\xe0 mu\u1ed1n ch\u1ec9nh s\u1eeda ti\u1ebfp."}),Object(r.jsx)("button",{className:"btn btn-primary",onClick:function(){return O(0)},children:"L\u01b0u nh\xe1p"})]})]})]})})))),h=Object(c.b)((function(e){return{hiddenSave:e.blog.hiddenSave}}),(function(e){return{toggleSaveBox:function(){return e(Object(i.i)())}}}))((function(e){var t=e.hiddenSave,n=e.toggleSaveBox;return Object(r.jsxs)("div",{className:"actions",children:[Object(r.jsxs)("button",{className:"btn btn-secondary","data-toggle":"modal","data-target":".bd-modal-preview",children:["Xem tr\u01b0\u1edbc ",Object(r.jsx)("i",{className:"fa fa-eye"})]}),Object(r.jsxs)("div",{className:"save-blog",children:[Object(r.jsxs)("button",{className:"btn btn-secondary",onClick:n,children:["Xong ",Object(r.jsx)("i",{className:"fa fa-chevron-down","aria-hidden":"true"})]}),t?null:Object(r.jsx)(j,{})]})]})})),p=Object(c.b)((function(e){return{blogInfo:e.blog.blogInfo}}))((function(e){var t=e.blogInfo.content,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current.innerHTML=t}),[t]),Object(r.jsx)("div",{className:"modal fade bd-modal-preview",tabIndex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true",children:Object(r.jsx)("div",{className:"modal-dialog modal-lg",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsxs)("h5",{className:"modal-title",id:"modelPublishedLongTitle",children:[Object(r.jsx)("i",{className:"fa fa-eye"})," Xem tr\u01b0\u1edbc"]}),Object(r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(r.jsx)("div",{className:"modal-body",children:Object(r.jsx)("div",{className:"ck-content",children:Object(r.jsx)("div",{ref:n,style:{padding:"0px 20px"}})})}),Object(r.jsx)("div",{className:"modal-footer",children:Object(r.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"})})]})})})})),O=n(5),v=(n(129),Object(c.b)((function(e){return{blogInfo:e.blog.blogInfo}}),(function(e){return{setBlogInfo:function(t){return e(Object(i.a)(t))}}}))((function(e){var t=e.blogInfo,n=e.setBlogInfo;return Object(r.jsx)("textarea",{className:"summary-blog",placeholder:"T\xf3m t\u1eaft",onChange:function(e){return n(Object(O.a)(Object(O.a)({},t),{},{summary:e.target.value}))}})}))),x=(n(130),Object(c.b)((function(e){var t=e.blog;return{blogInfo:t.blogInfo,fileName:t.fileName,progress:t.progress,hiddenProgress:t.hiddenProgress}}),(function(e){return{setBlogInfo:function(t){return e(Object(i.a)(t))},setFileName:function(t){return e(Object(i.c)(t))},setProgress:function(t){return e(Object(i.f)(t))},setHiddenProgress:function(t){return e(Object(i.d)(t))}}}))((function(e){var t=e.blogInfo,n=e.fileName,c=e.setBlogInfo,i=e.setFileName,s=e.progress,l=e.setProgress,b=e.hiddenProgress,f=e.setHiddenProgress,m=t.image;Object(a.useEffect)((function(){f(!0),Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("file-upload-blog").onchange=function(){i(this.value.split("\\").pop())};case 1:case"end":return e.stop()}}),e)})))()}),[]);return Object(r.jsxs)("div",{className:"upload-image",children:[Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=document.getElementById("file-upload-blog").files[0];if("undefined"!==typeof n){var a="upload"+Date.now()+"."+n.type.split("/").pop(),r=g.c.ref("uploads/".concat(a)).put(n);f(!1),r.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);l(t)}),(function(e){o({title:"Failed!",message:e,type:"error",duration:2e3})}),(function(){g.c.ref("uploads").child(a).getDownloadURL().then((function(e){c(Object(O.a)(Object(O.a)({},t),{},{image:e}))}))}))}else i("no have any image!")},encType:"multipart/form-data",method:"POST",className:"custom-file form-upload",children:[Object(r.jsx)("input",{type:"file",id:"file-upload-blog",accept:"image/*",name:"file-upload-blog",style:{display:"none"}}),Object(r.jsxs)("div",{className:"action",children:[Object(r.jsx)("label",{className:"btn btn-secondary",htmlFor:"file-upload-blog",children:"Ch\u1ecdn \u1ea3nh"}),Object(r.jsx)("p",{style:{color:"no have any image!"===n?"red":"#333"},children:Object(r.jsx)("i",{children:n})})]}),Object(r.jsx)("div",{children:Object(r.jsx)("i",{className:"fa fa-angle-double-right"})}),Object(r.jsx)("input",{type:"submit",className:"btn btn-secondary",value:"T\u1ea3i l\xean"})]}),b?null:Object(r.jsx)("div",{className:"progress",style:{width:"auto",marginBottom:"0.5rem"},children:Object(r.jsxs)("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar",style:{width:"".concat(s,"%")},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100",children:[s,"%"]})}),Object(r.jsx)("img",{style:{display:""!==m?"block":"none"},src:m,alt:n})]})}))),y=n(131),N=n(132),C=n(133),S=n(137),T=n.n(S),I=(n(148),function(){function e(t){Object(y.a)(this,e),this.loader=t}return Object(N.a)(e,[{key:"upload",value:function(){return this.loader.file.then((function(e){return new Promise((function(t,n){var a="upload"+Date.now()+"."+e.type.split("/").pop(),c=g.c.ref("uploads/".concat(a)).put(e);c.on("state_changed",(function(e){}),(function(e){o({title:"Failed!",message:e,type:"error",duration:2e3})}),(function(){c.snapshot.ref.getDownloadURL().then((function(e){t({default:e})}))}))}))}))}}]),e}()),k=Object(c.b)((function(e){return{blogInfo:e.blog.blogInfo}}),(function(e){return{setBlogInfo:function(t){return e(Object(i.a)(t))}}}))((function(e){var t=e.blogInfo,n=e.setBlogInfo;return Object(r.jsx)("div",{className:"editor-blog",children:Object(r.jsx)(C.CKEditor,{editor:T.a,config:{toolbar:{items:["code","|","heading","|","bold","underline","italic","fontFamily","fontSize","fontColor","fontBackgroundColor","highlight","|","bulletedList","numberedList","|","outdent","indent","|","link","imageUpload","blockQuote","insertTable","mediaEmbed","imageInsert","codeBlock","undo","redo"]},language:"en",image:{styles:["alignLeft","alignCenter","alignRight"],toolbar:["imageStyle:alignLeft","imageStyle:alignCenter","imageStyle:alignRight","|","imageResize","|","imageTextAlternative","|","linkImage"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableCellProperties","tableProperties"]},licenseKey:""},onChange:function(e,a){n(Object(O.a)(Object(O.a)({},t),{},{title:a.getData().split("</h1>").shift().slice(4),content:a.getData()}))},onReady:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new I(e)}}})})}));t.default=Object(c.b)((function(e){return{hiddenSave:e.blog.hiddenSave}}),(function(e){return{toggleSaveBox:function(){return e(Object(i.i)())}}}))((function(e){var t=e.hiddenSave,n=e.toggleSaveBox;e.history;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"create-blog",children:[Object(r.jsx)("div",{id:"toast-custom"}),t?null:Object(r.jsx)("div",{className:"overload",onClick:n}),Object(r.jsx)(h,{}),Object(r.jsx)(s,{}),Object(r.jsxs)("div",{className:"summary row",children:[Object(r.jsx)("div",{className:"col l-9 md-8 c-12",children:Object(r.jsx)(v,{})}),Object(r.jsx)("div",{className:"col l-3 md-4 c-12",children:Object(r.jsx)(x,{})})]}),Object(r.jsx)(k,{}),Object(r.jsx)(p,{})]})})}))},72:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return b}));var a=n(17),c=function(e){return{type:a.a.SET_LST_BLOGS,payload:e}},i=function(e){return{type:a.a.SET_COUNT_BLOGS,payload:e}},o=function(e){return{type:a.a.SET_TAGS_BLOG,payload:e}},r=function(e){return{type:a.a.SET_TAGS_CREATING,payload:e}},s=function(e){return{type:a.a.SET_BLOG_INFO,payload:e}},l=function(e){return{type:a.a.SET_FILENAME,payload:e}},u=function(){return{type:a.a.TOGGLE_SAVE_BOX}},d=function(e){return{type:a.a.PROGRESS_UPLOAD,payload:e}},b=function(e){return{type:a.a.HIDDEN_PROGRESS,payload:e}}}}]);
//# sourceMappingURL=5.9c4533eb.chunk.js.map